
/*!---- mmenu-----*/
/*
 * jQuery mmenu v5.6.2
 * @requires jQuery 1.7.0 or later
 *
 * mmenu.frebsite.nl
 *	
 * Copyright (c) Fred Heusschen
 * www.frebsite.nl
 *
 * License: CC-BY-NC-4.0
 * http://creativecommons.org/licenses/by-nc/4.0/
 */
! function(e) {
  function t() {
    e[n].glbl || (r = {
      $wndw: e(window),
      $docu: e(document),
      $html: e("html"),
      $body: e("body")
    }, i = {}, a = {}, o = {}, e.each([i, a, o], function(e, t) {
      t.add = function(e) {
        e = e.split(" ");
        for (var n = 0, s = e.length; s > n; n++) t[e[n]] = t.mm(e[n])
          }
    }), i.mm = function(e) {
      return "mm-" + e
    }, i.add("wrapper menu panels panel nopanel current highest opened subopened navbar hasnavbar title btn prev next listview nolistview inset vertical selected divider spacer hidden fullsubopen"), i.umm = function(e) {
      return "mm-" == e.slice(0, 3) && (e = e.slice(3)), e
    }, a.mm = function(e) {
      return "mm-" + e
    }, a.add("parent sub"), o.mm = function(e) {
      return e + ".mm"
    }, o.add("transitionend webkitTransitionEnd click scroll keydown mousedown mouseup touchstart touchmove touchend orientationchange"), e[n]._c = i, e[n]._d = a, e[n]._e = o, e[n].glbl = r)
  }
  var n = "mmenu",
      s = "5.6.2";
  if (!(e[n] && e[n].version > s)) {
    e[n] = function(e, t, n) {
      this.$menu = e, this._api = ["bind", "init", "update", "setSelected", "getInstance", "openPanel", "closePanel", "closeAllPanels"], this.opts = t, this.conf = n, this.vars = {}, this.cbck = {}, "function" == typeof this.___deprecated && this.___deprecated(), this._initMenu(), this._initAnchors();
      var s = this.$pnls.children();
      return this._initAddons(), this.init(s), "function" == typeof this.___debug && this.___debug(), this
    }, e[n].version = s, e[n].addons = {}, e[n].uniqueId = 0, e[n].defaults = {
      extensions: [],
      navbar: {
        add: !0,
        title: "Menu",
        titleLink: "panel"
      },
      onClick: {
        setSelected: !0
      },
      slidingSubmenus: !0
    }, e[n].configuration = {
      classNames: {
        divider: "Divider",
        inset: "Inset",
        panel: "Panel",
        selected: "Selected",
        spacer: "Spacer",
        vertical: "Vertical"
      },
      clone: !1,
      openingInterval: 25,
      panelNodetype: "ul, ol, div",
      transitionDuration: 400
    }, e[n].prototype = {
      init: function(e) {
        e = e.not("." + i.nopanel), e = this._initPanels(e), this.trigger("init", e), this.trigger("update")
      },
      update: function() {
        this.trigger("update")
      },
      setSelected: function(e) {
        this.$menu.find("." + i.listview).children().removeClass(i.selected), e.addClass(i.selected), this.trigger("setSelected", e)
      },
      openPanel: function(t) {
        var s = t.parent(),
            a = this;
        if (s.hasClass(i.vertical)) {
          var o = s.parents("." + i.subopened);
          if (o.length) return void this.openPanel(o.first());
          s.addClass(i.opened), this.trigger("openPanel", t), this.trigger("openingPanel", t), this.trigger("openedPanel", t)
        } else {
          if (t.hasClass(i.current)) return;
          var r = this.$pnls.children("." + i.panel),
              l = r.filter("." + i.current);
          r.removeClass(i.highest).removeClass(i.current).not(t).not(l).not("." + i.vertical).addClass(i.hidden), e[n].support.csstransitions || l.addClass(i.hidden), t.hasClass(i.opened) ? t.nextAll("." + i.opened).addClass(i.highest).removeClass(i.opened).removeClass(i.subopened) : (t.addClass(i.highest), l.addClass(i.subopened)), t.removeClass(i.hidden).addClass(i.current), a.trigger("openPanel", t), setTimeout(function() {
            t.removeClass(i.subopened).addClass(i.opened), a.trigger("openingPanel", t), a.__transitionend(t, function() {
              a.trigger("openedPanel", t)
            }, a.conf.transitionDuration)
          }, this.conf.openingInterval)
        }
      },
      closePanel: function(e) {
        var t = e.parent();
        t.hasClass(i.vertical) && (t.removeClass(i.opened), this.trigger("closePanel", e), this.trigger("closingPanel", e), this.trigger("closedPanel", e))
      },
      closeAllPanels: function() {
        this.$menu.find("." + i.listview).children().removeClass(i.selected).filter("." + i.vertical).removeClass(i.opened);
        var e = this.$pnls.children("." + i.panel),
            t = e.first();
        this.$pnls.children("." + i.panel).not(t).removeClass(i.subopened).removeClass(i.opened).removeClass(i.current).removeClass(i.highest).addClass(i.hidden), this.openPanel(t)
      },
      togglePanel: function(e) {
        var t = e.parent();
        t.hasClass(i.vertical) && this[t.hasClass(i.opened) ? "closePanel" : "openPanel"](e)
      },
      getInstance: function() {
        return this
      },
      bind: function(e, t) {
        this.cbck[e] = this.cbck[e] || [], this.cbck[e].push(t)
      },
      trigger: function() {
        var e = this,
            t = Array.prototype.slice.call(arguments),
            n = t.shift();
        if (this.cbck[n])
          for (var s = 0, i = this.cbck[n].length; i > s; s++) this.cbck[n][s].apply(e, t)
            },
      _initMenu: function() {
        this.$menu.attr("id", this.$menu.attr("id") || this.__getUniqueId()), this.conf.clone && (this.$menu = this.$menu.clone(!0), this.$menu.add(this.$menu.find("[id]")).filter("[id]").each(function() {
          e(this).attr("id", i.mm(e(this).attr("id")))
        })), this.$menu.contents().each(function() {
          3 == e(this)[0].nodeType && e(this).remove()
        }), this.$pnls = e('<div class="' + i.panels + '" />').append(this.$menu.children(this.conf.panelNodetype)).prependTo(this.$menu), this.$menu.parent().addClass(i.wrapper);
        var t = [i.menu];
        this.opts.slidingSubmenus || t.push(i.vertical), this.opts.extensions = this.opts.extensions.length ? "mm-" + this.opts.extensions.join(" mm-") : "", this.opts.extensions && t.push(this.opts.extensions), this.$menu.addClass(t.join(" "))
      },
      _initPanels: function(t) {
        var n = this,
            s = this.__findAddBack(t, "ul, ol");
        this.__refactorClass(s, this.conf.classNames.inset, "inset").addClass(i.nolistview + " " + i.nopanel), s.not("." + i.nolistview).addClass(i.listview);
        var o = this.__findAddBack(t, "." + i.listview).children();
        this.__refactorClass(o, this.conf.classNames.selected, "selected"), this.__refactorClass(o, this.conf.classNames.divider, "divider"), this.__refactorClass(o, this.conf.classNames.spacer, "spacer"), this.__refactorClass(this.__findAddBack(t, "." + this.conf.classNames.panel), this.conf.classNames.panel, "panel");
        var r = e(),
            l = t.add(t.find("." + i.panel)).add(this.__findAddBack(t, "." + i.listview).children().children(this.conf.panelNodetype)).not("." + i.nopanel);
        this.__refactorClass(l, this.conf.classNames.vertical, "vertical"), this.opts.slidingSubmenus || l.addClass(i.vertical), l.each(function() {
          var t = e(this),
              s = t;
          t.is("ul, ol") ? (t.wrap('<div class="' + i.panel + '" />'), s = t.parent()) : s.addClass(i.panel);
          var a = t.attr("id");
          t.removeAttr("id"), s.attr("id", a || n.__getUniqueId()), t.hasClass(i.vertical) && (t.removeClass(n.conf.classNames.vertical), s.add(s.parent()).addClass(i.vertical)), r = r.add(s)
        });
        var d = e("." + i.panel, this.$menu);
        r.each(function(t) {
          var s, o, r = e(this),
              l = r.parent(),
              d = l.children("a, span").first();
          if (l.is("." + i.panels) || (l.data(a.sub, r), r.data(a.parent, l)), l.children("." + i.next).length || l.parent().is("." + i.listview) && (s = r.attr("id"), o = e('<a class="' + i.next + '" href="#' + s + '" data-target="#' + s + '" />').insertBefore(d), d.is("span") && o.addClass(i.fullsubopen)), !r.children("." + i.navbar).length && !l.hasClass(i.vertical)) {
            l.parent().is("." + i.listview) ? l = l.closest("." + i.panel) : (d = l.closest("." + i.panel).find('a[href="#' + r.attr("id") + '"]').first(), l = d.closest("." + i.panel));
            var c = e('<div class="' + i.navbar + '" />');
            if (l.length) {
              switch (s = l.attr("id"), n.opts.navbar.titleLink) {
                case "anchor":
                  _url = d.attr("href");
                  break;
                case "panel":
                case "parent":
                  _url = "#" + s;
                  break;
                default:
                  _url = !1
              }
              c.append('<a class="' + i.btn + " " + i.prev + '" href="#' + s + '" data-target="#' + s + '" />').append(e('<a class="' + i.title + '"' + (_url ? ' href="' + _url + '"' : "") + " />").text(d.text())).prependTo(r), n.opts.navbar.add && r.addClass(i.hasnavbar)
            } else n.opts.navbar.title && (c.append('<a class="' + i.title + '">' + n.opts.navbar.title + "</a>").prependTo(r), n.opts.navbar.add && r.addClass(i.hasnavbar))
              }
        });
        var c = this.__findAddBack(t, "." + i.listview).children("." + i.selected).removeClass(i.selected).last().addClass(i.selected);
        c.add(c.parentsUntil("." + i.menu, "li")).filter("." + i.vertical).addClass(i.opened).end().each(function() {
          e(this).parentsUntil("." + i.menu, "." + i.panel).not("." + i.vertical).first().addClass(i.opened).parentsUntil("." + i.menu, "." + i.panel).not("." + i.vertical).first().addClass(i.opened).addClass(i.subopened)
        }), c.children("." + i.panel).not("." + i.vertical).addClass(i.opened).parentsUntil("." + i.menu, "." + i.panel).not("." + i.vertical).first().addClass(i.opened).addClass(i.subopened);
        var p = d.filter("." + i.opened);
        return p.length || (p = r.first()), p.addClass(i.opened).last().addClass(i.current), r.not("." + i.vertical).not(p.last()).addClass(i.hidden).end().filter(function() {
          return !e(this).parent().hasClass(i.panels)
        }).appendTo(this.$pnls), r
      },
      _initAnchors: function() {
        var t = this;
        r.$body.on(o.click + "-oncanvas", "a[href]", function(s) {
          var a = e(this),
              o = !1,
              r = t.$menu.find(a).length;
          for (var l in e[n].addons)
            if (e[n].addons[l].clickAnchor.call(t, a, r)) {
              o = !0;
              break
            } var d = a.attr("href");
          if (!o && r && d.length > 1 && "#" == d.slice(0, 1)) try {
            var c = e(d, t.$menu);
            c.is("." + i.panel) && (o = !0, t[a.parent().hasClass(i.vertical) ? "togglePanel" : "openPanel"](c))
          } catch (p) {}
          if (o && s.preventDefault(), !o && r && a.is("." + i.listview + " > li > a") && !a.is('[rel="external"]') && !a.is('[target="_blank"]')) {
            t.__valueOrFn(t.opts.onClick.setSelected, a) && t.setSelected(e(s.target).parent());
            var h = t.__valueOrFn(t.opts.onClick.preventDefault, a, "#" == d.slice(0, 1));
            h && s.preventDefault(), t.__valueOrFn(t.opts.onClick.close, a, h) && t.close()
          }
        })
      },
      _initAddons: function() {
        var t;
        for (t in e[n].addons) e[n].addons[t].add.call(this), e[n].addons[t].add = function() {};
        for (t in e[n].addons) e[n].addons[t].setup.call(this)
          },
      _getOriginalMenuId: function() {
        var e = this.$menu.attr("id");
        return e && e.length && this.conf.clone && (e = i.umm(e)), e
      },
      __api: function() {
        var t = this,
            n = {};
        return e.each(this._api, function(e) {
          var s = this;
          n[s] = function() {
            var e = t[s].apply(t, arguments);
            return "undefined" == typeof e ? n : e
          }
        }), n
      },
      __valueOrFn: function(e, t, n) {
        return "function" == typeof e ? e.call(t[0]) : "undefined" == typeof e && "undefined" != typeof n ? n : e
      },
      __refactorClass: function(e, t, n) {
        return e.filter("." + t).removeClass(t).addClass(i[n])
      },
      __findAddBack: function(e, t) {
        return e.find(t).add(e.filter(t))
      },
      __filterListItems: function(e) {
        return e.not("." + i.divider).not("." + i.hidden)
      },
      __transitionend: function(e, t, n) {
        var s = !1,
            i = function() {
              s || t.call(e[0]), s = !0
            };
        e.one(o.transitionend, i), e.one(o.webkitTransitionEnd, i), setTimeout(i, 1.1 * n)
      },
      __getUniqueId: function() {
        return i.mm(e[n].uniqueId++)
      }
    }, e.fn[n] = function(s, i) {
      return t(), s = e.extend(!0, {}, e[n].defaults, s), i = e.extend(!0, {}, e[n].configuration, i), this.each(function() {
        var t = e(this);
        if (!t.data(n)) {
          var a = new e[n](t, s, i);
          a.$menu.data(n, a.__api())
        }
      })
    }, e[n].support = {
      touch: "ontouchstart" in window || navigator.msMaxTouchPoints || !1,
      csstransitions: function() {
      if ("undefined" != typeof Modernizr && "undefined" != typeof Modernizr.csstransitions) return Modernizr.csstransitions;
      var e = document.body || document.documentElement,
      t = e.style,
      n = "transition";
      if ("string" == typeof t[n]) return !0;
      var s = ["Moz", "webkit", "Webkit", "Khtml", "O", "ms"];
      n = n.charAt(0).toUpperCase() + n.substr(1);
      for (var i = 0; i < s.length; i++)
      if ("string" == typeof t[s[i] + n]) return !0;
      return !1
    }()
  };
  var i, a, o, r
  }
}(jQuery),
  /*	
 * jQuery mmenu offCanvas addon
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */
  function(e) {
  var t = "mmenu",
      n = "offCanvas";
  e[t].addons[n] = {
    setup: function() {
      if (this.opts[n]) {
        var i = this.opts[n],
            a = this.conf[n];
        o = e[t].glbl, this._api = e.merge(this._api, ["open", "close", "setPage"]), ("top" == i.position || "bottom" == i.position) && (i.zposition = "front"), "string" != typeof a.pageSelector && (a.pageSelector = "> " + a.pageNodetype), o.$allMenus = (o.$allMenus || e()).add(this.$menu), this.vars.opened = !1;
        var r = [s.offcanvas];
        "left" != i.position && r.push(s.mm(i.position)), "back" != i.zposition && r.push(s.mm(i.zposition)), this.$menu.addClass(r.join(" ")).parent().removeClass(s.wrapper), this.setPage(o.$page), this._initBlocker(), this["_initWindow_" + n](), this.$menu[a.menuInjectMethod + "To"](a.menuWrapperSelector);
        var l = window.location.hash;
        if (l) {
          var d = this._getOriginalMenuId();
          d && d == l.slice(1) && this.open()
        }
      }
    },
    add: function() {
      s = e[t]._c, i = e[t]._d, a = e[t]._e, s.add("offcanvas slideout blocking modal background opening blocker page"), i.add("style"), a.add("resize")
    },
    clickAnchor: function(e, t) {
      if (!this.opts[n]) return !1;
      var s = this._getOriginalMenuId();
      if (s && e.is('[href="#' + s + '"]')) return this.open(), !0;
      if (o.$page) return s = o.$page.first().attr("id"), s && e.is('[href="#' + s + '"]') ? (this.close(), !0) : !1
        }
  }, e[t].defaults[n] = {
    position: "left",
    zposition: "back",
    blockUI: !0,
    moveBackground: !0
  }, e[t].configuration[n] = {
    pageNodetype: "div",
    pageSelector: null,
    noPageSelector: [],
    wrapPageIfNeeded: !0,
    menuWrapperSelector: "body",
    menuInjectMethod: "prepend"
  }, e[t].prototype.open = function() {
    if (!this.vars.opened) {
      var e = this;
      this._openSetup(), setTimeout(function() {
        e._openFinish()
      }, this.conf.openingInterval), this.trigger("open")
    }
  }, e[t].prototype._openSetup = function() {
    var t = this,
        r = this.opts[n];
    this.closeAllOthers(), o.$page.each(function() {
      e(this).data(i.style, e(this).attr("style") || "")
    }), o.$wndw.trigger(a.resize + "-" + n, [!0]);
    var l = [s.opened];
    r.blockUI && l.push(s.blocking), "modal" == r.blockUI && l.push(s.modal), r.moveBackground && l.push(s.background), "left" != r.position && l.push(s.mm(this.opts[n].position)), "back" != r.zposition && l.push(s.mm(this.opts[n].zposition)), this.opts.extensions && l.push(this.opts.extensions), o.$html.addClass(l.join(" ")), setTimeout(function() {
      t.vars.opened = !0
    }, this.conf.openingInterval), this.$menu.addClass(s.current + " " + s.opened)
  }, e[t].prototype._openFinish = function() {
    var e = this;
    this.__transitionend(o.$page.first(), function() {
      e.trigger("opened")
    }, this.conf.transitionDuration), o.$html.addClass(s.opening), this.trigger("opening")
  }, e[t].prototype.close = function() {
    if (this.vars.opened) {
      var t = this;
      this.__transitionend(o.$page.first(), function() {
        t.$menu.removeClass(s.current).removeClass(s.opened), o.$html.removeClass(s.opened).removeClass(s.blocking).removeClass(s.modal).removeClass(s.background).removeClass(s.mm(t.opts[n].position)).removeClass(s.mm(t.opts[n].zposition)), t.opts.extensions && o.$html.removeClass(t.opts.extensions), o.$page.each(function() {
          e(this).attr("style", e(this).data(i.style))
        }), t.vars.opened = !1, t.trigger("closed")
      }, this.conf.transitionDuration), o.$html.removeClass(s.opening), this.trigger("close"), this.trigger("closing")
    }
  }, e[t].prototype.closeAllOthers = function() {
    o.$allMenus.not(this.$menu).each(function() {
      var n = e(this).data(t);
      n && n.close && n.close()
    })
  }, e[t].prototype.setPage = function(t) {
    var i = this,
        a = this.conf[n];
    t && t.length || (t = o.$body.find(a.pageSelector), a.noPageSelector.length && (t = t.not(a.noPageSelector.join(", "))), t.length > 1 && a.wrapPageIfNeeded && (t = t.wrapAll("<" + this.conf[n].pageNodetype + " />").parent())), t.each(function() {
      e(this).attr("id", e(this).attr("id") || i.__getUniqueId())
    }), t.addClass(s.page + " " + s.slideout), o.$page = t, this.trigger("setPage", t)
  }, e[t].prototype["_initWindow_" + n] = function() {
    o.$wndw.off(a.keydown + "-" + n).on(a.keydown + "-" + n, function(e) {
      return o.$html.hasClass(s.opened) && 9 == e.keyCode ? (e.preventDefault(), !1) : void 0
    });
    var e = 0;
    o.$wndw.off(a.resize + "-" + n).on(a.resize + "-" + n, function(t, n) {
      if (1 == o.$page.length && (n || o.$html.hasClass(s.opened))) {
        var i = o.$wndw.height();
        (n || i != e) && (e = $j, o.$page.css("minHeight", i))
      }
    })
  }, e[t].prototype._initBlocker = function() {
    var t = this;
    this.opts[n].blockUI && (o.$blck || (o.$blck = e('<div id="' + s.blocker + '" class="' + s.slideout + '" />')), o.$blck.appendTo(o.$body).off(a.touchstart + "-" + n + " " + a.touchmove + "-" + n).on(a.touchstart + "-" + n + " " + a.touchmove + "-" + n, function(e) {
      e.preventDefault(), e.stopPropagation(), o.$blck.trigger(a.mousedown + "-" + n)
    }).off(a.mousedown + "-" + n).on(a.mousedown + "-" + n, function(e) {
      e.preventDefault(), o.$html.hasClass(s.modal) || (t.closeAllOthers(), t.close())
    }))
  };
  var s, i, a, o
  }($j),
    /*	
 * jQuery mmenu scrollBugFix addon
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */
  function(e) {
  var t = "mmenu",
      n = "scrollBugFix";
  e[t].addons[n] = {
    setup: function() {
      var i = this,
          r = this.opts[n];
      this.conf[n];
      if (o = e[t].glbl, e[t].support.touch && this.opts.offCanvas && this.opts.offCanvas.blockUI && ("boolean" == typeof r && (r = {
        fix: r
      }), "object" != typeof r && (r = {}), r = this.opts[n] = e.extend(!0, {}, e[t].defaults[n], r), r.fix)) {
        var l = this.$menu.attr("id"),
            d = !1;
        this.bind("opening", function() {
          this.$pnls.children("." + s.current).scrollTop(0)
        }), o.$docu.on(a.touchmove, function(e) {
          i.vars.opened && e.preventDefault()
        }), o.$body.on(a.touchstart, "#" + l + "> ." + s.panels + "> ." + s.current, function(e) {
          i.vars.opened && (d || (d = !0, 0 === e.currentTarget.scrollTop ? e.currentTarget.scrollTop = 1 : e.currentTarget.scrollHeight === e.currentTarget.scrollTop + e.currentTarget.offsetHeight && (e.currentTarget.scrollTop -= 1), d = !1))
        }).on(a.touchmove, "#" + l + "> ." + s.panels + "> ." + s.current, function(t) {
          i.vars.opened && e(this)[0].scrollHeight > e(this).innerHeight() && t.stopPropagation()
        }), o.$wndw.on(a.orientationchange, function() {
          i.$pnls.children("." + s.current).scrollTop(0).css({
            "-webkit-overflow-scrolling": "auto"
          }).css({
            "-webkit-overflow-scrolling": "touch"
          })
        })
      }
    },
    add: function() {
      s = e[t]._c, i = e[t]._d, a = e[t]._e
    },
    clickAnchor: function(e, t) {}
  }, e[t].defaults[n] = {
    fix: !0
  };
  var s, i, a, o
  }($j);


/*======== MMENU JS ==========*/
var API = "",openPage;
$j(document).ready(function() {
  var bottomContent = $j(".mobi_bottom_wrapper").html();
  var bottomQuicklinksContent = $j(".mobi_bottom_static_wrapper").html();
  $j('#mmenu').mmenu({
    extensions : [
      "front",
      "bottom",
      "fullscreen",  
      "border-full",
      "multiline"
    ],
    "position": {
      "top": "78px"
    }, });
  
  
  //$j(".mobi_mmenu_ul_level_1.mm-listview").append("<div class='mobi_bottom_wrapper'>" + bottomContent + "</div>");
 // $j(".mm-listview").append("<div class='mobi_bottom_static_wrapper'>" + bottomQuicklinksContent + "</div>");
  API = $j('#mmenu').data( "mmenu" );
  $j(".mburger.mburger--collapse").click(function(){
    if($j(this).hasClass("mobi_switcher_close")){
      $j(".mobi_bottom_static_wrapper.d-none").removeClass("d-none");
      $j(".mobi_switcher").removeClass("activated");
      $j(".toggleMobiSwitchers").removeClass("active");
      $j(".mm-panel.mm-panel_opened").removeClass("mobi_switcher_opened");
      $j(this).removeClass("mobi_switcher_close");
    }
    else{
      if($j(this).hasClass("active")){
        $j(this).removeClass("active");
        $j(this).parent().removeClass("mm-wrapper_opened");
        API.close();
      }
      else{
        if($j(".mobi_collapser > a.login-Icon").hasClass("active")){
          $j(".mobi_collapser > a.login-Icon").removeClass("active");
          $j(".mobi_login_wrapper").removeClass("active");
          $j(".mobi_login_wrapper").slideUp();
        }
        $j(this).addClass("active");
        $j(this).parent().addClass("mm-wrapper_opened");
        $j(".mobi_mmenu_ul_level_1.d-none").removeClass("d-none");
        API.open();
      }
    }
  });
  $j(".mm-title").each(function(){
    $j(this).html("Back");
  });
  
  
 
  //$j(".mobi_header_wrapper > .mobi_bottom_wrapper.d-none, .mobi_header_wrapper > .mobi_bottom_static_wrapper.d-none").remove();
  $j("#mm-0.mm-page.mm-slideout").attr("style","");
  $j("#mm-0.mm-page.mm-slideout").addClass("d-none");
  
  $j("#mmenu .mm-next").each(function(){
    $j(this).append("<span class='d-none'>Next Slide</span>")
  });
  $j("#mmenu .mm-prev").each(function(){
    $j(this).append("<span class='d-none'>Previous Slide</span>")
  });
});

/*======== MMENU JS ==========*/
/*!---- slick-slider-----*/
/*
     _ _      _       _
 ___| (_) ___| | __  (_)___
/ __| | |/ __| |/ /  | / __|
\__ \ | | (__|   < _ | \__ \
|___/_|_|\___|_|\_(_)/ |___/
                   |__/

 Version: 1.5.9
  Author: Ken Wheeler
 Website: http://kenwheeler.github.io
    Docs: http://kenwheeler.github.io/slick
    Repo: http://github.com/kenwheeler/slick
  Issues: http://github.com/kenwheeler/slick/issues

 */
!function(a){"use strict";"function"==typeof define&&define.amd?define(["$j"],a):"undefined"!=typeof exports?module.exports=a(require("$j")):a($j)}(function(a){"use strict";var b=window.Slick||{};b=function(){function c(c,d){var f,e=this;e.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:a(c),appendDots:a(c),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(a,b){return'<button type="button" data-role="none" role="button" aria-required="false" tabindex="0">'+(b+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!1,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},e.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},a.extend(e,e.initials),e.activeBreakpoint=null,e.animType=null,e.animProp=null,e.breakpoints=[],e.breakpointSettings=[],e.cssTransitions=!1,e.hidden="hidden",e.paused=!1,e.positionProp=null,e.respondTo=null,e.rowCount=1,e.shouldClick=!0,e.$slider=a(c),e.$slidesCache=null,e.transformType=null,e.transitionType=null,e.visibilityChange="visibilitychange",e.windowWidth=0,e.windowTimer=null,f=a(c).data("slick")||{},e.options=a.extend({},e.defaults,f,d),e.currentSlide=e.options.initialSlide,e.originalSettings=e.options,"undefined"!=typeof document.mozHidden?(e.hidden="mozHidden",e.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(e.hidden="webkitHidden",e.visibilityChange="webkitvisibilitychange"),e.autoPlay=a.proxy(e.autoPlay,e),e.autoPlayClear=a.proxy(e.autoPlayClear,e),e.changeSlide=a.proxy(e.changeSlide,e),e.clickHandler=a.proxy(e.clickHandler,e),e.selectHandler=a.proxy(e.selectHandler,e),e.setPosition=a.proxy(e.setPosition,e),e.swipeHandler=a.proxy(e.swipeHandler,e),e.dragHandler=a.proxy(e.dragHandler,e),e.keyHandler=a.proxy(e.keyHandler,e),e.autoPlayIterator=a.proxy(e.autoPlayIterator,e),e.instanceUid=b++,e.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,e.registerBreakpoints(),e.init(!0),e.checkResponsive(!0)}var b=0;return c}(),b.prototype.addSlide=b.prototype.slickAdd=function(b,c,d){var e=this;if("boolean"==typeof c)d=c,c=null;else if(0>c||c>=e.slideCount)return!1;e.unload(),"number"==typeof c?0===c&&0===e.$slides.length?a(b).appendTo(e.$slideTrack):d?a(b).insertBefore(e.$slides.eq(c)):a(b).insertAfter(e.$slides.eq(c)):d===!0?a(b).prependTo(e.$slideTrack):a(b).appendTo(e.$slideTrack),e.$slides=e.$slideTrack.children(this.options.slide),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.append(e.$slides),e.$slides.each(function(b,c){a(c).attr("data-slick-index",b)}),e.$slidesCache=e.$slides,e.reinit()},b.prototype.animateHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.animate({height:b},a.options.speed)}},b.prototype.animateSlide=function(b,c){var d={},e=this;e.animateHeight(),e.options.rtl===!0&&e.options.vertical===!1&&(b=-b),e.transformsEnabled===!1?e.options.vertical===!1?e.$slideTrack.animate({left:b},e.options.speed,e.options.easing,c):e.$slideTrack.animate({top:b},e.options.speed,e.options.easing,c):e.cssTransitions===!1?(e.options.rtl===!0&&(e.currentLeft=-e.currentLeft),a({animStart:e.currentLeft}).animate({animStart:b},{duration:e.options.speed,easing:e.options.easing,step:function(a){a=Math.ceil(a),e.options.vertical===!1?(d[e.animType]="translate("+a+"px, 0px)",e.$slideTrack.css(d)):(d[e.animType]="translate(0px,"+a+"px)",e.$slideTrack.css(d))},complete:function(){c&&c.call()}})):(e.applyTransition(),b=Math.ceil(b),e.options.vertical===!1?d[e.animType]="translate3d("+b+"px, 0px, 0px)":d[e.animType]="translate3d(0px,"+b+"px, 0px)",e.$slideTrack.css(d),c&&setTimeout(function(){e.disableTransition(),c.call()},e.options.speed))},b.prototype.asNavFor=function(b){var c=this,d=c.options.asNavFor;d&&null!==d&&(d=a(d).not(c.$slider)),null!==d&&"object"==typeof d&&d.each(function(){var c=a(this).slick("getSlick");c.unslicked||c.slideHandler(b,!0)})},b.prototype.applyTransition=function(a){var b=this,c={};b.options.fade===!1?c[b.transitionType]=b.transformType+" "+b.options.speed+"ms "+b.options.cssEase:c[b.transitionType]="opacity "+b.options.speed+"ms "+b.options.cssEase,b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.autoPlay=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer),a.slideCount>a.options.slidesToShow&&a.paused!==!0&&(a.autoPlayTimer=setInterval(a.autoPlayIterator,a.options.autoplaySpeed))},b.prototype.autoPlayClear=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer)},b.prototype.autoPlayIterator=function(){var a=this;a.options.infinite===!1?1===a.direction?(a.currentSlide+1===a.slideCount-1&&(a.direction=0),a.slideHandler(a.currentSlide+a.options.slidesToScroll)):(a.currentSlide-1===0&&(a.direction=1),a.slideHandler(a.currentSlide-a.options.slidesToScroll)):a.slideHandler(a.currentSlide+a.options.slidesToScroll)},b.prototype.buildArrows=function(){var b=this;b.options.arrows===!0&&(b.$prevArrow=a(b.options.prevArrow).addClass("slick-arrow"),b.$nextArrow=a(b.options.nextArrow).addClass("slick-arrow"),b.slideCount>b.options.slidesToShow?(b.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),b.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.prependTo(b.options.appendArrows),b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.appendTo(b.options.appendArrows),b.options.infinite!==!0&&b.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):b.$prevArrow.add(b.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},b.prototype.buildDots=function(){var c,d,b=this;if(b.options.dots===!0&&b.slideCount>b.options.slidesToShow){for(d='<ul class="'+b.options.dotsClass+'">',c=0;c<=b.getDotCount();c+=1)d+="<li>"+b.options.customPaging.call(this,b,c)+"</li>";d+="</ul>",b.$dots=a(d).appendTo(b.options.appendDots),b.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},b.prototype.buildOut=function(){var b=this;b.$slides=b.$slider.children(b.options.slide+":not(.slick-cloned)").addClass("slick-slide"),b.slideCount=b.$slides.length,b.$slides.each(function(b,c){a(c).attr("data-slick-index",b).data("originalStyling",a(c).attr("style")||"")}),b.$slider.addClass("slick-slider"),b.$slideTrack=0===b.slideCount?a('<div class="slick-track"/>').appendTo(b.$slider):b.$slides.wrapAll('<div class="slick-track"/>').parent(),b.$list=b.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),b.$slideTrack.css("opacity",0),(b.options.centerMode===!0||b.options.swipeToSlide===!0)&&(b.options.slidesToScroll=1),a("img[data-lazy]",b.$slider).not("[src]").addClass("slick-loading"),b.setupInfinite(),b.buildArrows(),b.buildDots(),b.updateDots(),b.setSlideClasses("number"==typeof b.currentSlide?b.currentSlide:0),b.options.draggable===!0&&b.$list.addClass("draggable")},b.prototype.buildRows=function(){var b,c,d,e,f,g,h,a=this;if(e=document.createDocumentFragment(),g=a.$slider.children(),a.options.rows>1){for(h=a.options.slidesPerRow*a.options.rows,f=Math.ceil(g.length/h),b=0;f>b;b++){var i=document.createElement("div");for(c=0;c<a.options.rows;c++){var j=document.createElement("div");for(d=0;d<a.options.slidesPerRow;d++){var k=b*h+(c*a.options.slidesPerRow+d);g.get(k)&&j.appendChild(g.get(k))}i.appendChild(j)}e.appendChild(i)}a.$slider.html(e),a.$slider.children().children().children().css({width:100/a.options.slidesPerRow+"%",display:"inline-block"})}},b.prototype.checkResponsive=function(b,c){var e,f,g,d=this,h=!1,i=d.$slider.width(),j=window.innerWidth||a(window).width();if("window"===d.respondTo?g=j:"slider"===d.respondTo?g=i:"min"===d.respondTo&&(g=Math.min(j,i)),d.options.responsive&&d.options.responsive.length&&null!==d.options.responsive){f=null;for(e in d.breakpoints)d.breakpoints.hasOwnProperty(e)&&(d.originalSettings.mobileFirst===!1?g<d.breakpoints[e]&&(f=d.breakpoints[e]):g>d.breakpoints[e]&&(f=d.breakpoints[e]));null!==f?null!==d.activeBreakpoint?(f!==d.activeBreakpoint||c)&&(d.activeBreakpoint=f,"unslick"===d.breakpointSettings[f]?d.unslick(f):(d.options=a.extend({},d.originalSettings,d.breakpointSettings[f]),b===!0&&(d.currentSlide=d.options.initialSlide),d.refresh(b)),h=f):(d.activeBreakpoint=f,"unslick"===d.breakpointSettings[f]?d.unslick(f):(d.options=a.extend({},d.originalSettings,d.breakpointSettings[f]),b===!0&&(d.currentSlide=d.options.initialSlide),d.refresh(b)),h=f):null!==d.activeBreakpoint&&(d.activeBreakpoint=null,d.options=d.originalSettings,b===!0&&(d.currentSlide=d.options.initialSlide),d.refresh(b),h=f),b||h===!1||d.$slider.trigger("breakpoint",[d,h])}},b.prototype.changeSlide=function(b,c){var f,g,h,d=this,e=a(b.target);switch(e.is("a")&&b.preventDefault(),e.is("li")||(e=e.closest("li")),h=d.slideCount%d.options.slidesToScroll!==0,f=h?0:(d.slideCount-d.currentSlide)%d.options.slidesToScroll,b.data.message){case"previous":g=0===f?d.options.slidesToScroll:d.options.slidesToShow-f,d.slideCount>d.options.slidesToShow&&d.slideHandler(d.currentSlide-g,!1,c);break;case"next":g=0===f?d.options.slidesToScroll:f,d.slideCount>d.options.slidesToShow&&d.slideHandler(d.currentSlide+g,!1,c);break;case"index":var i=0===b.data.index?0:b.data.index||e.index()*d.options.slidesToScroll;d.slideHandler(d.checkNavigable(i),!1,c),e.children().trigger("focus");break;default:return}},b.prototype.checkNavigable=function(a){var c,d,b=this;if(c=b.getNavigableIndexes(),d=0,a>c[c.length-1])a=c[c.length-1];else for(var e in c){if(a<c[e]){a=d;break}d=c[e]}return a},b.prototype.cleanUpEvents=function(){var b=this;b.options.dots&&null!==b.$dots&&(a("li",b.$dots).off("click.slick",b.changeSlide),b.options.pauseOnDotsHover===!0&&b.options.autoplay===!0&&a("li",b.$dots).off("mouseenter.slick",a.proxy(b.setPaused,b,!0)).off("mouseleave.slick",a.proxy(b.setPaused,b,!1))),b.options.arrows===!0&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow&&b.$prevArrow.off("click.slick",b.changeSlide),b.$nextArrow&&b.$nextArrow.off("click.slick",b.changeSlide)),b.$list.off("touchstart.slick mousedown.slick",b.swipeHandler),b.$list.off("touchmove.slick mousemove.slick",b.swipeHandler),b.$list.off("touchend.slick mouseup.slick",b.swipeHandler),b.$list.off("touchcancel.slick mouseleave.slick",b.swipeHandler),b.$list.off("click.slick",b.clickHandler),a(document).off(b.visibilityChange,b.visibility),b.$list.off("mouseenter.slick",a.proxy(b.setPaused,b,!0)),b.$list.off("mouseleave.slick",a.proxy(b.setPaused,b,!1)),b.options.accessibility===!0&&b.$list.off("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().off("click.slick",b.selectHandler),a(window).off("orientationchange.slick.slick-"+b.instanceUid,b.orientationChange),a(window).off("resize.slick.slick-"+b.instanceUid,b.resize),a("[draggable!=true]",b.$slideTrack).off("dragstart",b.preventDefault),a(window).off("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).off("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.cleanUpRows=function(){var b,a=this;a.options.rows>1&&(b=a.$slides.children().children(),b.removeAttr("style"),a.$slider.html(b))},b.prototype.clickHandler=function(a){var b=this;b.shouldClick===!1&&(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault())},b.prototype.destroy=function(b){var c=this;c.autoPlayClear(),c.touchObject={},c.cleanUpEvents(),a(".slick-cloned",c.$slider).detach(),c.$dots&&c.$dots.remove(),c.$prevArrow&&c.$prevArrow.length&&(c.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),c.htmlExpr.test(c.options.prevArrow)&&c.$prevArrow.remove()),c.$nextArrow&&c.$nextArrow.length&&(c.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),c.htmlExpr.test(c.options.nextArrow)&&c.$nextArrow.remove()),c.$slides&&(c.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){a(this).attr("style",a(this).data("originalStyling"))}),c.$slideTrack.children(this.options.slide).detach(),c.$slideTrack.detach(),c.$list.detach(),c.$slider.append(c.$slides)),c.cleanUpRows(),c.$slider.removeClass("slick-slider"),c.$slider.removeClass("slick-initialized"),c.unslicked=!0,b||c.$slider.trigger("destroy",[c])},b.prototype.disableTransition=function(a){var b=this,c={};c[b.transitionType]="",b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.fadeSlide=function(a,b){var c=this;c.cssTransitions===!1?(c.$slides.eq(a).css({zIndex:c.options.zIndex}),c.$slides.eq(a).animate({opacity:1},c.options.speed,c.options.easing,b)):(c.applyTransition(a),c.$slides.eq(a).css({opacity:1,zIndex:c.options.zIndex}),b&&setTimeout(function(){c.disableTransition(a),b.call()},c.options.speed))},b.prototype.fadeSlideOut=function(a){var b=this;b.cssTransitions===!1?b.$slides.eq(a).animate({opacity:0,zIndex:b.options.zIndex-2},b.options.speed,b.options.easing):(b.applyTransition(a),b.$slides.eq(a).css({opacity:0,zIndex:b.options.zIndex-2}))},b.prototype.filterSlides=b.prototype.slickFilter=function(a){var b=this;null!==a&&(b.$slidesCache=b.$slides,b.unload(),b.$slideTrack.children(this.options.slide).detach(),b.$slidesCache.filter(a).appendTo(b.$slideTrack),b.reinit())},b.prototype.getCurrent=b.prototype.slickCurrentSlide=function(){var a=this;return a.currentSlide},b.prototype.getDotCount=function(){var a=this,b=0,c=0,d=0;if(a.options.infinite===!0)for(;b<a.slideCount;)++d,b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;else if(a.options.centerMode===!0)d=a.slideCount;else for(;b<a.slideCount;)++d,b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;return d-1},b.prototype.getLeft=function(a){var c,d,f,b=this,e=0;return b.slideOffset=0,d=b.$slides.first().outerHeight(!0),b.options.infinite===!0?(b.slideCount>b.options.slidesToShow&&(b.slideOffset=b.slideWidth*b.options.slidesToShow*-1,e=d*b.options.slidesToShow*-1),b.slideCount%b.options.slidesToScroll!==0&&a+b.options.slidesToScroll>b.slideCount&&b.slideCount>b.options.slidesToShow&&(a>b.slideCount?(b.slideOffset=(b.options.slidesToShow-(a-b.slideCount))*b.slideWidth*-1,e=(b.options.slidesToShow-(a-b.slideCount))*d*-1):(b.slideOffset=b.slideCount%b.options.slidesToScroll*b.slideWidth*-1,e=b.slideCount%b.options.slidesToScroll*d*-1))):a+b.options.slidesToShow>b.slideCount&&(b.slideOffset=(a+b.options.slidesToShow-b.slideCount)*b.slideWidth,e=(a+b.options.slidesToShow-b.slideCount)*d),b.slideCount<=b.options.slidesToShow&&(b.slideOffset=0,e=0),b.options.centerMode===!0&&b.options.infinite===!0?b.slideOffset+=b.slideWidth*Math.floor(b.options.slidesToShow/2)-b.slideWidth:b.options.centerMode===!0&&(b.slideOffset=0,b.slideOffset+=b.slideWidth*Math.floor(b.options.slidesToShow/2)),c=b.options.vertical===!1?a*b.slideWidth*-1+b.slideOffset:a*d*-1+e,b.options.variableWidth===!0&&(f=b.slideCount<=b.options.slidesToShow||b.options.infinite===!1?b.$slideTrack.children(".slick-slide").eq(a):b.$slideTrack.children(".slick-slide").eq(a+b.options.slidesToShow),c=b.options.rtl===!0?f[0]?-1*(b.$slideTrack.width()-f[0].offsetLeft-f.width()):0:f[0]?-1*f[0].offsetLeft:0,b.options.centerMode===!0&&(f=b.slideCount<=b.options.slidesToShow||b.options.infinite===!1?b.$slideTrack.children(".slick-slide").eq(a):b.$slideTrack.children(".slick-slide").eq(a+b.options.slidesToShow+1),c=b.options.rtl===!0?f[0]?-1*(b.$slideTrack.width()-f[0].offsetLeft-f.width()):0:f[0]?-1*f[0].offsetLeft:0,c+=(b.$list.width()-f.outerWidth())/2)),c},b.prototype.getOption=b.prototype.slickGetOption=function(a){var b=this;return b.options[a]},b.prototype.getNavigableIndexes=function(){var e,a=this,b=0,c=0,d=[];for(a.options.infinite===!1?e=a.slideCount:(b=-1*a.options.slidesToScroll,c=-1*a.options.slidesToScroll,e=2*a.slideCount);e>b;)d.push(b),b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;return d},b.prototype.getSlick=function(){return this},b.prototype.getSlideCount=function(){var c,d,e,b=this;return e=b.options.centerMode===!0?b.slideWidth*Math.floor(b.options.slidesToShow/2):0,b.options.swipeToSlide===!0?(b.$slideTrack.find(".slick-slide").each(function(c,f){return f.offsetLeft-e+a(f).outerWidth()/2>-1*b.swipeLeft?(d=f,!1):void 0}),c=Math.abs(a(d).attr("data-slick-index")-b.currentSlide)||1):b.options.slidesToScroll},b.prototype.goTo=b.prototype.slickGoTo=function(a,b){var c=this;c.changeSlide({data:{message:"index",index:parseInt(a)}},b)},b.prototype.init=function(b){var c=this;a(c.$slider).hasClass("slick-initialized")||(a(c.$slider).addClass("slick-initialized"),c.buildRows(),c.buildOut(),c.setProps(),c.startLoad(),c.loadSlider(),c.initializeEvents(),c.updateArrows(),c.updateDots()),b&&c.$slider.trigger("init",[c]),c.options.accessibility===!0&&c.initADA()},b.prototype.initArrowEvents=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.on("click.slick",{message:"previous"},a.changeSlide),a.$nextArrow.on("click.slick",{message:"next"},a.changeSlide))},b.prototype.initDotEvents=function(){var b=this;b.options.dots===!0&&b.slideCount>b.options.slidesToShow&&a("li",b.$dots).on("click.slick",{message:"index"},b.changeSlide),b.options.dots===!0&&b.options.pauseOnDotsHover===!0&&b.options.autoplay===!0&&a("li",b.$dots).on("mouseenter.slick",a.proxy(b.setPaused,b,!0)).on("mouseleave.slick",a.proxy(b.setPaused,b,!1))},b.prototype.initializeEvents=function(){var b=this;b.initArrowEvents(),b.initDotEvents(),b.$list.on("touchstart.slick mousedown.slick",{action:"start"},b.swipeHandler),b.$list.on("touchmove.slick mousemove.slick",{action:"move"},b.swipeHandler),b.$list.on("touchend.slick mouseup.slick",{action:"end"},b.swipeHandler),b.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},b.swipeHandler),b.$list.on("click.slick",b.clickHandler),a(document).on(b.visibilityChange,a.proxy(b.visibility,b)),b.$list.on("mouseenter.slick",a.proxy(b.setPaused,b,!0)),b.$list.on("mouseleave.slick",a.proxy(b.setPaused,b,!1)),b.options.accessibility===!0&&b.$list.on("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),a(window).on("orientationchange.slick.slick-"+b.instanceUid,a.proxy(b.orientationChange,b)),a(window).on("resize.slick.slick-"+b.instanceUid,a.proxy(b.resize,b)),a("[draggable!=true]",b.$slideTrack).on("dragstart",b.preventDefault),a(window).on("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).on("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.initUI=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.show(),a.$nextArrow.show()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.show(),a.options.autoplay===!0&&a.autoPlay()},b.prototype.keyHandler=function(a){var b=this;a.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===a.keyCode&&b.options.accessibility===!0?b.changeSlide({data:{message:"previous"}}):39===a.keyCode&&b.options.accessibility===!0&&b.changeSlide({data:{message:"next"}}))},b.prototype.lazyLoad=function(){function g(b){a("img[data-lazy]",b).each(function(){var b=a(this),c=a(this).attr("data-lazy"),d=document.createElement("img");d.onload=function(){b.animate({opacity:0},100,function(){b.attr("src",c).animate({opacity:1},200,function(){b.removeAttr("data-lazy").removeClass("slick-loading")})})},d.src=c})}var c,d,e,f,b=this;b.options.centerMode===!0?b.options.infinite===!0?(e=b.currentSlide+(b.options.slidesToShow/2+1),f=e+b.options.slidesToShow+2):(e=Math.max(0,b.currentSlide-(b.options.slidesToShow/2+1)),f=2+(b.options.slidesToShow/2+1)+b.currentSlide):(e=b.options.infinite?b.options.slidesToShow+b.currentSlide:b.currentSlide,f=e+b.options.slidesToShow,b.options.fade===!0&&(e>0&&e--,f<=b.slideCount&&f++)),c=b.$slider.find(".slick-slide").slice(e,f),g(c),b.slideCount<=b.options.slidesToShow?(d=b.$slider.find(".slick-slide"),g(d)):b.currentSlide>=b.slideCount-b.options.slidesToShow?(d=b.$slider.find(".slick-cloned").slice(0,b.options.slidesToShow),g(d)):0===b.currentSlide&&(d=b.$slider.find(".slick-cloned").slice(-1*b.options.slidesToShow),g(d))},b.prototype.loadSlider=function(){var a=this;a.setPosition(),a.$slideTrack.css({opacity:1}),a.$slider.removeClass("slick-loading"),a.initUI(),"progressive"===a.options.lazyLoad&&a.progressiveLazyLoad()},b.prototype.next=b.prototype.slickNext=function(){var a=this;a.changeSlide({data:{message:"next"}})},b.prototype.orientationChange=function(){var a=this;a.checkResponsive(),a.setPosition()},b.prototype.pause=b.prototype.slickPause=function(){var a=this;a.autoPlayClear(),a.paused=!0},b.prototype.play=b.prototype.slickPlay=function(){var a=this;a.paused=!1,a.autoPlay()},b.prototype.postSlide=function(a){var b=this;b.$slider.trigger("afterChange",[b,a]),b.animating=!1,b.setPosition(),b.swipeLeft=null,b.options.autoplay===!0&&b.paused===!1&&b.autoPlay(),b.options.accessibility===!0&&b.initADA()},b.prototype.prev=b.prototype.slickPrev=function(){var a=this;a.changeSlide({data:{message:"previous"}})},b.prototype.preventDefault=function(a){a.preventDefault()},b.prototype.progressiveLazyLoad=function(){var c,d,b=this;c=a("img[data-lazy]",b.$slider).length,c>0&&(d=a("img[data-lazy]",b.$slider).first(),d.attr("src",null),d.attr("src",d.attr("data-lazy")).removeClass("slick-loading").load(function(){d.removeAttr("data-lazy"),b.progressiveLazyLoad(),b.options.adaptiveHeight===!0&&b.setPosition()}).error(function(){d.removeAttr("data-lazy"),b.progressiveLazyLoad()}))},b.prototype.refresh=function(b){var d,e,c=this;e=c.slideCount-c.options.slidesToShow,c.options.infinite||(c.slideCount<=c.options.slidesToShow?c.currentSlide=0:c.currentSlide>e&&(c.currentSlide=e)),d=c.currentSlide,c.destroy(!0),a.extend(c,c.initials,{currentSlide:d}),c.init(),b||c.changeSlide({data:{message:"index",index:d}},!1)},b.prototype.registerBreakpoints=function(){var c,d,e,b=this,f=b.options.responsive||null;if("array"===a.type(f)&&f.length){b.respondTo=b.options.respondTo||"window";for(c in f)if(e=b.breakpoints.length-1,d=f[c].breakpoint,f.hasOwnProperty(c)){for(;e>=0;)b.breakpoints[e]&&b.breakpoints[e]===d&&b.breakpoints.splice(e,1),e--;b.breakpoints.push(d),b.breakpointSettings[d]=f[c].settings}b.breakpoints.sort(function(a,c){return b.options.mobileFirst?a-c:c-a})}},b.prototype.reinit=function(){var b=this;b.$slides=b.$slideTrack.children(b.options.slide).addClass("slick-slide"),b.slideCount=b.$slides.length,b.currentSlide>=b.slideCount&&0!==b.currentSlide&&(b.currentSlide=b.currentSlide-b.options.slidesToScroll),b.slideCount<=b.options.slidesToShow&&(b.currentSlide=0),b.registerBreakpoints(),b.setProps(),b.setupInfinite(),b.buildArrows(),b.updateArrows(),b.initArrowEvents(),b.buildDots(),b.updateDots(),b.initDotEvents(),b.checkResponsive(!1,!0),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),b.setSlideClasses(0),b.setPosition(),b.$slider.trigger("reInit",[b]),b.options.autoplay===!0&&b.focusHandler()},b.prototype.resize=function(){var b=this;a(window).width()!==b.windowWidth&&(clearTimeout(b.windowDelay),b.windowDelay=window.setTimeout(function(){b.windowWidth=a(window).width(),b.checkResponsive(),b.unslicked||b.setPosition()},50))},b.prototype.removeSlide=b.prototype.slickRemove=function(a,b,c){var d=this;return"boolean"==typeof a?(b=a,a=b===!0?0:d.slideCount-1):a=b===!0?--a:a,d.slideCount<1||0>a||a>d.slideCount-1?!1:(d.unload(),c===!0?d.$slideTrack.children().remove():d.$slideTrack.children(this.options.slide).eq(a).remove(),d.$slides=d.$slideTrack.children(this.options.slide),d.$slideTrack.children(this.options.slide).detach(),d.$slideTrack.append(d.$slides),d.$slidesCache=d.$slides,void d.reinit())},b.prototype.setCSS=function(a){var d,e,b=this,c={};b.options.rtl===!0&&(a=-a),d="left"==b.positionProp?Math.ceil(a)+"px":"0px",e="top"==b.positionProp?Math.ceil(a)+"px":"0px",c[b.positionProp]=a,b.transformsEnabled===!1?b.$slideTrack.css(c):(c={},b.cssTransitions===!1?(c[b.animType]="translate("+d+", "+e+")",b.$slideTrack.css(c)):(c[b.animType]="translate3d("+d+", "+e+", 0px)",b.$slideTrack.css(c)))},b.prototype.setDimensions=function(){var a=this;a.options.vertical===!1?a.options.centerMode===!0&&a.$list.css({padding:"0px "+a.options.centerPadding}):(a.$list.height(a.$slides.first().outerHeight(!0)*a.options.slidesToShow),a.options.centerMode===!0&&a.$list.css({padding:a.options.centerPadding+" 0px"})),a.listWidth=a.$list.width(),a.listHeight=a.$list.height(),a.options.vertical===!1&&a.options.variableWidth===!1?(a.slideWidth=Math.ceil(a.listWidth/a.options.slidesToShow),a.$slideTrack.width(Math.ceil(a.slideWidth*a.$slideTrack.children(".slick-slide").length))):a.options.variableWidth===!0?a.$slideTrack.width(5e3*a.slideCount):(a.slideWidth=Math.ceil(a.listWidth),a.$slideTrack.height(Math.ceil(a.$slides.first().outerHeight(!0)*a.$slideTrack.children(".slick-slide").length)));var b=a.$slides.first().outerWidth(!0)-a.$slides.first().width();a.options.variableWidth===!1&&a.$slideTrack.children(".slick-slide").width(a.slideWidth-b)},b.prototype.setFade=function(){var c,b=this;b.$slides.each(function(d,e){c=b.slideWidth*d*-1,b.options.rtl===!0?a(e).css({position:"relative",right:c,top:0,zIndex:b.options.zIndex-2,opacity:0}):a(e).css({position:"relative",left:c,top:0,zIndex:b.options.zIndex-2,opacity:0})}),b.$slides.eq(b.currentSlide).css({zIndex:b.options.zIndex-1,opacity:1})},b.prototype.setHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.css("height",b)}},b.prototype.setOption=b.prototype.slickSetOption=function(b,c,d){var f,g,e=this;if("responsive"===b&&"array"===a.type(c))for(g in c)if("array"!==a.type(e.options.responsive))e.options.responsive=[c[g]];else{for(f=e.options.responsive.length-1;f>=0;)e.options.responsive[f].breakpoint===c[g].breakpoint&&e.options.responsive.splice(f,1),f--;e.options.responsive.push(c[g])}else e.options[b]=c;d===!0&&(e.unload(),e.reinit())},b.prototype.setPosition=function(){var a=this;a.setDimensions(),a.setHeight(),a.options.fade===!1?a.setCSS(a.getLeft(a.currentSlide)):a.setFade(),a.$slider.trigger("setPosition",[a])},b.prototype.setProps=function(){var a=this,b=document.body.style;a.positionProp=a.options.vertical===!0?"top":"left","top"===a.positionProp?a.$slider.addClass("slick-vertical"):a.$slider.removeClass("slick-vertical"),(void 0!==b.WebkitTransition||void 0!==b.MozTransition||void 0!==b.msTransition)&&a.options.useCSS===!0&&(a.cssTransitions=!0),a.options.fade&&("number"==typeof a.options.zIndex?a.options.zIndex<3&&(a.options.zIndex=3):a.options.zIndex=a.defaults.zIndex),void 0!==b.OTransform&&(a.animType="OTransform",a.transformType="-o-transform",a.transitionType="OTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.MozTransform&&(a.animType="MozTransform",a.transformType="-moz-transform",a.transitionType="MozTransition",void 0===b.perspectiveProperty&&void 0===b.MozPerspective&&(a.animType=!1)),void 0!==b.webkitTransform&&(a.animType="webkitTransform",a.transformType="-webkit-transform",a.transitionType="webkitTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.msTransform&&(a.animType="msTransform",a.transformType="-ms-transform",a.transitionType="msTransition",void 0===b.msTransform&&(a.animType=!1)),void 0!==b.transform&&a.animType!==!1&&(a.animType="transform",a.transformType="transform",a.transitionType="transition"),a.transformsEnabled=a.options.useTransform&&null!==a.animType&&a.animType!==!1},b.prototype.setSlideClasses=function(a){var c,d,e,f,b=this;d=b.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),b.$slides.eq(a).addClass("slick-current"),b.options.centerMode===!0?(c=Math.floor(b.options.slidesToShow/2),b.options.infinite===!0&&(a>=c&&a<=b.slideCount-1-c?b.$slides.slice(a-c,a+c+1).addClass("slick-active").attr("aria-hidden","false"):(e=b.options.slidesToShow+a,d.slice(e-c+1,e+c+2).addClass("slick-active").attr("aria-hidden","false")),0===a?d.eq(d.length-1-b.options.slidesToShow).addClass("slick-center"):a===b.slideCount-1&&d.eq(b.options.slidesToShow).addClass("slick-center")),b.$slides.eq(a).addClass("slick-center")):a>=0&&a<=b.slideCount-b.options.slidesToShow?b.$slides.slice(a,a+b.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):d.length<=b.options.slidesToShow?d.addClass("slick-active").attr("aria-hidden","false"):(f=b.slideCount%b.options.slidesToShow,e=b.options.infinite===!0?b.options.slidesToShow+a:a,b.options.slidesToShow==b.options.slidesToScroll&&b.slideCount-a<b.options.slidesToShow?d.slice(e-(b.options.slidesToShow-f),e+f).addClass("slick-active").attr("aria-hidden","false"):d.slice(e,e+b.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===b.options.lazyLoad&&b.lazyLoad()},b.prototype.setupInfinite=function(){var c,d,e,b=this;if(b.options.fade===!0&&(b.options.centerMode=!1),b.options.infinite===!0&&b.options.fade===!1&&(d=null,b.slideCount>b.options.slidesToShow)){for(e=b.options.centerMode===!0?b.options.slidesToShow+1:b.options.slidesToShow,c=b.slideCount;c>b.slideCount-e;c-=1)d=c-1,a(b.$slides[d]).clone(!0).attr("id","").attr("data-slick-index",d-b.slideCount).prependTo(b.$slideTrack).addClass("slick-cloned");for(c=0;e>c;c+=1)d=c,a(b.$slides[d]).clone(!0).attr("id","").attr("data-slick-index",d+b.slideCount).appendTo(b.$slideTrack).addClass("slick-cloned");b.$slideTrack.find(".slick-cloned").find("[id]").each(function(){a(this).attr("id","")})}},b.prototype.setPaused=function(a){var b=this;b.options.autoplay===!0&&b.options.pauseOnHover===!0&&(b.paused=a,a?b.autoPlayClear():b.autoPlay())},b.prototype.selectHandler=function(b){var c=this,d=a(b.target).is(".slick-slide")?a(b.target):a(b.target).parents(".slick-slide"),e=parseInt(d.attr("data-slick-index"));return e||(e=0),c.slideCount<=c.options.slidesToShow?(c.setSlideClasses(e),void c.asNavFor(e)):void c.slideHandler(e)},b.prototype.slideHandler=function(a,b,c){var d,e,f,g,h=null,i=this;return b=b||!1,i.animating===!0&&i.options.waitForAnimate===!0||i.options.fade===!0&&i.currentSlide===a||i.slideCount<=i.options.slidesToShow?void 0:(b===!1&&i.asNavFor(a),d=a,h=i.getLeft(d),g=i.getLeft(i.currentSlide),i.currentLeft=null===i.swipeLeft?g:i.swipeLeft,i.options.infinite===!1&&i.options.centerMode===!1&&(0>a||a>i.getDotCount()*i.options.slidesToScroll)?void(i.options.fade===!1&&(d=i.currentSlide,c!==!0?i.animateSlide(g,function(){i.postSlide(d);
}):i.postSlide(d))):i.options.infinite===!1&&i.options.centerMode===!0&&(0>a||a>i.slideCount-i.options.slidesToScroll)?void(i.options.fade===!1&&(d=i.currentSlide,c!==!0?i.animateSlide(g,function(){i.postSlide(d)}):i.postSlide(d))):(i.options.autoplay===!0&&clearInterval(i.autoPlayTimer),e=0>d?i.slideCount%i.options.slidesToScroll!==0?i.slideCount-i.slideCount%i.options.slidesToScroll:i.slideCount+d:d>=i.slideCount?i.slideCount%i.options.slidesToScroll!==0?0:d-i.slideCount:d,i.animating=!0,i.$slider.trigger("beforeChange",[i,i.currentSlide,e]),f=i.currentSlide,i.currentSlide=e,i.setSlideClasses(i.currentSlide),i.updateDots(),i.updateArrows(),i.options.fade===!0?(c!==!0?(i.fadeSlideOut(f),i.fadeSlide(e,function(){i.postSlide(e)})):i.postSlide(e),void i.animateHeight()):void(c!==!0?i.animateSlide(h,function(){i.postSlide(e)}):i.postSlide(e))))},b.prototype.startLoad=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.hide(),a.$nextArrow.hide()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.hide(),a.$slider.addClass("slick-loading")},b.prototype.swipeDirection=function(){var a,b,c,d,e=this;return a=e.touchObject.startX-e.touchObject.curX,b=e.touchObject.startY-e.touchObject.curY,c=Math.atan2(b,a),d=Math.round(180*c/Math.PI),0>d&&(d=360-Math.abs(d)),45>=d&&d>=0?e.options.rtl===!1?"left":"right":360>=d&&d>=315?e.options.rtl===!1?"left":"right":d>=135&&225>=d?e.options.rtl===!1?"right":"left":e.options.verticalSwiping===!0?d>=35&&135>=d?"left":"right":"vertical"},b.prototype.swipeEnd=function(a){var c,b=this;if(b.dragging=!1,b.shouldClick=b.touchObject.swipeLength>10?!1:!0,void 0===b.touchObject.curX)return!1;if(b.touchObject.edgeHit===!0&&b.$slider.trigger("edge",[b,b.swipeDirection()]),b.touchObject.swipeLength>=b.touchObject.minSwipe)switch(b.swipeDirection()){case"left":c=b.options.swipeToSlide?b.checkNavigable(b.currentSlide+b.getSlideCount()):b.currentSlide+b.getSlideCount(),b.slideHandler(c),b.currentDirection=0,b.touchObject={},b.$slider.trigger("swipe",[b,"left"]);break;case"right":c=b.options.swipeToSlide?b.checkNavigable(b.currentSlide-b.getSlideCount()):b.currentSlide-b.getSlideCount(),b.slideHandler(c),b.currentDirection=1,b.touchObject={},b.$slider.trigger("swipe",[b,"right"])}else b.touchObject.startX!==b.touchObject.curX&&(b.slideHandler(b.currentSlide),b.touchObject={})},b.prototype.swipeHandler=function(a){var b=this;if(!(b.options.swipe===!1||"ontouchend"in document&&b.options.swipe===!1||b.options.draggable===!1&&-1!==a.type.indexOf("mouse")))switch(b.touchObject.fingerCount=a.originalEvent&&void 0!==a.originalEvent.touches?a.originalEvent.touches.length:1,b.touchObject.minSwipe=b.listWidth/b.options.touchThreshold,b.options.verticalSwiping===!0&&(b.touchObject.minSwipe=b.listHeight/b.options.touchThreshold),a.data.action){case"start":b.swipeStart(a);break;case"move":b.swipeMove(a);break;case"end":b.swipeEnd(a)}},b.prototype.swipeMove=function(a){var d,e,f,g,h,b=this;return h=void 0!==a.originalEvent?a.originalEvent.touches:null,!b.dragging||h&&1!==h.length?!1:(d=b.getLeft(b.currentSlide),b.touchObject.curX=void 0!==h?h[0].pageX:a.clientX,b.touchObject.curY=void 0!==h?h[0].pageY:a.clientY,b.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(b.touchObject.curX-b.touchObject.startX,2))),b.options.verticalSwiping===!0&&(b.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(b.touchObject.curY-b.touchObject.startY,2)))),e=b.swipeDirection(),"vertical"!==e?(void 0!==a.originalEvent&&b.touchObject.swipeLength>4&&a.preventDefault(),g=(b.options.rtl===!1?1:-1)*(b.touchObject.curX>b.touchObject.startX?1:-1),b.options.verticalSwiping===!0&&(g=b.touchObject.curY>b.touchObject.startY?1:-1),f=b.touchObject.swipeLength,b.touchObject.edgeHit=!1,b.options.infinite===!1&&(0===b.currentSlide&&"right"===e||b.currentSlide>=b.getDotCount()&&"left"===e)&&(f=b.touchObject.swipeLength*b.options.edgeFriction,b.touchObject.edgeHit=!0),b.options.vertical===!1?b.swipeLeft=d+f*g:b.swipeLeft=d+f*(b.$list.height()/b.listWidth)*g,b.options.verticalSwiping===!0&&(b.swipeLeft=d+f*g),b.options.fade===!0||b.options.touchMove===!1?!1:b.animating===!0?(b.swipeLeft=null,!1):void b.setCSS(b.swipeLeft)):void 0)},b.prototype.swipeStart=function(a){var c,b=this;return 1!==b.touchObject.fingerCount||b.slideCount<=b.options.slidesToShow?(b.touchObject={},!1):(void 0!==a.originalEvent&&void 0!==a.originalEvent.touches&&(c=a.originalEvent.touches[0]),b.touchObject.startX=b.touchObject.curX=void 0!==c?c.pageX:a.clientX,b.touchObject.startY=b.touchObject.curY=void 0!==c?c.pageY:a.clientY,void(b.dragging=!0))},b.prototype.unfilterSlides=b.prototype.slickUnfilter=function(){var a=this;null!==a.$slidesCache&&(a.unload(),a.$slideTrack.children(this.options.slide).detach(),a.$slidesCache.appendTo(a.$slideTrack),a.reinit())},b.prototype.unload=function(){var b=this;a(".slick-cloned",b.$slider).remove(),b.$dots&&b.$dots.remove(),b.$prevArrow&&b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.remove(),b.$nextArrow&&b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.remove(),b.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},b.prototype.unslick=function(a){var b=this;b.$slider.trigger("unslick",[b,a]),b.destroy()},b.prototype.updateArrows=function(){var b,a=this;b=Math.floor(a.options.slidesToShow/2),a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&!a.options.infinite&&(a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),a.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===a.currentSlide?(a.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):a.currentSlide>=a.slideCount-a.options.slidesToShow&&a.options.centerMode===!1?(a.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):a.currentSlide>=a.slideCount-1&&a.options.centerMode===!0&&(a.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},b.prototype.updateDots=function(){var a=this;null!==a.$dots&&(a.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),a.$dots.find("li").eq(Math.floor(a.currentSlide/a.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},b.prototype.visibility=function(){var a=this;document[a.hidden]?(a.paused=!0,a.autoPlayClear()):a.options.autoplay===!0&&(a.paused=!1,a.autoPlay())},b.prototype.initADA=function(){var b=this;b.$slides.add(b.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),b.$slideTrack.attr("role","listbox"),b.$slides.not(b.$slideTrack.find(".slick-cloned")).each(function(c){a(this).attr({role:"option","aria-describedby":"slick-slide"+b.instanceUid+c})}),null!==b.$dots&&b.$dots.attr("role","tablist").find("li").each(function(c){a(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+b.instanceUid+c,id:"slick-slide"+b.instanceUid+c})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),b.activateADA()},b.prototype.activateADA=function(){var a=this;a.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},b.prototype.focusHandler=function(){var b=this;b.$slider.on("focus.slick blur.slick","*",function(c){c.stopImmediatePropagation();var d=a(this);setTimeout(function(){b.isPlay&&(d.is(":focus")?(b.autoPlayClear(),b.paused=!0):(b.paused=!1,b.autoPlay()))},0)})},a.fn.slick=function(){var f,g,a=this,c=arguments[0],d=Array.prototype.slice.call(arguments,1),e=a.length;for(f=0;e>f;f++)if("object"==typeof c||"undefined"==typeof c?a[f].slick=new b(a[f],c):g=a[f].slick[c].apply(a[f].slick,d),"undefined"!=typeof g)return g;return a}});


/*!---- frame-manager-----*/
/*! iFrame Resizer (iframeSizer.min.js ) - v2.6.2 - 2014-10-11
 *  Desc: Force cross domain iframes to size to content.
 *  Requires: iframeResizer.contentWindow.min.js to be loaded into the target frame.
 *  Copyright: (c) 2014 David J. Bradshaw - dave@bradshaw.net
 *  License: MIT
 *	Requires: iframeResizer_child.js on I-framed page.
 */

!function(){"use strict";function a(a,b,c){"addEventListener"in window?a.addEventListener(b,c,!1):"attachEvent"in window&&a.attachEvent("on"+b,c)}function b(){var a,b=["moz","webkit","o","ms"];for(a=0;a<b.length&&!w;a+=1)w=window[b[a]+"RequestAnimationFrame"];w||c(" RequestAnimationFrame not supported")}function c(a){y.log&&"object"==typeof console&&console.log(s+"[Host page"+u+"]"+a)}function d(a){function b(){function a(){h(z),f(),y.resizedCallback(z)}i(a,z,"resetPage")}function d(a){var b=a.id;c(" Removing iFrame: "+b),a.parentNode.removeChild(a),y.closedCallback(b),c(" --")}function e(){var a=x.substr(t).split(":");return{iframe:document.getElementById(a[0]),id:a[0],height:a[1],width:a[2],type:a[3]}}function j(a){var b=Number(y["max"+a]),d=Number(y["min"+a]),e=a.toLowerCase(),f=Number(z[e]);if(d>b)throw new Error("Value for min"+a+" can not be greater than max"+a);c(" Checking "+e+" is in range "+d+"-"+b),d>f&&(f=d,c(" Set "+e+" to min value")),f>b&&(f=b,c(" Set "+e+" to max value")),z[e]=""+f}function k(){var b=a.origin,d=z.iframe.src.split("/").slice(0,3).join("/");if(y.checkOrigin&&(c(" Checking connection is from: "+d),""+b!="null"&&b!==d))throw new Error("Unexpected message received from: "+b+" for "+z.iframe.id+". Message was: "+a.data+". This error can be disabled by adding the checkOrigin: false option.");return!0}function l(){return s===(""+x).substr(0,t)}function m(){var a=z.type in{"true":1,"false":1};return a&&c(" Ignoring init message from meta parent page"),a}function n(){var a=x.substr(x.indexOf(":")+r+6);c(" MessageCallback passed: {iframe: "+z.iframe.id+", message: "+a+"}"),y.messageCallback({iframe:z.iframe,message:a}),c(" --")}function o(){if(null===z.iframe)throw new Error("iFrame ("+z.id+") does not exist on "+u);return!0}function q(){c(" Reposition requested from iFrame"),v={x:z.width,y:z.height},f()}function w(){switch(z.type){case"close":d(z.iframe),y.resizedCallback(z);break;case"message":n();break;case"scrollTo":q();break;case"reset":g(z);break;case"init":b(),y.initCallback(z.iframe);break;default:b()}}var x=a.data,z={};l()&&(c(" Received: "+x),z=e(),j("Height"),j("Width"),!m()&&o()&&k()&&(w(),p=!1))}function e(){null===v&&(v={x:void 0!==window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop},c(" Get position: "+v.x+","+v.y))}function f(){null!==v&&(window.scrollTo(v.x,v.y),c(" Set position: "+v.x+","+v.y),v=null)}function g(a){function b(){h(a),j("reset","reset",a.iframe)}c(" Size reset requested by "+("init"===a.type?"host page":"iFrame")),e(),i(b,a,"init")}function h(a){function b(b){a.iframe.style[b]=a[b]+"px",c(" IFrame ("+a.iframe.id+") "+b+" set to "+a[b]+"px")}y.sizeHeight&&b("height"),y.sizeWidth&&b("width")}function i(a,b,d){d!==b.type&&w?(c(" Requesting animation frame"),w(a)):a()}function j(a,b,d){c("["+a+"] Sending msg to iframe ("+b+")"),d.contentWindow.postMessage(s+b,"*")}function k(){function b(){function a(a){1/0!==y[a]&&0!==y[a]&&(k.style[a]=y[a]+"px",c(" Set "+a+" = "+y[a]+"px"))}a("maxHeight"),a("minHeight"),a("maxWidth"),a("minWidth")}function d(a){return""===a&&(k.id=a="iFrameResizer"+o++,c(" Added missing iframe ID: "+a+" ("+k.src+")")),a}function e(){c(" IFrame scrolling "+(y.scrolling?"enabled":"disabled")+" for "+l),k.style.overflow=!1===y.scrolling?"hidden":"auto",k.scrolling=!1===y.scrolling?"no":"yes"}function f(){("number"==typeof y.bodyMargin||"0"===y.bodyMargin)&&(y.bodyMarginV1=y.bodyMargin,y.bodyMargin=""+y.bodyMargin+"px")}function h(){return l+":"+y.bodyMarginV1+":"+y.sizeWidth+":"+y.log+":"+y.interval+":"+y.enablePublicMethods+":"+y.autoResize+":"+y.bodyMargin+":"+y.heightCalculationMethod+":"+y.bodyBackground+":"+y.bodyPadding+":"+y.tolerance}function i(b){a(k,"load",function(){var a=p;j("iFrame.onload",b,k),!a&&y.heightCalculationMethod in x&&g({iframe:k,height:0,width:0,type:"init"})}),j("init",b,k)}var k=this,l=d(k.id);e(),b(),f(),i(h())}function l(a){if("object"!=typeof a)throw new TypeError("Options is not an object.")}function m(){function a(a){if("IFRAME"!==a.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+a.tagName+">.");k.call(a)}function b(a){a=a||{},l(a);for(var b in z)z.hasOwnProperty(b)&&(y[b]=a.hasOwnProperty(b)?a[b]:z[b])}return function(c,d){b(c),Array.prototype.forEach.call(document.querySelectorAll(d||"iframe"),a)}}function n(a){a.fn.iFrameResize=function(b){return b=b||{},l(b),y=a.extend({},z,b),this.filter("iframe").each(k).end()}}var o=0,p=!0,q="message",r=q.length,s="[iFrameSizer]",t=s.length,u="",v=null,w=window.requestAnimationFrame,x={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},y={},z={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,enablePublicMethods:!1,heightCalculationMethod:"offset",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,closedCallback:function(){},initCallback:function(){},messageCallback:function(){},resizedCallback:function(){}};b(),a(window,"message",d),"jQuery"in window&&n($j),"function"==typeof define&&define.amd?define(function(){return m()}):window.iFrameResize=m()}();

if (!Array.prototype.forEach){
    Array.prototype.forEach = function(fun /*, thisArg */){
        "use strict";
        if (this === void 0 || this === null || typeof fun !== "function") throw new TypeError();

        var
            t = Object(this),
            len = t.length >>> 0,
            thisArg = arguments.length >= 2 ? arguments[1] : void 0;

        for (var i = 0; i < len; i++)
            if (i in t)
                fun.call(thisArg, t[i], i, t);
    };
}


$j(document).ready(function(){
	$j('iframe').attr('allowtransparency','true').attr('frameborder','0');
    $j('iframe.responsive').iFrameResize({log:false});
});

$j(window).resize(function(){
    if ($j("iframe.responsive").length > 0) {
    	$j("iframe.responsive").each(function(){
        $j(this).css("width", $j(this).parent('div').width() + "px");
        });
    }
});
/*!---- main-----*/
$j(document).ready(function(){

//=== Mega Menu JS Starts
var scroll = $j(window).scrollTop();
if(scroll > 0){
$j('header').addClass('nav--sticky').removeClass('nav--unsticky');
$j('header').removeClass('nav--up').addClass('nav--down');
}
  var didScroll;
  var lastScrollTop = 0;
  var delta = 5;
  var navbarHeight = $j('header').outerHeight();
  $j(window).scroll(function(event) {
    didScroll = true;
  });
  setInterval(function() {
    if(didScroll) {
      hasScrolled();
      didScroll = false;
    }
  },0);
  function hasScrolled() {
    var st = $j(this).scrollTop();
    
    var windowHeight = $j(window).height();
    // Make sure they scroll more than delta
    if(Math.abs(lastScrollTop - st) <= delta) return;
    if(st >=40) {
      $j('header').removeClass('nav--unsticky').addClass('nav--sticky');
    }
    else {
      $j('header').removeClass('nav--sticky').addClass('nav--unsticky');
    }
    if(st > lastScrollTop && st > navbarHeight) {
      $j('header').removeClass('nav--down').addClass('nav--up');
    }
    else {
      if(st + $j(window).height() < $j(document).height()) {
        $j('header').removeClass('nav--up').addClass('nav--down');
      }
    }
    lastScrollTop = st;
  }
//=== Mega Menu JS Ends

$j(".main_content_wrapper > section").each(function(){
	if($j(this).hasClass("backgroud-with-content-module-wrapper")){
		$j("body").addClass("noScroll");
    }
});

});
/*!---- main-2-----*/
$j( document ).ready(function() { 

  /*--- error page redirection and counter starts --------*/
  if ($j('body').attr('id') == 'ip3-error-page' && !$j('body').hasClass('ip3-edit')) {
    var counter_value = parseInt($j('.counter').html());
    var cnt = setInterval(function() {
      counter_value--;
      if (counter_value < 10) {
        $j('.counter').html('0' + counter_value);
      } else {
        $j('.counter').html(counter_value);
      }
      if (counter_value <= 0) {
        window.location.href = window.location.protocol + '//' + window.location.hostname;
        clearInterval(cnt);
      }
    }, 1000);
    
  }
  
  /*--- error page redirection and counter ends --------*/
/*TEST CACHING ISSUE JS*/
/*TEST CACHING ISSUE JS REGENRATE ISSUE*/



/*TEST CACHING ISSUE JS REGENRATE ISSUE 3333333333333333333333333333333333*/
 
  $j("footer").append('<a href="#MainForm" id="auto-top-link"><span class="icon-arrow-right"></span><span class="invisible">Back to top</span></a>');
  $j('#auto-top-link').topLink({
    min: 400,
    fadeSpeed: 500
  });
  
  //smoothscroll
  $j('#auto-top-link').click(function (e) {
    e.preventDefault();
    //$j.scrollTo(0, 300);
    $j('html,body').animate({scrollTop:0},300);
  });
  
  
  
    $j("#Top").click(function (){
      $j('html, body').animate({
        scrollTop: $j(".intro_copy_wrapper").offset().top +70
      }, 2000);
    });
    
    
  $j("a.media-link,a.media-links").each(function() {
    var tmpTxt = $j(this).attr("title").split(",");
    if (tmpTxt.length > 1) {
      tmpTxt[0] = tmpTxt[0].toUpperCase();
    }
    $j(this).attr("title", tmpTxt.join());
  });
  
  $j(".navigation_wrapper > .nav_level_1 .nav_list_level_1.level1 > a, .navigation_wrapper > .nav_level_1 .nav_list_level_1.level1 .nav_middle_section a").each(function(){
    var chkThisUrl = $j(this).attr('href');
    var chkPageUrl=$j("#PageLevel").data("url");
    if(chkPageUrl.indexOf(chkThisUrl) != -1){
      $j(this).addClass("current");
    }
  });
  
  $j(".nav_right_section").each(function(){
		if($j(this).children().length === 0){
			$j(this).hide();
		}
  });
  
  $j(".bottom-signpost-wrapper .column3 .col-item").removeClass("col-xl-3");
  //$j('.theClassThatsThereNow').addClass('col-xl4').removeClass('theClassThatsTherenow');
  $j('.content-slider-wrapper img').each(function() {
    var $jimg = $j(this);
    var imgURL = $jimg.attr('src');
    $j.get(imgURL, function(data) {
      // Get the SVG tag, ignore the rest
      var $svg = $j(data).find('svg');
      // Replace image with new SVG
      $jimg.replaceWith($svg);
    });
  });
  $j(".search_button_trigger span").on("click",function(e) {
    document.getElementById("searchButton").click();
  });
  $j(".toggleUpperHeader").click(function(){
    var getId = $j(this).attr('data-id');
    if($j(this).hasClass("active")){
      $j(this).removeClass("active");
      $j(".upperHeader#"+getId).removeClass("activated");
      $j("header").removeClass("active");
      $j("html").removeClass("mm-blocking");
    }
    else{
      $j(".toggleUpperHeader").removeClass("active");
      $j(".upperHeader").removeClass("activated");
      $j(this).addClass("active");
      $j(".upperHeader#"+getId).addClass("activated");
      $j("header").addClass("active");
      $j(".upperHeader#"+getId+" .closeUpperHeader").focus();
      $j("html").addClass("mm-blocking");
    }
    $j("header").trigger('heightChange');
  });
  $j(".closeUpperHeader").click(function(){
    var getID = $j(this).parents(".upperHeader").attr("id");
    $j(".toggleUpperHeader").removeClass("active");
    $j(".upperHeader").removeClass("activated");
    $j("header").removeClass("active");
    $j("html").removeClass("mm-blocking");
    $j(".toggleUpperHeader[data-id="+getID+"]").focus();
    
  });
  
  
  function backgroudwithcontent() {
    $j(".backgroud-with-content-module-wrapper .background-wrapper").width($j(window).width());
  }
  backgroudwithcontent();
  
  $j(".newsmediatab li a,.news-and-media-async .regularCta").on("click",function(){
    if($j(this).hasClass("active")){
      $j(this).removeClass("active");
      $j(this).addClass("active");
    }
    else{
      $j(".newsmediatab li a").removeClass("active");
      $j(this).addClass("active");
    }
    var dataurl = $j(this).attr('data-url');
    $j.get("/investors/news/press-releases/"+dataurl+"?async=1", function( data) {
      $j('.news-and-media-landing').html($j(data).html());
    });
    if($j(window).width() < 767){
      
      $j(".newsmediatab ul").slideUp();
    }
    
  });
  $j(".newsmediatab li:nth-child(2) a").trigger("click");
  
  
  $j(".newsmediatab .tabsDropDown").text($j(".newsmediatab li a.active").text());
  $j(".newsmediatab .tabsDropDown").on("click", function(){  
    if($j(".yeartab ul").is(":visible")){
      $j(this).removeClass("active");
      $j(this).next().slideUp();}
    
    else {
      $j(this).addClass("active");
      $j(this).next().slideDown();    
    }    
  });
  $j(document).on("click",".news-async-link",function(){
    var dataasyncpage = $j(this).attr('data-page');
    $j.get(dataasyncpage, function( data) {
      $j('.news-and-media-async').html($j(data).html());
      $j('.main_content_wrapper table:not(".inv-responsive")').each(function(){
        if($j(this).parents('div.scroll-table-container').length < 1){
          $j(this).wrap('<div class="scroll-table-container"></div>');
        }
      });
    });    
  });
  
  $j(document).on("click",".news-and-media-async .regularCta",function(){
    var dataasyncurl = $j(this).attr('data-url');
    var dataArr = dataasyncurl.split('?');
    var dataArrGetYear = dataArr[0].split('press-releases/');
    localStorage.setItem("dataArrGetYearTab",dataArrGetYear[1]);
    location.reload();
  });
  var selectedTab = localStorage.getItem('dataArrGetYearTab');
  if (selectedTab) {
    $j(".newsmediatab li a[data-url="+selectedTab+"]").trigger("click");
  }
  localStorage.clear();
  if($j(".isSlider").length > 0)
	{
		$j(".isSlider").slick({
    infinite: true,
  slidesToShow: 3,
  slidesToScroll: 1,
  responsive: [
    {
      breakpoint: 1024,
      settings: {
        slidesToShow: 2,
        slidesToScroll: 1,
        infinite: true,
        dots: false
      }
    },
    {
      breakpoint: 600,
      settings: {
        slidesToShow: 2,
        slidesToScroll: 1,
		 dots: false
      }
    },
    {
      breakpoint: 480,
      settings: {
        slidesToShow: 1,
        slidesToScroll: 1,
		 dots: false
      }
    }
  ]
  });
	}
  
  $j(".landing-banner").slick({
    infinite: true,
    arrows: false,
    fade: true,
    dots: false,
    //  fade: true,
    autoplay: false,
    speed: 800,
    slidesToShow: 1,
    slidesToScroll: 1,
    asNavFor: '.landing-banner-contant'
  });
  $j('.landing-banner-contant').slick({
    infinite: true,
    arrows: false,
    dots: false,
    fade: true,
    autoplay: false,
    accessibility: true,
    speed: 800, 
    slidesToShow: 1,
    slidesToScroll: 1,
    asNavFor: '.landing-banner'
  });
  
  //ticking machine
  var percentTime;
  var tick;
  var time = 0.1;
  var progressBarIndex = 0;
  
  $j('.progressBarContainer .progressBar').each(function(index) {
    var progress = "<div class='inProgress inProgress" + index + "'></div>";
    $j(this).html(progress);
    
  });
  
  function startProgressbar() {
    resetProgressbar();
    percentTime = 0;
    tick = setInterval(interval, 10);
  }
  
  function interval() {
    if (($j('.landing-banner .slick-track div[data-slick-index="' + progressBarIndex + '"]').attr("aria-hidden")) === "true") {
      progressBarIndex = $j('.landing-banner .slick-track div[aria-hidden="false"]').data("slickIndex");
      startProgressbar();
    } else {
      percentTime += 1 / (time + 5);
      $j('.inProgress' + progressBarIndex).css({
        width: percentTime + "%"
      });
      $j(".nav-title").removeClass("active");
      $j('.inProgress' + progressBarIndex).parent().prev().addClass("active");
      if (percentTime >= 100) {
        $j('.single-item').slick('slickNext');
        progressBarIndex++;
        if (progressBarIndex > 2) {
          progressBarIndex = 0;
        }
        startProgressbar();
      }
    }
  }
  
  function resetProgressbar() {
    $j('.inProgress').css({
      width: 0 + '%'
    });
    clearInterval(tick);
  }
  startProgressbar();
  // End ticking machine
  
  $j('.progressBarContainer .item').click(function () {
    
    clearInterval(tick);
    var goToThisIndex = $j(this).find("span").data("slickIndex");
    $j('.single-item').slick('slickGoTo', goToThisIndex, false);
    startProgressbar();
  });
  
  
  
  
  // Brightcove Video in pop up    
$j(document).on('click','.signpost-video',function() {
  var videoContainerID=$j(this).attr('href');
  if(!($j(videoContainerID).find(".inv_playerContainer").hasClass('inv_playerReady'))){
  var curVideo=$j(videoContainerID).find(".inv_playerContainer").attr('id'); 
  $j("#"+curVideo).InvPlayer().done(function(e) {
    setTimeout(function(){
        e.playVideo();
        $j('.mfp-content .mfp-close').addClass('active');
      },4000);
    });
  }else{
	setTimeout(function(){
		$j('.mfp-content .mfp-close').addClass('active');
    },600);
  }  

  $j.magnificPopup.open({
    items: {
      src: $j(videoContainerID),
      type: 'inline'
    },
    type: 'inline',
    preloader: true,
    closeMarkup: '<a href="javascript:;" class="mfp-close icon-close"></a>',
    fixedContentPos: true,
    enableEscapeKey: false,
    mainClass: 'mfp-fade',
    callbacks: {
      open: function() {
       $j(".video-item-popupinline").removeClass('videoinlineactive').find('.iframediv').html('');
        $j.magnificPopup.instance.close = function () {
          
          if ($j(".inv_playerContainer").length) {
            var getId = $j('.mfp-close').siblings('.inv_ParentContainer').find('.inv_playerContainer').attr('id');
            console.log(getId);
            
            $j("#" + getId).InvPlayer().done(function(eventvideo) {
              eventvideo.stopVideo();
            });
          }
       
          
          $j.magnificPopup.proto.close.call(this);
        }; 
      }
    }
  });
  return false;
}); 

$j(document).on('click','.signpost-menu-video',function() {
  var videoContainerID=$j(this).attr('href');
  if(!($j(videoContainerID).find(".inv_playerContainer").hasClass('inv_playerReady'))){
  var curVideo=$j(videoContainerID).find(".inv_playerContainer").attr('id'); 
  $j("#"+curVideo).InvPlayer().done(function(e) {
    setTimeout(function(){
        e.playVideo();
        $j('.mfp-content .mfp-close').addClass('active');
      },4000);
    });
  }else{
	setTimeout(function(){
		$j('.mfp-content .mfp-close').addClass('active');
    },600);
  }  

  $j.magnificPopup.open({
    items: {
      src: $j(videoContainerID),
      type: 'inline'
    },
    type: 'inline',
    preloader: true,
    closeMarkup: '<a href="javascript:;" class="mfp-close icon-close"></a>',
    fixedContentPos: true,
    enableEscapeKey: false,
    mainClass: 'mfp-fade',
    callbacks: {
      open: function() {
       $j(".video-item-popupinline").removeClass('videoinlineactive').find('.iframediv').html('');
        $j.magnificPopup.instance.close = function () {
          
          if ($j(".inv_playerContainer").length) {
            var getId = $j('.mfp-close').siblings('.inv_ParentContainer').find('.inv_playerContainer').attr('id');
            console.log(getId);
            
            $j("#" + getId).InvPlayer().done(function(eventvideo) {
              eventvideo.stopVideo();
            });
          }
       
          
          $j.magnificPopup.proto.close.call(this);
        }; 
      }
    }
  });
  return false;
}); 
  
  // Brightcove Video in pop up End
  
  //NLY_DividendData Json

var getDividendUrl = $j(".stats-value > .dataUrl").text();
var getSharePriceUrl = "https://annaly-v3.prod-use1.investis.com/tools/urlproxy/advurlproxy.aspx?settingname=share-price";
$j.ajax({ 
    type: 'GET', 
    url: getSharePriceUrl, 
    data: { get_param: 'value' }, 
    dataType: 'json',
    success: function (data) {
        var isShareData = data.stockquotes.CurrentPrice;
        $j.ajax({ 
          type: 'GET', 
          url: getDividendUrl, 
          data: { get_param: 'value' }, 
          dataType: 'json',
          success: function (data) {
          console.log(isShareData);
          var isData = ((data.DividendData.Data[0].CASH*4)/isShareData)*100;
          console.log(isData.toFixed(1));
          $j(".stock-information-module-wrapper .stats-value").each(function(){
              if($j(this).find('.dataUrl').length !== 0){
                  $j(this).append(isData.toFixed(1)+"%");
              }
          });
          }
      });
    }
});
  
  //NLY_DividendData Json End
  
  $j('.content-with-image-slider').each(function(key, item) {
    /*Image or Video*/
	var sliderNavIdName = 'sliderNavigation' + key;
    
    this.id = sliderNavIdName;
	$j('.content-with-image-slider')[key].id = sliderNavIdName;
    
    var sliderNavId = '#' + sliderNavIdName;
  
    var getChildLength = $j(this).find(".content-with-image-slider-item").length;
    if(getChildLength > 1){
      var $jstatus = $j(this).prev().find('> .slideCount');
      var $jslickElement = $j(this);
      
      
      $j(sliderNavId).on('init afterChange', function (event, slick, currentSlide, nextSlide) {
        //currentSlide is undefined on init -- set it to 0 in this case (currentSlide is 0 based)
        var i = (currentSlide ? currentSlide : 0) + 1;
        $jstatus.text(i + ' / ' + getChildLength);
      }).slick({  
        dots: false,
        infinite: true,
        autoplay: false,
        fade: true,
        adaptiveHeight: true,
        appendArrows: $j(this).siblings('.slidernav'),
        arrows:false
      });
    }
    
    var $arrows = $j(this).prev().find(".slidernav");
    var $next = $arrows.children(".slick-next");    
    var $prev = $arrows.children(".slick-prev");
    
    $j(this).prev().find('.slick-next').on('click', function (e) {
        $j(this).parent().next().slick('slickNext');
    });
    $j(this).prev().find('.slick-prev').on('click', function (e) {
        $j(this).parent().next().slick('slickPrev');
    });
    
    if(!$j(this).hasClass("slick-slider")){
		$j(this).prev().remove();
    }
  });
  
  
  
  var gallery = $j('.content-with-video-new-slider');
var slideCount = null;

$j(document).ready(function() {
    gallery.slick({
		dots: false,
        infinite: true,
        arrows:true,
		speed: 250,
      fade: true,
      cssEase: 'linear',
		prevArrow: "<button type='button' data-role='none' class='slick-prev slick-arrow video-new-sldier' aria-label='Previous' role='button' style=''>Previous</button>",
        nextArrow: "<button type='button' data-role='none' class='slick-next slick-arrow video-new-sldier' aria-label='Next' role='button' style=''>Next</button>",
	  swipe: true,
	  swipeToSlide: true,
	  touchThreshold: 10
    });
});

gallery.on('init', function(event, slick){
  slideCount = slick.slideCount;
  setSlideCount();
  setCurrentSlideNumber(slick.currentSlide);
});

gallery.on('beforeChange', function(event, slick, currentSlide, nextSlide){
  setCurrentSlideNumber(nextSlide);
});

function setSlideCount() {
  var el = $j('.slide-count-wrap').find('.total');
  el.text(slideCount);
}

function setCurrentSlideNumber(currentSlide) {
  var el = $j('.slide-count-wrap').find('.current');
  el.text(currentSlide + 1);
}


  /*
  
   $j('.content-with-video-new-slider').slick({  
        dots: false,
        infinite: true,
        autoplay: false,
        fade: true,
        adaptiveHeight: true,
        arrows:true,
		prevArrow: "<button type='button' data-role='none' class='slick-prev slick-arrow video-new-sldier' aria-label='Previous' role='button' style=''>Previous</button>",
        nextArrow: "<button type='button' data-role='none' class='slick-next slick-arrow video-new-sldier' aria-label='Next' role='button' style=''>Next</button>"
      });
  
  */
  /*------------------ content-with-image ------------------*/
  
  $j(".content-with-image-wrapper .content-with-image-slider .slick-list .slick-track > .content-with-image-slider-item").each(function(){
    console.log($j(this).length);
    if($j(this).length <= 1){
      //$j(this).parent().parent().parent().find(".slidernav").remove();
    }
  });
  /*------------------ image_or_video_slider ends ------------------*/
  
  
  //$j('.content-with-image-slider').append( $j('.slidernav') );
  
  
  
  $j('.tab-content-slider').slick({
    dots: false,
    //    appendDots: '.slider-dots',
    fade: true,
    arrows: false,
    infinite: true,
    slidesToScroll: 1,
    slidesToShow: 1,
    accessibility: true,
    variableWidth: false,
    focusOnSelect: false,
    autoplay: false,
    draggable: false,
    adaptiveHeight: true,
    //centerMode: false,
    asNavFor: '.tab-image-slider'/* ,
    responsive: [
      
      {
        breakpoint: 1024,
        settings: {
          adaptiveHeight: true,
          asNavFor: '.tab-image-slider,.tab-slider-nav'
        }
      },
	  {
		 breakpoint: 768,
        settings: {
          adaptiveHeight: true,
          asNavFor: '.tab-image-slider,.tab-slider-nav'
        } 
	  }
    ] */
  });
  
  $j('.tab-image-slider').slick({
    dots: false,
    //    appendDots: '.tab-slider-nav',
    arrows: false,
    infinite: true,
    slidesToScroll: 1,
    slidesToShow: 3,
    accessibility: true,
    variableWidth: false,
    asNavFor: '.tab-content-slider',
    autoplay: false,
    draggable: false,
    initialSlide: 0,
    focusOnSelect: true,
    //centerMode: false,
    responsive: [
      {
        breakpoint: 991,
        settings: {
          slidesToShow: 2
        }
      },
      {
        breakpoint: 768,
        settings: {
          // asNavFor: '.tab-content-slider,.tab-slider-nav',
          slidesToShow: 1
        }
      }
    ]
  });
  
  
  
  
  
 // $j(".tab-slider-nav li.first > a").click();
 $j(".tab-slider-nav li:first").addClass("active");
 
  $j('.tab-image-slider').slick('slickGoTo', -2);
 $j('.tab-content-slider').on('afterChange', function(event, slick, currentSlide, nextSlide){
            // finally let's do this after changing slides
            
            console.log('after change');
        });
        
  //$j('#slick-slide00 .tab-content-Description').show();
   
  $j('a[data-slide]').click(function(e) {
    e.preventDefault();
    var slideno = $j(this).data('slide');
    $j(".tab-slider-nav li").removeClass("active");
    $j(this).parent().addClass("active");
    
	var destSlide = slideno - 1;
	if(destSlide > 9)
	{
		var destSlideId = "#slick-slide"+destSlide;
	}
	else
	{
		var destSlideId = "#slick-slide0"+destSlide;
	}
	//$j('.tab-content-slider .tab-content-Description').hide();
    //$j(destSlideId+' .tab-content-Description').show();
	$j('.tab-image-slider,.tab-content-slider').slick('slickGoTo', slideno - 1);
  });
   // $j('#slick-slide00 .tab-content-Description').show();
  
  
  function keystats() {
    $j('.key-stats').slick({
      dots: true,
      fade: true,
      arrows: true,
      slidesToScroll: 1,
      slidesToShow: 1
    });
  }
  if($j(window).width() < 767){
    
    $j('.tab-slider-nav').slick({
      dots: false,
      fade: true,
      arrows: true,
      prevArrow: false,
      slidesToScroll: 1,
      slidesToShow: 1,
      adaptiveHeight: true,
      draggable: false,
      asNavFor: '.tab-content-slider,.tab-image-slider'
    });
    
    
    $j('.company-news-slider').slick({
      dots: true,
      fade: true,
      arrows: false,
      adaptiveHeight: true,
      slidesToScroll: 1,
      slidesToShow: 1
    });
    
    $j('.stock-information-slider').slick({
      dots: true,
      fade: true,
      arrows: false,
      adaptiveHeight: true,
      slidesToScroll: 1,
      slidesToShow: 1
    });
    
  }
  
  /* ------------------ Snapdown Starts ------------ */
  
  /*$j(".snapdown-content").hide();      
  if($j("#ip3-contact-us").length > 0){
    var newQuery = getParameterByName('new-query');
    if($j("#contact-form .contact-form fieldset").length === 0 || $j("#contact-form .contact-form > span").text() === "Invalid security code. Please re-try and hit submit button again." || newQuery == "true"){
      $j("#contact-form.snapdownItem .snapdown-title").addClass("active");
      $j("#contact-form .snapdown-content").show();
      $self = $j("#contact-form");
      setTimeout(function() {
        $j("html,body").animate({
          scrollTop: $self.offset().top
        }, "slow");
      }, 500);
    }else{
      $j(".snapdown-content.first").show();      
      $j(".snapdownItem.first .snapdown-title").addClass("active");
    }
  }
  else{
    //$j(".snapdown-content.first").show();      
    //$j(".snapdownItem.first .snapdown-title").addClass("active");
  }*/
  
  $j('.snapdown-title').click(function() {
    
    if($j(this).hasClass('active')){
      $j(this).next().slideUp(); 
      $j(this).removeClass('active');
      $j(this).parent().addClass('hover');
      $j(this).find("> .invisible").text("Expand");
    } else {
      $j(this).next().slideDown();
      $j(this).addClass('active');
      $j(this).parent().removeClass('hover');
      $j(this).find("> .invisible").text("Close");
    }
  });
  
  /* ------------------ Snapdown Ends ------------ */ 
  /*
  
  $j('.content-slider').slick({
  slidesToShow: 3,
  centerMode: true,
  centerPadding: "0px",
  speed: 500
 // infinite: false,
 responsive: [
    {
      breakpoint: 768,
      settings: {
        arrows: false,
        centerMode: true,
        centerPadding: '40px',
        slidesToShow: 3
      }
    },
    {
      breakpoint: 480,
      settings: {
        arrows: false,
        centerMode: true,
        centerPadding: '40px',
        slidesToShow: 1
      }
    }
  ]
});
 */
  $j(".content-slider").slick({
    centerMode: true,
    focusOnSelect: true,
    centerPadding: '0px',
    adaptiveHeight: false,
    //centerMargin: '40px',
    nextArrow:'<a href="javascript:;" class="slick-next icon-arrow-right"><span class="visuallyhidden">Next Slide</span></a>',
    
    prevArrow:'<a href="javascript:;" class="slick-prev icon-arrow-left"><span class="visuallyhidden">Previous Slide</span></a>',
    
    slidesToShow: 3,
    
    //variableWidth: true,
    dots: false,
    
    responsive: [{
      breakpoint: 991,
      settings: {
        //      arrows: false,
        //      centerMode: true,
        //      centerPadding: '40px',
        //adaptiveHeight: true,
        slidesToShow: 1
      }
    }]
    
  });
  
  function setSlideVisibility() {
    //Find the visible slides i.e. where aria-hidden="false"
    var visibleSlides = $j('.content-slider .slick-slide[aria-hidden="false"]');
    //Make sure all of the visible slides have an opacity of 1
    $j(visibleSlides).each(function() {
      $j(this).css('opacity', 1);
    });
    //Set the opacity of the first and last partial slides.
    $j(visibleSlides).first().prev().css('opacity', 0);
    $j(visibleSlides).last().next().css('opacity', 0);
  }
  
  $j(setSlideVisibility());
  
  $j('.content-slider').on('beforeChange', function() {
    $j('.content-slider .slick-slide').each(function() {
      $j(this).css('opacity', 1);
    });
  });
  
  $j('.content-slider').on('afterChange', function() {
    setSlideVisibility();  
  });
  
  $j(".timeline-tab ul li a").on('click', function() {
    
    var datatab = $j(this).attr('data-tab');

    if($j(this).hasClass("active")){
      $j(this).removeClass("active");
      //$j('.timeline-item-title.' + datatab).slideUp();
      $j('.timeline-item-title').each(function(){
        if($j(this).hasClass(datatab) && $j(this).hasClass("showThis")){
		  //$j(".timeline-item-title:hidden").css("display","block"); // for reset all
          $j(this).removeClass("showThis");	
          $j(this).addClass("hideThis");
        }
      });
    }
    else{
      $j(this).addClass("active");
      $j('.timeline-item-title').each(function(){
        if($j(this).hasClass(datatab)){
          if(!$j(this).hasClass("showThis")){
            $j(this).removeClass("hideThis");
            $j(this).addClass("showThis");
          }
        }
        else if($j(this).hasClass("hideThis")){
        }
          else if(!$j(this).hasClass("showThis")){
            $j(this).addClass("hideThis");
          }
      });
    }
    
    $j(".timeline-item-inner-wrapper").each(function(){
      var getTotalLength = $j(this).children().length;
      var getHiddenLength = $j(this).find(".hideThis").length;
	  
      if(getTotalLength == getHiddenLength){
        $j(this).parent().addClass("hideParent");
		$j(this).find(".hideThis").slideDown();
	    $j(this).find(".showThis").slideUp();
        $j(this).parent().slideUp();
      } 
      else{
		$j(this).parent().removeClass("hideParent");
        $j(this).find(".hideThis").slideUp();
	    $j(this).find(".showThis").slideDown();
        $j(this).parent().slideDown(); 
      }
    });
    var getLengthParent = $j(".timeline-item-wrapper").length;
    var getHiddenLengthParent = $j(".timeline-item-wrapper.hideParent").length;
     if(getLengthParent == getHiddenLengthParent){
      $j(".timeline-item-wrapper").removeClass("hideParent");
      $j(".timeline-item-wrapper").slideDown();
    } 
    
    if($j(window).width() < 767){
      $j(".timeline-tab ul li a").addClass("active");
      $j(".timeline-tab ul").slideUp();
    }
  });
  
  $j(".timeline-tab").prepend("<a class='selectedText' href='javascript:;'>" + $j(".timeline-tab ul li:first-child a ").html() + "</a>");
  
  $j('.timeline-tab > a.selectedText').click(function(){
    if($j(this).hasClass('open')){
      $j(this).next().slideUp();
      $j(this).removeClass('open');
    }else{
      $j(this).addClass('open');
      $j(this).next().slideDown();
    }
    
  });
  
  /*-- External Content Tabs <start> -- */
  
  $j('.tab-menu.ext-web-tb ul li:eq(0)').addClass('active');
  $j('.onecol .frame-area:gt(0)').css('display','none');
  
  $j('.tab-menu.ext-web-tb ul li').click(function(){
    var getID = $j(this).attr("id").replace("mobi-","");
    $j('.tab-menu.ext-web-tb ul li').removeClass('active');
    $j(this).addClass('active');
    /*--- added 08-03--*/
    
    $j('.onecol .frame-area').css('display','none');
    $j('.onecol .' + getID).fadeIn();
    $j('.mobi-pr-tabs ul').slideUp();
  });
  /*------------------ Year Tab mobi snapdown starts ------------------*/
  $j('.mobi-pr-tabs .year-item').click(function() {
    $j(this).toggleClass('active');
    $j(this).next().slideToggle();
    $j('.mobi-pr-tabs .year-item').not(this).next().slideUp();
    $j('.mobi-pr-tabs .year-item').not(this).removeClass('active');
    
    
  });
  /*------------------ Year Tabmobi snapdown ends ------------------*/
  
  /*-- External Content Tabs <end> -- */
  
  /*-------Wrap tables except inv-responsive tables with horizontal scrollable wrapper Starts--*/
  
  $j('#main_content_wrapper table:not(".inv-responsive,.pie-chart-and-copy-wrapper table")').each(function(){
    if($j(this).parents('div.scroll-table-container').length < 1){
      $j(this).wrap('<div class="scroll-table-container"></div>');
    }
  });
  /*-------Wrap tables except inv-responsive tables with horizontal scrollable wrapper Ends--*/
  if($j(window).width() < 767){
    keystats();
    $j(window).resize(function() {
      keystats();
    });
  }
  
  $j(window).resize(function() {
    backgroudwithcontent();
    
  });
  
});




/*=== Iframe ===*/
/*$j(document).ready(function(){
  if(!$j("body").hasClass("ip3-edit"))
    $j('iframe.responsive').iFrameResize({log:false});
});
$j(window).load(function(){
  if(!$j("body").hasClass("ip3-edit"))
    $j('iframe.responsive').iFrameResize({log:false});
});
$j(window).resize(function(){
  if ($j("iframe.responsive").length > 0) {
    $j("iframe.responsive").each(function(){
      $j(this).css("width", $j(this).parent('div').width() + "px");
    });
  }
});*/

/*=== Iframe End ===*/

$j(document).ready(function(){
  setTimeout(function(){
	 $j(".tab-slider-nav li.first > a[data-slide]").click();
  },100);
  var counter = 1;
  var innerCt = 0;
  var limit = 6;
  $j("#section-Homepage-level4").find(".level4").each(function(){
    if(counter <= limit)
    {
      $j(this).show();		
      innerCt ++;
    }
    counter ++;
  });
  //-------- code to be on the tab on its respective page
  $j("#section-Homepage-level4").find(".level4").each(function(){
    if($j(this).hasClass("current") && $j(this).css("display") == "none")
    {
      var cur_item = $j(this);
      $j("#a_Next").trigger("click");
      for(var i=0; i< counter ; i++)
      {
        
        if(cur_item.hasClass("current") && cur_item.css("display") == "none")
        {
          $j("#a_Next").trigger("click");
        }
        else
        {
          break;
        }
      }
    }
    
  });
  
  //----------------------------------------------
  
  checkTab();
});

function checkTab()
{
  if($j("#section-Homepage-level4").find("li.level4:visible:last").next().hasClass("last") || $j("#section-Homepage-level4").find("li.level4.last").css("display") != "none")
  {
    $j("#section-Homepage-level4").find("li.level4:visible:last").next().show();
    $j("#a_Next").hide();
  }
  else
  {
    $j("#a_Next").show();
  }
  
  if($j("#section-Homepage-level4").find("li.level4:visible:first").prev().hasClass("first") || $j("#section-Homepage-level4").find("li.level4.first").css("display") != "none")
  {
    $j("#section-Homepage-level4").find("li.level4:visible:first").prev().show();
    $j("#a_Prev").hide();
  }
  else
  {
    $j("#a_Prev").show();
  }
  
}

/*!---- solr-autocomplete-----*/
//var $j = jQuery.noConflict();

$j(document).ready(function() {

/* ======= For Solr search page textbox starts ======= */
    $j('#solrstrap-searchbox').keyup(keyuphandler);

    $j("#solrstrap-searchbox").keypress(function(e) {
        if (e.keyCode == 60 || e.keyCode == 62 || e.keyCode == 36 || e.keyCode == 37 || e.keyCode == 38 || e.keyCode == 42) {
            e.preventDefault();
            return false;
        }
    });
    
    $j("#solrstrap-searchbox").keypress(function (e) {
      if (e.keyCode == 13) {
        if(document.getElementById("submitButton")!==null)
          $j('#submitButton').trigger("click");      
        else
          $j('#searchButton').trigger("click"); 
        
        $j('#solrstrap-searchbox').autocomplete('close');
        
        $j('.ui-autocomplete').hide();             
        return false;                        
      }
    });
    
    $j("#submitButton").click(function (e) {
      if($j("#solrstrap-searchbox").val() != null && $j("#solrstrap-searchbox").val() != ""){
          var keywordtracking = "";
          if(SolrPopularSearchConfig.ENABLEPOPULARSEARCH === true)
            keywordtracking = "keywordtracking=1&";
          else
            keywordtracking = "&";
          
          document.location.href = "/site-services/search-results#queryType=Exact&"+keywordtracking+"q=" + encodeURIComponent($j("#solrstrap-searchbox").val().replace(":", "\:"));
          return false;
      }
    });

/* ======= For Solr search page textbox ends ======= */

/* ======= For Desktop textbox starts ======= */
    $j('#searchTextbox').keyup(keyuphandler2);

    $j("#searchTextbox").keypress(function(e) {
        if (e.keyCode == 60 || e.keyCode == 62 || e.keyCode == 36 || e.keyCode == 37 || e.keyCode == 38 || e.keyCode == 42) {
            e.preventDefault();
            return false;
        }
    });
    
    $j("#searchTextbox").keypress(function (e) {
      if (e.keyCode == 13) {
        if(document.getElementById("searchButton")!==null)
          $j('#searchButton').trigger("click");
        else
          $j('#searchButton1').trigger("click");     
        
        $j('#searchTextbox').autocomplete('close');
        
        $j('.ui-autocomplete').hide();
        return false;                        
      }
    });
    
    $j("#searchButton").click(function (e) {
      if($j("#searchTextbox").val() != null && $j("#searchTextbox").val() != ""){
        var keywordtracking = "";
        if(SolrPopularSearchConfig.ENABLEPOPULARSEARCH === true)
          keywordtracking = "keywordtracking=1&";
        else
          keywordtracking = "&";
        document.location.href = "/site-services/search-results#queryType=Exact&"+keywordtracking+"q=" + encodeURIComponent($j("#searchTextbox").val().replace(":", "\:"));
        return false;
      }
    });
    
/* ======= For Desktop pagetext box ends ======= */

/* ======= For Mobile textbox starts ======= */
    $j('#searchTextbox1').keyup(keyuphandler3);

    $j("#searchTextbox1").keypress(function(e) {
        if (e.keyCode == 60 || e.keyCode == 62 || e.keyCode == 36 || e.keyCode == 37 || e.keyCode == 38 || e.keyCode == 42) {
            e.preventDefault();
            return false;
        }
    });
    
    $j("#searchTextbox1").keypress(function (e) {
      if (e.keyCode == 13) {
        if(document.getElementById("searchButton1")!==null)
          $j('#searchButton1').trigger("click");      
        else
          $j('#searchButton').trigger("click");     
        
        $j('#searchTextbox1').autocomplete('close');
        
        $j('.ui-autocomplete').hide();           
        return false;                        
      }
    });
    
    $j("#searchButton1").click(function (e) {
      if($j("#searchTextbox1").val() != null && $j("#searchTextbox1").val() != ""){
        var keywordtracking = "";
        if(SolrPopularSearchConfig.ENABLEPOPULARSEARCH === true)
          keywordtracking = "keywordtracking=1&";
        else
          keywordtracking = "&";
        
        document.location.href = "/site-services/search-results#queryType=Exact&"+keywordtracking+"q=" + encodeURIComponent($j("#searchTextbox1").val().replace(":", "\:"));
        return false;
      }
    });
    
/* ======= For Mobile textbox ends ======= */

});

/* ======== For Solr search page starts ======= */

function keyuphandler() {
    var q = $j.trim($j('#solrstrap-searchbox').val());
    if (q.length > 3) {
        AutocompleteText();
    }
}

function AutocompleteText() {
    $j("#solrstrap-searchbox").autocomplete({
		appendTo: "#searchTextboxContainerSolr",
        source: function(request, response) {
            var inputs = {
                'Handler': 'autocomplete',
                'Query': buildAutocompleParams()
            };
            $j.ajax({
                url: SolrGlobalConfig.APIURI,
                data: inputs,
                type: 'POST',
                dataType: 'json',
                success: function(data) {
                    if (data !== null && data !== "" && data != "Failure") {
                        //Create a json that is understood by render item easily
                        var json = JSON.parse(data);
                        //faceted autocomplete field
                        json = json.facet_counts.facet_fields[SolrGlobalConfig.AUTOCOMPLETEFIELD];
                        var autocompleteresult = "[";
                        for (var i = 0; i < json.length; i++) {
                            if ((i % 2) === 0)
                                autocompleteresult += '{"label":"' + json[i];
                            else
                                autocompleteresult += '","value":' + json[i] + '},';
                        }
                        autocompleteresult = autocompleteresult.replace(/\,$/, '');
                        autocompleteresult += "]";
                        autocompleteresult = JSON.parse(autocompleteresult);
                        response(autocompleteresult);
                    }
                },
                error: function(result) {}
            });
        },
        minLength: 1,
        select: function(event, ui) {
            event.preventDefault();
            $j("#solrstrap-searchbox").val(ui.item.label);
            if (document.getElementById("submitButtonHeader") !== null)
                $j('#submitButtonHeader').trigger("click");
            else
                $j('#submitButton').trigger("click");
        },
        focus: function(event, ui) {
            event.preventDefault();
            $j("#solrstrap-searchbox").val(ui.item.label);
        }
    }).data("ui-autocomplete")._renderItem = function(ul, item) {
        return $j("<li class='ui-corner-all'>")
            .append("<a> <span style='float:left;'>" + decodeURIComponent(item.label) + "</span><span style='float:right;'>(" + item.value + ")</span></a>").appendTo(ul);
    };
}

function buildAutocompleParams() {
    var ret = {
        'q': "(client:" + SolrGlobalConfig.CLIENT + " AND (otplanguage:" + SolrOtpToolsSearchConfig.OTPLANGUAGE + " OR language:" + SolrGlobalConfig.LANGUAGE + "))",
        "facet.prefix": encodeURIComponent($j.trim($j('#solrstrap-searchbox').val().replace(":", "\\:")).toLowerCase()),
        "facet.method": "enum"
    };
    return JSON.stringify(ret);
}

/* ======== For Solr search page ends ======= */

/* ======== For Desktop search starts ======= */

function keyuphandler2() {
    var q = $j.trim($j('#searchTextbox').val());
    if (q.length > 2) {
        AutocompleteText2();
    }
}

function AutocompleteText2() {
    $j("#searchTextbox").autocomplete({
		appendTo: "#searchTextboxContainer",
        source: function(request, response) {
            var inputs = {
                'Handler': 'autocomplete',
                'Query': buildAutocompleParams2()
            };
            $j.ajax({
                url: SolrGlobalConfig.APIURI,
                data: inputs,
                type: 'POST',
                dataType: 'json',
                success: function(data) {
                    if (data !== null && data !== "" && data != "Failure") {
                        //Create a json that is understood by render item easily
                        var json = JSON.parse(data);
                        //faceted autocomplete field
                        json = json.facet_counts.facet_fields[SolrGlobalConfig.AUTOCOMPLETEFIELD];
                        var autocompleteresult = "[";
                        for (var i = 0; i < json.length; i++) {
                            if ((i % 2) === 0)
                                autocompleteresult += '{"label":"' + json[i];
                            else
                                autocompleteresult += '","value":' + json[i] + '},';
                        }
                        autocompleteresult = autocompleteresult.replace(/\,$/, '');
                        autocompleteresult += "]";
                        autocompleteresult = JSON.parse(autocompleteresult);
                        response(autocompleteresult);
                    }
                },
                error: function(result) {}
            });
        },
        minLength: 1,
        select: function(event, ui) {
            event.preventDefault();
            $j("#searchTextbox").val(ui.item.label);
            if (document.getElementById("searchButton") !== null)
                $j('#searchButton').trigger("click");
            else
                $j('#searchButton1').trigger("click");
        },
        focus: function(event, ui) {
            event.preventDefault();
            $j("#searchTextbox").val(ui.item.label);
        }
    }).data("ui-autocomplete")._renderItem = function(ul, item) {
        return $j("<li class='ui-corner-all'>")
            .append("<a> <span style='float:left;'>" + decodeURIComponent(item.label) + "</span><span style='float:right;'>(" + item.value + ")</span></a>").appendTo(ul);
    };
}

function buildAutocompleParams2() {
    var ret = {
        'q': "(client:" + SolrGlobalConfig.CLIENT + " AND (otplanguage:" + SolrOtpToolsSearchConfig.OTPLANGUAGE + " OR language:" + SolrGlobalConfig.LANGUAGE + "))",
        "facet.prefix": encodeURIComponent($j.trim($j('#searchTextbox').val().replace(":", "\\:")).toLowerCase()),
        "facet.method": "enum"
    };
    return JSON.stringify(ret);
}

/* ======== For Desktop search ends ======= */

/* ======== For mobile search starts ======= */

function keyuphandler3() {
    var q = $j.trim($j('#searchTextbox1').val());
    if (q.length > 2) {
        AutocompleteText3();
    }
}

function AutocompleteText3() {
    $j("#searchTextbox1").autocomplete({
		appendTo: ".searchTextboxContainer1",
        source: function(request, response) {
            var inputs = {
                'Handler': 'autocomplete',
                'Query': buildAutocompleParams3()
            };
            $j.ajax({
                url: SolrGlobalConfig.APIURI,
                data: inputs,
                type: 'POST',
                dataType: 'json',
                success: function(data) {
                    if (data !== null && data !== "" && data != "Failure") {
                        //Create a json that is understood by render item easily
                        var json = JSON.parse(data);
                        //faceted autocomplete field
                        json = json.facet_counts.facet_fields[SolrGlobalConfig.AUTOCOMPLETEFIELD];
                        var autocompleteresult = "[";
                        for (var i = 0; i < json.length; i++) {
                            if ((i % 2) === 0)
                                autocompleteresult += '{"label":"' + json[i];
                            else
                                autocompleteresult += '","value":' + json[i] + '},';
                        }
                        autocompleteresult = autocompleteresult.replace(/\,$/, '');
                        autocompleteresult += "]";
                        autocompleteresult = JSON.parse(autocompleteresult);
                        response(autocompleteresult);
                    }
                },
                error: function(result) {}
            });
        },
        minLength: 1,
        select: function(event, ui) {
            event.preventDefault();
            $j("#searchTextbox1").val(ui.item.label);
            if (document.getElementById("searchButton1") !== null)
                $j('#searchButton1').trigger("click");
            else
                $j('#searchButton').trigger("click");
        },
        focus: function(event, ui) {
            event.preventDefault();
            $j("#searchTextbox1").val(ui.item.label);
        }
    }).data("ui-autocomplete")._renderItem = function(ul, item) {
        return $j("<li class='ui-corner-all'>")
            .append("<a> <span style='float:left;'>" + decodeURIComponent(item.label) + "</span><span style='float:right;'>(" + item.value + ")</span></a>").appendTo(ul);
    };
}

function buildAutocompleParams3() {
    var ret = {
        'q': "(client:" + SolrGlobalConfig.CLIENT + " AND (otplanguage:" + SolrOtpToolsSearchConfig.OTPLANGUAGE + " OR language:" + SolrGlobalConfig.LANGUAGE + "))",
        "facet.prefix": encodeURIComponent($j.trim($j('#searchTextbox1').val().replace(":", "\\:")).toLowerCase()),
        "facet.method": "enum"
    };
    return JSON.stringify(ret);
}

/* ======== For mobile search ends ======= */
/*!---- solr-search-configuration-----*/
//All madantory global configuration for SOLR SEARCH goes here.

//Required parameters that will change according to client.
var SolrGlobalConfig = {
    //CONST- CHANGE ALL THESE TO TELL SOLRSTRAP ABOUT THE LOCATION AND STRUCTURE OF YOUR SOLR
    APIURI:"/tools/urlproxy/advurlproxy.aspx?settingname=solrservice", //API URI
    //Name of the client that has been configured in SOLR SEARCH ADMIN.
    CLIENT:"AnnalyV3",
    //LANGUAGE in which you want your search results.
    LANGUAGE:"en",
    //Autocomplete field name which has been indexed in solr search.
    //Prefix for this field will always be tnt_txt_
    //Suffic for this field will be the language
    AUTOCOMPLETEFIELD:"tnt_txt_en",
    //Required fields that you want in results.
    //Please you have configured any dynamic meta field in CMS it is required that it should be present below.
    //Default Value: absoluteurl,title,score,id,header_date_publish-date
    FIELDS:"absoluteurl, title, titleh1, score, id, header_date_publish-date, otptoolname, solrdocumenttype, meta_about, meta_thumb, meta_products, meta_date,meta_suppliers,meta_sustainability,meta_media,meta_investors,meta_careers,meta_futuresmart,meta_image,meta_video,meta_isfeatured,meta_date,metanum_filesize"
};

//Solr Tabs Configuration.
//If you don't want to use TABS in view just disable this functionality.
var SolrTabsConfig = {
    ENABLEMETATAGSEARCH:true,
    //Field name on which you want your tabs to be rendered.
    //Value for this field will be meta_section as we have configured the same in solr admin panel.
    TAB_METATAG:"meta_section",
    //Configure Tabs / Sections names that needs to be displayed.
    TABS:['our-company', 'our-businesses', 'our-responsibility', 'investors', 'careers', 'media', 'contact', 'press-releases', 'documents'],
    //Facet titles that will be shown on result page.
    //Example : If the facet field is "aboutus" and you want to show "About Us" instead of it then you can configure it below.
    TABS_TITLES:{
        'our-company': 'Our Company',
        'our-businesses': 'Our Businesses',
        'our-responsibility': 'Claims Center',
        'investors': 'Investors',
        'careers': 'Careers',
        'media': 'Media',
        'contact': 'Contact',
        'press-releases': 'Press Releases',
        'documents': 'Documents'
    }
};

//Solr Facets Configuration.
//If you don't want to use FACETS in view just disable this functionality.
var SolrFacetingConfig = {
    ENABLEFACETSEARCH:true,
    //Field names that will be used for FACETING of results.
    FACETS:['solrdocumenttype','meta_site', 'meta_domain', 'otptoolname'],
    //Facet titles that will be shown on result page.
    //Example : If the facet field is "solrdocumenttype" and you want to show "Content Type" instead of it then you can configure it below.
    FACETS_TITLES:{     
        'solrdocumenttype' : 'File content',
        'meta_site': 'Group website',
        'meta_domain': 'Related domains',
        'header_date_publish-date': 'Publish Date',
        'otptoolname': 'Feeds'
    },

    //This array will be used to replace values that will be returned in facet result for field meta_site.
    //Exmaple : If field meta_site has value "american" and you want to show "About Us" instead of it then you can configure it below.
    FACETS_ALIAS:{ }
};

//Solr Popular Search / Trending Keyword Configuration.
//If you don't want to use TRENDING KEYWORDS Search in view just disable this functionality.
var SolrPopularSearchConfig = {
    ENABLEPOPULARSEARCH:true,
    //CONST- CHANGE ALL THESE TO TELL SOLRSTRAP ABOUT THE LOCATION AND STRUCTURE OF YOUR SOLR
    APIPOPULARSEARCH:"/tools/urlproxy/advurlproxy.aspx?settingname=popularsearch"
};

//Solr Featured Search Configuration.
//This search will be displayed as a featured search above the actual search result.
//If you don't want to use FEATURED Search in view just disable this functionality.
//Result that needs to be displayed in Featured Search must be tagged with "meta_isfeatured"
var SolrFeaturedSearchConfig = {
    ENABLEFEATUREDSEARCH:true
};

//Solr Otp Tools Data Search Configuration.
//If you don't want to OTP TOOLS DATA in search just disable this functionality.
var SolrOtpToolsSearchConfig = {
    //Value must be true if OTP TOOLS DATA needs to be shown in results.
    OTPENABLED:'true',
    //LANGUAGE which is configured in OTP ADMIN
    OTPLANGUAGE:'en-GB',
    //Provide the tools that have been configured for this client in solr admin.
    OTPTOOLS:['rns'],
    OTPCAT:[],
    TAG:'otptoolname',
    FORMTYPE:"meta_seccategory"
};

//Solr Presentation Details Configuration.
//This functionality will hold the values for different dynamic fields that we will use to achieve specific results in search.(For example showing an thumb image / video url)
var SolrPresentationConfig = {
    //Start Section for paths that define icons of files to be displayed.
    //Icon path for different types of files.
    //This will be site specific and needs to be uploaded in respective location.
    solrPDFimg:'/~/media/Images/T/TollBrothers-IR/css/pdf.png',
    solrXLSimg:'/~/media/Images/T/TollBrothers-IR/css/xls.png',
    solrDOCimg:'/~/media/Images/T/TollBrothers-IR/css/doc.png',
    solrPPTimg:'/~/media/Images/T/TollBrothers-IR/css/ppt.png',
    //End Section for paths that define icons of files to be displayed.
    HITLINK:'absoluteurl',
    THUMB_URL:'meta_thumb',
    VIDEO_URL:'meta_video',
    IMAGE_URL:'meta_image',
    BOD_NAME:'meta_bodname'
};

//Solr Pagination Details Configuration.
//By Default we have configured for LOAD MORE view.
var SolrPaginationConfig = {
    //Number of documents / results to be shown in a single hit.
    HITSPERPAGE:15,
    PAGESIZE:0,
    CURRENTPAGE:0
};

//Solr Boosting Configuration.
var SolrBoostingConfig = {
    //If enabled sorting will be done by using edismax functionality of solr search.
    //If disabled sorting will be done by publish date / score (relevancy)
	ENABLEBOOSTING:true
};

//Solr Boosting Details Configuration.
var SolrBoosting = [  
  ["meta_searchkeywords_txt_" + SolrGlobalConfig.LANGUAGE, "100000000"],
  ["title_txt_" + SolrGlobalConfig.LANGUAGE, "90000"],
  ["titleh1_txt_" + SolrGlobalConfig.LANGUAGE, "80000"],
  ["description_txt_" + SolrGlobalConfig.LANGUAGE, "70000"]/*,
  ["host:investis-sales-demo-v2.prod-euw1.investis.com", "10000000000"]*/
];

var TEMPLATES;
/*!---- solr-search-custom-----*/
function closeAnimationSearchTextbox() {
    $j(".searchbox-wrapper").removeClass("active").css('overflow', 'hidden');
    $j(".searchbox-wrapper").animate({
        width: 0
    }, 400, function() {
        $j("#searchTextboxContainer input").animate({
            paddingLeft: "0px",
            paddingRight: "0px"
        });
    });
}

function getScrollbarWidth() {
    var outer = document.createElement("div");
    outer.style.visibility = "hidden";
    outer.style.width = "100px";
    document.body.appendChild(outer);

    var widthNoScroll = outer.offsetWidth;
    // force scrollbars
    outer.style.overflow = "scroll";

    // add innerdiv
    var inner = document.createElement("div");
    inner.style.width = "100%";
    outer.appendChild(inner);

    var widthWithScroll = inner.offsetWidth;

    // remove divs
    outer.parentNode.removeChild(outer);

    return widthNoScroll - widthWithScroll;
}

function siteTabs() {
    var TotalLiwidth = 0;
    var TabsWidth = $j('.solr-search-tab').width();

    $j('ul.tab-links-main').show();
    $j('ul.tab-links-main > li').each(function() {

        TotalLiwidth += $j(this).width();
    });

    if (TotalLiwidth >= TabsWidth) {
        $j('.solr-search-tab').addClass('isDropdown');
        $j('ul.tab-links-main').hide();
        $j('.solr-search-tab-mobiDropdown').show();
    } else {
        $j('.solr-search-tab').removeClass('isDropdown');
        $j('ul.tab-links-main').show();
        $j('.solr-search-tab-mobiDropdown').hide();
    }

}

function handle_submit2(event) {
  
  if($j('#searchTextbox').val().length <= 0){
    return false;
  }
  
  $j('#solrstrap-searchbox').val($j('#searchTextbox').val());
  $j('#searchTextbox1').val($j('#searchTextbox').val());
  $j('#submitButton').click();
  
  $j('#solrstrap-searchbox').focus();
  
  return false;
}

function handle_submit3(event) {
  
  $j("#solrstrap-searchbox").val($j('#searchTextbox1').val());
  $j("#searchTextbox").val($j('#searchTextbox1').val());
  $j('#searchButton1').trigger('click');
  
  return false;
}


$j(window).on('load', function() {

    /**-- Document click Search Starts --**/
    $j(document).on("click", function(event) {
        if (!$j(event.target).closest('.header--search').length && !$j(event.target).closest('.header--searchbox').length) {
            $j(".header--searchbox").slideUp();
        }
    });
    /**-- Document click Search Ends --**/

    /*----------- search close button ---------*/
    $j("#searchButtonContainer,#searchButtonContainer1").click(function() {
        closeAnimationSearchTextbox();
    });
    /*----------- search close button ---------*/

    /*------- header search -----*/
    $j(document).on("click", ".icon-search", function() {
        if (!$j(".searchbox-wrapper").hasClass('active')) {
            $j(".searchbox-wrapper").animate({
                width: "430px"
            }, 400, function() {
                $j("#searchTextboxContainer input").animate({
                    paddingLeft: "35px",
                    paddingRight: "30px"
                });
                $j(".searchbox-wrapper").addClass("active").css('overflow', 'visible');
                $j('#searchTextbox').val('').focus();
            });
        } else {
            closeAnimationSearchTextbox();
        }
    });

    $j(document).on("click", function(event) {
        if (!$j(event.target).closest('.searchbox-wrapper').length && !$j(event.target).closest('.icon-search').length) {
            closeAnimationSearchTextbox();
        }
    });
    /*----- header search ends ----*/
    
    
   if (window.location.href.indexOf('/site-services/search-results') > 0) {
        $j("#searchTextbox").val($j('#solrstrap-searchbox').val());
        $j("#searchTextbox1").val($j('#solrstrap-searchbox').val());
    }
    
    $j('.solr-search-tab-mobiDropdown').text($j('#contentwrapper .solr-search-tab ul li a.active').text());
    

});

$j(document).ajaxComplete(function() {

    $j('.solr-search-tab-mobiDropdown').text($j('#contentwrapper .solr-search-tab ul li a.active').text());
    setTimeout(function() {
        if ($j('#solrstrap-tabs .solr-search-tab').length > 1) {
            $j('#solrstrap-tabs .solr-search-tab:first-child').remove();
            $j('.solr-search-tab-mobiDropdown').text($j('#contentwrapper .solr-search-tab ul li a.active').text());
        }
    }, 600);

});

$j(document).ready(function(){

  $j('#searchButton').click(handle_submit2);
  $j('#searchButton1').click(handle_submit3);
  
  
  $j(document).on('click', '.solr-search-tab-mobiDropdown', function() {
    if ($j(this).parent().hasClass('active')) {
      $j(this).parent().removeClass('active');
      $j(this).parent().find('ul').slideUp();
    } else {
      $j(this).parent().addClass('active');
      $j(this).parent().find('ul').slideDown();
      var $dropBoxSearch = $j(".solr-search-tab.isDropdown.dropdown-wrapper.active");
      $j(document).mouseup(function(e){
        if (!$dropBoxSearch.is(e.target) && $dropBoxSearch.has(e.target).length === 0){
            $dropBoxSearch.removeClass('active');
            $dropBoxSearch.find('ul').slideUp();
        }
      });
    }
  });
  
  $j(document).on('click', '.showAdvSearchMobi', function() {
    if ($j(this).parent().hasClass('active')) {
      $j(this).parent().removeClass('active');
      $j(this).parent().find('.solarLeftSide').slideUp();
    } else {
      $j(this).parent().addClass('active');
      $j(this).parent().find('.solarLeftSide').slideDown();
    }
  });
  
});
/*!---- solr-search-global-----*/
//Start Section for Gloabal variables with static values

//Do not change the values of below variable untill required. These values will be common for all clients.
//Document ID
var HITID = 'id';
//Title field of HTML. This will be displayed as heading in each respective result.
var HITTITLE = 'title';
//H1 Title field of HTML. If required this can be displayed in each respective result.
var HITTITLEH1 = 'titleh1';
//Meta description of HTML. If required this can be displayed in each respective result.
var METADESCRIPTIONBOAST = 'description_txt_' + SolrGlobalConfig.LANGUAGE;
//Text field of HTML. This will be displayed as search text in each respective result.
var HITBODY = 'text';
//Field name for data of publish.
var HITPUBLISHDATE = "header_date_publish-date";
//Field name that will used for sort the results.
//By default it will be on pulish date.
//There will be two options for this value header_date_publish-date (i.e publish date) / score (i.e relevancy)
var SORTBY = "header_date_publish-date";
var submitClicked = false; 
//To show the file size that will be calculated and stored in below field.
var FILE_SIZE = "metanum_filesize";
var monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
var AUTOSEARCH_DELAY = 5;
//Show description text only if it exceeds the below value.
var MINDESCRIPTIONLENGTH = 5;
//Start section for highlighting text in result
var HL = true;
var HL_FL = SolrBoostingConfig.METADESCRIPTIONBOAST + SolrGlobalConfig.LANGUAGE + ",text";
var HL_SIMPLE_PRE = '%3Cb%3E';
var HL_SIMPLE_POST = '%3C%2Fb%3E';
var HL_SNIPPETS = 1;
var HL_FRAGSIZE = 320;
//End section for highlighting text in result

//End Section for Gloabal variables with static values
/*!---- solr-search-helper-functions-----*/
//EVENTS - START
function hashchange(event) {
  $j('#solrstrap-hits div[offset="0"]').loadSolrResults(getURLParam('q'), getURLParamArray('fq'), 0);
  $j('.loader').show();
}

function handle_submit(event) {
  var q = encodeURIComponent($j.trim($j('#solrstrap-searchbox').val()));
  var queryType = $j('input[name=querytype]:radio:checked').val();
  if (q !== '') {
    submitClicked = true;
    CURRENTPAGE = 0;
    $j.bbq.pushState({
      'queryType': queryType,
      'q': q,
      'keywordtracking': "1"
    });
  }
  return false;
}

function handle_radio(event) {
  var q = encodeURIComponent($j.trim($j('#solrstrap-searchbox').val()));
  var queryType = $j('input[name=querytype]:radio:checked').val();
  if (q !== '') {
    CURRENTPAGE = 0;
    $j.bbq.pushState({
      'queryType': queryType,
      'q': q,
      'keywordtracking': "1"
    });
  }
  return false;
}

function sortchange(event) {
  if (getURLParam("q") !== '') {
    CURRENTPAGE = 0;
    $j.bbq.pushState({
      'sort': this.value + ' desc'
    });
  }
  return false;
}

function ExecuteRangeQuery() {
  var fromdate = $j.datepicker.formatDate('yy-mm-dd', $j("#startDate").datepicker('getDate'));
  var todate = $j.datepicker.formatDate('yy-mm-dd', $j("#endDate").datepicker('getDate'));
  if (todate != "" || fromdate != "") {
    $j('#filterPublishDate').attr('disabled', false);
    var rangequery = "[" + fromdate + "T00:00:00.00Z TO " + todate + "T23:59:59.999Z]";
    rangequery = HITPUBLISHDATE + ":" + rangequery;
    var fq = getURLParamArray("fq");
    //Remove publishdate and add the new one as at a time only one section will be selected
    for (var i = fq.length - 1; i >= 0; i--) {
      if (fq[i].indexOf(HITPUBLISHDATE + ":") > -1) {
        fq.splice(i, 1);
      }
    }
    // check if it already exists...
    var existing = $j.grep(fq, function(elt, idx) {
      return decodeURIComponent(elt) === rangequery;
    });
    if (existing.length === 0) {
      fq.push(rangequery);
      CURRENTPAGE = 0;
      $j.bbq.pushState({
        'fq': fq
      });
    }
    return false;
  } else {
    $j('#filterPublishDate').attr('disabled', false);
  }
}
//EVENTS - END


//HELPER FUNCTIONS - START
//get the fqs from querystring and pass to handler in required format
function getProperFilterQuery(fq, excludeTabfq) {
  var fqobjs = [];
  var otpfqobjs = [];
  var clientObj = "client:" + SolrGlobalConfig.CLIENT;
  fqobjs.push(clientObj);
  if (fq !== undefined && fq.length > 0) {
    for (var i = 0; i < fq.length; i++) {
      //change the publish date title in querystring to range query
      var strRegExPattern = '^' + HITPUBLISHDATE + ':(.*)';
      var m = fq[i].match(new RegExp(strRegExPattern, 'i'));
      //When section tab is clicked then dont change the result of other tabs
      if (excludeTabfq) {
        strRegExPattern = '^' + SolrTabsConfig.TAB_METATAG + ':(.*)';
        m = fq[i].match(new RegExp(strRegExPattern, 'i'));
        if (m) {
          //Dont add to final fqobjs
          continue;
        }
      }
      //in case of otpcategories put an OR condition
      strRegExPattern = '^otpcatname:(.*)';
      m = fq[i].match(new RegExp(strRegExPattern, 'i'));
      if (m) {
        otpfqobjs.push(fq[i]);
        continue;
      }
      fqobjs.push(fq[i]);
    }
  }
  if (otpfqobjs.length > 0) {
    otpfqobjs = "(" + otpfqobjs.join(" OR ") + ")";
    fqobjs.push(otpfqobjs);
  }
  return fqobjs.join(" AND ");
}
//Set the active css for the current tab and remove it from previous tab
function setactivetab(fq) {
  $j("[data-metacontent='*']").addClass('active');
  if (fq != undefined) {
    for (var i = fq.length - 1; i >= 0; i--) {
      var strRegExPattern = '^' + SolrTabsConfig.TAB_METATAG + ':(.*)';
      var m = fq[i].match(new RegExp(strRegExPattern, 'i'));
      if (m) {
        $j('.tab-links li > a.active').removeClass('active');
        $j("[data-metacontent=" + m[1] + "]").addClass('active');
        break;
      }
    }
  }
}
//translates the ropey solr facet format to a more sensible map structure
function makeNavsSensible(navs) {
  var newNav = {};
  for (var i = 0; i < navs.length; i += 2) {
    newNav[navs[i]] = navs[i + 1];
  }
  return newNav;
}

function makeTabsSensible(navs) {
  var newNav = {};
  for (var i = 0; i < SolrTabsConfig.TABS.length; i++) {
    for (var j = 0; j < navs.length; j += 2) {
      if (SolrTabsConfig.TABS[i] == navs[j]) {
        newNav[navs[j]] = navs[j + 1];
        break;
      }
      newNav[SolrTabsConfig.TABS[i]] = 0;
    }
  }
  return newNav;
}
//utility function for grabbling URLs
function getURLParam(name) {
  var ret = $j.bbq.getState(name);
  return ret;
}

//function to generate an array of URL parameters, where there are likely to be several params with the same key
function getURLParamArray(name) {
  var ret = $j.bbq.getState(name) || [];
  if (typeof(ret) == 'string')
    ret = [ret];
  return ret;
}

//utility function that checks to see if an element is onscreen
function isScrolledIntoView(elem) {
  var docViewTop = $j(window).scrollTop();
  var docViewBottom = docViewTop + $j(window).height();
  var elemTop = $j(elem).offset().top;
  var elemBottom = elemTop + $j(elem).height();
  return ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));
}

//optionally convert a string array to a string, by concatenation
function array_as_string(array_or_string) {
  var ret = '';
  if (typeof(array_or_string) == 'string') {
    ret = array_or_string;
  } else if (typeof(array_or_string) == 'object' &&
             array_or_string.hasOwnProperty('length') &&
             array_or_string.length > 0) {
    ret = array_or_string.join(" ... ");
  }
  //ret = array_or_string;
  return ret;
}

//normalize a string with respect to whitespace:
//1) Remove all leadsing and trailing whitespace
//2) Replace all runs of tab, space and &nbsp; with a single space
function normalize_ws(string) {
  return string.replace(/^\s+/, '')
  .replace(/\s+$j/, '')
  .replace(/(?: |\t|&nbsp;|&#xa0;|\xa0)+/g, ' ');
}


//get field from result for document i, optionally replacing with
//highlit version
function get_maybe_highlit(result, i, field) {
  var res = result.response.docs[i][field];
  if (HL) {
    var id = result.response.docs[i][HITID];
    var hl_map = result.highlighting[id];
    if (hl_map.hasOwnProperty(field)) {
      res = hl_map[field];
    }
  }
  return array_as_string(res);
}

//get file size.
function bytesToSize(bytes) {
  var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
  if (bytes == 0) return '0 Byte';
  var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));
  return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];
};

//handler for navigator selection
function add_nav(event) {
  var whence = event.target;
  var navname = $j(whence).closest("div.facet").children("span.nav-title").data("facetname");
  var navvalue = "";
  var fq = getURLParamArray("fq");
  if (whence.type == "select-one") {
    //Remove otpcatname and add the new one as at a time only one section will be selected
    for (var i = fq.length - 1; i >= 0; i--) {
      if (fq[i].indexOf("otpcatname:") > -1) {
        fq.splice(i, 1);
      }
    }
    if (whence.value != null && whence.value != "")
      navvalue = whence.value;
  } else {
    navvalue = $j(whence).text();
  }
  if (navvalue === '') {
    navvalue = event.target.value;
  }
  var newnav = navname + ':"' + encodeURIComponent(navvalue.replace(/([\\\"])/g, "\\$j1")) + '"';
  //var fq = getURLParamArray("fq");
  // check if it already exists...
  var existing = $j.grep(fq, function(elt, idx) {
    return decodeURIComponent(elt) === (newnav);
  });
  if (existing.length === 0) {
    if (navvalue != '') {
      fq.push(newnav);
    }
    CURRENTPAGE = 0;
    $j.bbq.pushState({
      'fq': fq
    });
  }
  return false;
}

//handler for navigator de-selection
function del_nav(event) {
  var whence = event.target;
  if ($j(whence).hasClass("close")) {
    whence = $j(whence).next();
  }
  var text = $j(whence).text();
  if (text != null && text == "Publish Date") {
    $j('#filterPublishDate').attr('disabled', true);
    $j("#startDate").datepicker('setDate', null);
    $j("#endDate").datepicker('setDate', null);
  }
  
  var filter = $j(whence).data("filter");
  var fq = getURLParamArray("fq");
  
  if (filter.indexOf("otptoolname:") > -1) {
    for (var i = fq.length - 1; i >= 0; i--) {
      if (fq[i].indexOf("otpcatname:") > -1) {
        fq.splice(i, 1);
      }
    }
  }
  
  fq = $j.grep(fq, function(elt, idx) {
    return decodeURIComponent(elt) === decodeURIComponent(filter);
  }, true);
  
  CURRENTPAGE = 0;
  $j.bbq.pushState({
    "fq": fq
  });
  return false;
}

function tab_click(event) {
  OTPCAT = [];
  $j('input[name=chkOTPCat]').prop("checked", false);
  var whence = event.target;
  var navname = $j(whence).closest("div.tab-links").children("span.nav-title").data("facetname");
  var navvalue = $j(whence).data("metacontent");
  var fq = getURLParamArray("fq");
  //Remove meta_section and add the new one as at a time only one section will be selected
  for (var i = fq.length - 1; i >= 0; i--) {
    if (fq[i].indexOf(SolrTabsConfig.TAB_METATAG + ":") > -1 || fq[i].indexOf("otpcatname:") > -1) {
      fq.splice(i, 1);
    }
  }
  var newnav;
  if (navvalue.indexOf("*") > -1) {
    newnav = '';
  } else {
    newnav = navname + ':"' + navvalue.replace(/([\\\"])/g, "\\$j1") + '"';
  }
  // check if it already exists...
  var existing = $j.grep(fq, function(elt, idx) {
    return decodeURIComponent(elt) === (newnav);
  });
  if (existing.length === 0) {
    if (newnav != "") {
      fq.push(newnav);
    }
    CURRENTPAGE = 0;
    $j.bbq.pushState({
      'fq': fq
    });
  }
  return false;
}

function getUrlParameter(name) {
  name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
  var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
  var results = regex.exec(location.href);
  return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
}


function buildBoostingQuery(sortvalue, ret, q) {
  var boostingquery = "";
  ret["defType"] = "edismax";
  $j.each(SolrBoosting, function(key, value) {
    if (value[0].indexOf('host') === 0)
      boostingquery += value[0] + "^" + value[1];
    else
      boostingquery += value[0] + ":" + q + "^" + value[1];
  });
  ret["bq"] = boostingquery;
  
  if (sortvalue === "header_date_publish-date")
    ret["bf"] = "recip(abs(ms(NOW/HOUR," + sortvalue + ")),3.16e-11,1000000000000,1)";
}

//HELPER FUNCTIONS - END
/*!---- solr-search-tabs-----*/
function RenderSolrTabs(q, fq) {
    if (q !== null) {
        var inputs = {
            'Handler': 'facet',
            'Query': buildSectionParams(q, fq)
        };
        $j.ajax({
            url: SolrGlobalConfig.APIURI,
            type: "POST",
            data: inputs,
            dataType: 'json',
            success: function(data) {
                if (data != null && data != "" && data != "Failure") {
                    data = JSON.parse(data);
                    if (TEMPLATES.tabsTemplate != null && TEMPLATES.tabsTemplate != "") {
                        $j('#solrstrap-tabs').empty();
                        $j('#solrstrap-tabs').append(TEMPLATES.tabsTemplate({
                            metatag: SolrTabsConfig.TAB_METATAG,
                            title: SolrTabsConfig.TABS,
                            tabs: makeTabsSensible(data.facet_counts.facet_fields[SolrTabsConfig.TAB_METATAG]),
                            allresults: data.response.numFound
                        }));
                    }
                    setactivetab(fq);
                    $j('div.tab-links ul.tab-links-main li > a').click(tab_click);
                }
            },
            error: function(data) {

            }
        });
    }
};

//BUILD PARAMETERS - START
//build query to pass to facet handler
function buildSectionParams(q, fq) {
    //q = q.replace(new RegExp('"', 'g'), '\\"');
    q = encodeURIComponent(q);
    if ($j('input[name=querytype]:radio:checked').val() == "Exact")
        q = '"' + q + '"';
    var ret = {
        'query': q,
        'language': SolrGlobalConfig.LANGUAGE,
        'mergeotp': SolrOtpToolsSearchConfig.OTPENABLED,
        'otplanguage': SolrOtpToolsSearchConfig.OTPLANGUAGE,
        'facet.field': SolrTabsConfig.TAB_METATAG,
        'fq': getProperFilterQuery(fq, true),
        'facet.mincount': 0
    };
    return JSON.stringify(ret);
}
//BUILD PARAMETERS - END
/*!---- bod-----*/
$j( document ).ready(function() { 

  /*==== BOD Js Starts ====*/  
$j(".leadership-nav").prepend("<a class='selectedText' href='javascript:;'>" + $j(".leadership-nav ul li.current ").html() + "</a>");
  
  $j('.leadership-nav > a.selectedText').click(function(){
    if($j(this).hasClass('open')){
      $j(this).next().slideUp();
      $j(this).removeClass('open');
    }else{
      $j(this).addClass('open');
      $j(this).next().slideDown();
    }
  });
  
  
  $j('.leadership-member-tab-wrapper > a.selectedText').click(function(){
    if($j(this).hasClass('open')){
      $j(this).next().slideUp();
      $j(this).removeClass('open');
    }else{
      $j(this).addClass('open');
      $j(this).next().slideDown();
    }
  });
  
  $j(".leadership-member-tab > li").each(function(){
    var getPage = $j("#PageLevel").attr("data-current");
    if($j(this).find("a").attr("data-id")==getPage){
      $j(this).addClass("current");
    }
  });
  
  $j('.mod-leadership-member').each(function(){
    $j(this).find('.leadership-category-content').each(function(){
      var bodTabID= $j(this).attr('id');
      var bodModuleTab = new BODModule({'containerID': bodTabID});
    });    
  });
  
  var currText = $j(".leadership-member-tab-wrapper > ul > li.current > a").text();
  $j('.leadership-member-tab-wrapper > a.selectedText').text(currText);
  
  /*==== BOD Js Ends ====*/
  
});



/*=== For BOD Module ===*/
var idcountt=0;
var animateSpeed=500;
(function($){
  this.BODModule = function(){
    
    var defaults = {
      wrapperClassName : 'leadership-category-content',
      containerID: '',
      className: '.leadership-member',
      desktopCount: 3,
      tabletCount: 2,
      mobileCount: 1,
      memberList: '',
      openBtn: '.btn-open-content',
      closeBtn: '.btn-close-content',
      lastWidth: $(window).width()
    };
    
    // Create options by extending defaults with the passed in arugments
    if (arguments[0] && typeof arguments[0] === "object") {
      this.options = extendDefaults(defaults, arguments[0]);
    }else{
      this.options=defaults;
    }
    
    init(this);
  };
  
  function init(bodModule){
    //console.log('function called Init');
    bodModule.options.memberList = $('#'+bodModule.options.containerID +' '+bodModule.options.className);
    bodModule.wrapMembers();
    
    $(window).bind('resize', function(e){
      if($(window).width()!=bodModule.options.lastWidth){
        //console.log('resized call: '+bodModule.options.lastWidth+' && '+ $(window).width());
        bodModule.options.lastWidth = $(window).width();
        bodModule.unWrapMembers();
      }
    });
  }
  
  BODModule.prototype.unWrapMembers = function() {
    //console.log('function called unwrapmembers');
    
    $('#'+this.options.containerID +' '+this.options.className).unwrap();
    $('#'+this.options.containerID +' .leadership-desktop-content').remove();
    $('#'+this.options.containerID +' .leadership-tablet-content').remove();
    
    $('#'+this.options.containerID +' a'+this.options.openBtn+'.open').removeClass('open'); 
    
    this.wrapMembers();
  };
  
  BODModule.prototype.wrapMembers = function() {
    //console.log('function called wrapmembers');
    
    var divs =this.options.memberList;
    
    if(getWindowWidth() > 991){
      // for desktop mode	
      var desktopLimit = this.options.desktopCount;
      for(var i = 0; i < divs.length; i+=desktopLimit) {
        divs.slice(i, i+desktopLimit).wrapAll("<div class='row'></div>");
      }
      
      $('#'+this.options.containerID +' .row').each(function(){
        $("<div class='leadership-desktop-content row' id='leadership-content-row-"+idcountt+"' style='display:none;'></div>").insertAfter(this);
        idcountt++;
      });
    }else if(getWindowWidth() > 767){
      // for tablet mode
      var tabletLimit = this.options.tabletCount;
      for(var i = 0; i < divs.length; i+=tabletLimit) {
        divs.slice(i, i+tabletLimit).wrapAll("<div class='row'></div>");
      }
      
      $('#'+this.options.containerID +' .row').each(function(){
        $("<div class='leadership-tablet-content row' id='leadership-content-row-"+idcountt+"' style='display:none;'></div>").insertAfter(this);
        idcountt++;
      });
    }else{
      // for mobile mode
      var mobileLimit = this.options.mobileCount;
      for(var i = 0; i < divs.length; i+=mobileLimit) {
        divs.slice(i, i+mobileLimit).wrapAll("<div class='row'></div>");
      }
      
      $('#'+this.options.containerID +' .row').each(function(){
        $("<div class='leadership-mobile-content row' id='leadership-content-row-"+idcountt+"' style='display:none;'></div>").insertAfter(this);
        idcountt++;
      });
    }
    
    initializeEvents.call(this);
  };
  
  BODModule.prototype.open = function(clickBtn) {
    var _ = this;
    //console.log('function called open');
    
    var contentHolderClass='';
    var contentRowID='';
    var memberContent=$(clickBtn).parents('.leadership-member').find('.leadership-member-content').html();
    
    if(getWindowWidth() > 991){
      // for desktop mode	
      contentHolderClass='.leadership-desktop-content';
      contentRowID=$(clickBtn).parents('.leadership-member').parent().next().attr('id');
    }else if(getWindowWidth() > 767){
      // for tablet mode
      contentHolderClass='.leadership-tablet-content';
      contentRowID=$(clickBtn).parents('.leadership-member').parent().next().attr('id');
    }else{
      // for mobile mode
      contentHolderClass='.leadership-mobile-content';
      contentRowID=$(clickBtn).parents('.leadership-member').parent().next().attr('id');
    }
    
    
    if($(clickBtn).hasClass('open')){
      $("#"+contentRowID+""+contentHolderClass).slideUp(animateSpeed, function(){
        $(this).removeClass('show').html('');
        $(clickBtn).removeClass('open');
        $('.leadership-category-content').removeClass('transparent');
      });
      
    }else{
    	$('.leadership-category-content').addClass('transparent');
      if($('#'+_.options.containerID +' a'+_.options.openBtn+'.open').length > 0){
        $("#"+_.options.containerID+"  "+contentHolderClass+".show").slideUp('400', function(){
          $(this).removeClass('show').html('');
          $('#'+_.options.containerID +' a'+_.options.openBtn+'.open').removeClass('open'); 

          $(clickBtn).addClass('open');
          $("#"+contentRowID+""+contentHolderClass).addClass('show').html(memberContent).slideDown(animateSpeed);
          //close event bind
          if (_.options.closeBtn) {
            $('#'+contentRowID+' '+_.options.closeBtn).unbind().bind('click', function(){
              _.close(this);
            });
          }
        });
        
      }else{
        $(clickBtn).addClass('open');
        $("#"+contentRowID+""+contentHolderClass).addClass('show').html(memberContent).slideDown(animateSpeed);
        
        //close event bind
        if (_.options.closeBtn) {
          $('#'+contentRowID+' '+_.options.closeBtn).unbind().bind('click', function(){
            _.close(this);
            $(this).parents(".leadership-desktop-content").prev().find(".btn-open-content.open").focus();
          });
        }
      }
    }
  };
  
  BODModule.prototype.close = function(clickBtn) {
    var _ = this;
    //console.log('function called close');
    //console.log(this);
    //console.log($(clickBtn));
    
    var contentHolderClass='';
    
    if(getWindowWidth() > 991){
      // for desktop mode	
      contentHolderClass='.leadership-desktop-content';
    }else if(getWindowWidth() > 767){
      // for tablet mode
      contentHolderClass='.leadership-tablet-content';
    }else{
      // for mobile mode
      contentHolderClass='.leadership-mobile-content';
    }
    
    $(clickBtn).parents(contentHolderClass).slideUp(animateSpeed, function(){
      $(this).removeClass('show').html('');
      $('#'+_.options.containerID +' a'+_.options.openBtn+'.open').removeClass('open');
    });
  };
  
  function initializeEvents() {
    var _ = this;
    //console.log('function called initializeEvents');
    
    /*if (this.options.closeBtn) {
          $('#'+this.options.containerID +' '+this.options.closeBtn).unbind().bind('click', function(){
            _.close(this);
          });
        }*/
    if (this.options.openBtn) {
      $('#'+this.options.containerID +' '+this.options.openBtn).unbind().bind('click', function(){
        _.open(this);
        $(this).parents(".leadership-member").parent().next().find(".btn-close-content").focus();
      });
    }
  }
  
  function getWindowWidth(){
    return window.innerWidth;
  }
  
  // Utility method to extend defaults with user options
  function extendDefaults(source, properties) {
    var property;
    for (property in properties) {
      if (properties.hasOwnProperty(property)) {
        source[property] = properties[property];
      }
    }
    return source;
  }
}($j));
/*=== For BOD Module ===*/


/*!---- iframe-resizer-----*/
/*! iFrame Resizer (iframeSizer.contentWindow.min.js) - v2.6.1 - 2014-09-03
   *  Desc: Include this file in any page being loaded into an iframe
   *        to force the iframe to resize to the content size.
   *  Requires: iframeResizer.min.js on host page.
   *  Copyright: (c) 2014 David J. Bradshaw - dave@bradshaw.net
   *  License: MIT
   */

! function () {
      "use strict";
  
      function a(a, b, c) {
          "addEventListener" in window ? a.addEventListener(b, c, !1) : "attachEvent" in window && a.attachEvent("on" + b, c)
      }
      function b(a) {
          return $ + "[" + ab + "] " + a
      }
      function c(a) {
          Z && "object" == typeof window.console && console.log(b(a))
      }
      function d(a) {
          "object" == typeof window.console && console.warn(b(a))
      }
      function e() {
          c("Initialising iFrame"), f(), i(), h("background", L), h("padding", O), o(), m(), j(), p(), n(), D("init", "Init message from host page")
      }
      function f() {
          function a(a) {
              return "true" === a ? !0 : !1
          }
          var b = X.substr(_).split(":");
          ab = b[0], M = void 0 !== b[1] ? Number(b[1]) : M, P = void 0 !== b[2] ? a(b[2]) : P, Z = void 0 !== b[3] ? a(b[3]) : Z, Y = void 0 !== b[4] ? Number(b[4]) : Y, bb = void 0 !== b[5] ? a(b[5]) : bb, J = void 0 !== b[6] ? a(b[6]) : J, N = b[7], V = void 0 !== b[8] ? b[8] : V, L = b[9], O = b[10], fb = void 0 !== b[11] ? Number(b[11]) : fb
      }
      function g(a, b) {
          return -1 !== b.indexOf("-") && (d("Negative CSS value ignored for " + a), b = ""), b
      }
      function h(a, b) {
          void 0 !== b && "" !== b && "null" !== b && (document.body.style[a] = b, c("Body " + a + ' set to "' + b + '"'))
      }
      function i() {
          void 0 === N && (N = M + "px"), g("margin", N), h("margin", N)
      }
      function j() {
          document.documentElement.style.height = "", document.body.style.height = "", c('HTML & body height set to "auto"')
      }
      function k() {
          a(window, "resize", function () {
              D("resize", "Window resized")
          })
      }
      function l() {
          a(window, "click", function () {
              D("click", "Window clicked")
          })
      }
      function m() {
          U !== V && (V in jb || (d(V + " is not a valid option for heightCalculationMethod."), V = "bodyScroll"), c('Height calculation method set to "' + V + '"'))
      }
      function n() {
          !0 === J ? (k(), l(), s()) : c("Auto Resize disabled")
      }
      function o() {
          var a = document.createElement("div");
          a.style.clear = "both", a.style.display = "block", document.body.appendChild(a)
      }
      function p() {
          bb && (c("Enable public methods"), window.parentIFrame = {
              close: function () {
                  D("close", "parentIFrame.close()", 0, 0)
              },
              getId: function () {
                  return ab
              },
              reset: function () {
                  G("parentIFrame.size")
              },
              scrollTo: function (a, b) {
                  H(b, a, "scrollTo")
              },
              sendMessage: function (a, b) {
                  H(0, 0, "message", a, b)
              },
              setHeightCalculationMethod: function (a) {
                  V = a, m()
              },
              setTargetOrigin: function (a) {
                  c("Set targetOrigin: " + a), db = a
              },
              size: function (a, b) {
                  var c = "" + (a ? a : "") + (b ? "," + b : "");
                  E(), D("size", "parentIFrame.size(" + c + ")", a, b)
              }
          })
      }
      function q() {
          0 !== Y && (c("setInterval: " + Y + "ms"), setInterval(function () {
              D("interval", "setInterval: " + Y)
          }, Math.abs(Y)))
      }
      function r(b) {
          function d(b) {
              (void 0 === b.height || void 0 === b.width || 0 === b.height || 0 === b.width) && (c("Attach listerner to " + b.src), a(b, "load", function () {
                  D("imageLoad", "Image loaded")
              }))
          }
          b.forEach(function (a) {
              if ("attributes" === a.type && "src" === a.attributeName) d(a.target);
              else if ("childList" === a.type) {
                  var b = a.target.querySelectorAll("img");
                  Array.prototype.forEach.call(b, function (a) {
                      d(a)
                  })
              }
          })
      }
      function s() {
          function a() {
              var a = document.querySelector("body"),
                  d = {
                      attributes: !0,
                      attributeOldValue: !1,
                      characterData: !0,
                      characterDataOldValue: !1,
                      childList: !0,
                      subtree: !0
                  }, e = new b(function (a) {
                      D("mutationObserver", "mutationObserver: " + a[0].target + " " + a[0].type), r(a)
                  });
              c("Enable MutationObserver"), e.observe(a, d)
          }
          var b = window.MutationObserver || window.WebKitMutationObserver;
          b ? 0 > Y ? q() : a() : (d("MutationObserver not supported in this browser!"), q())
      }
      function t() {
          function a(a) {
              function b(a) {
                  var b = /^\d+(px)?$/i;
                  if (b.test(a)) return parseInt(a, K);
                  var d = c.style.left,
                      e = c.runtimeStyle.left;
                  return c.runtimeStyle.left = c.currentStyle.left, c.style.left = a || 0, a = c.style.pixelLeft, c.style.left = d, c.runtimeStyle.left = e, a
              }
              var c = document.body,
                  d = 0;
              return "defaultView" in document && "getComputedStyle" in document.defaultView ? (d = document.defaultView.getComputedStyle(c, null), d = null !== d ? d[a] : 0) : d = b(c.currentStyle[a]), parseInt(d, K)
          }
          return document.body.offsetHeight + a("marginTop") + a("marginBottom")
      }
      function u() {
          return document.body.scrollHeight
      }
      function v() {
          return document.documentElement.offsetHeight
      }
      function w() {
          return document.documentElement.scrollHeight
      }
      function x() {
          for (var a = document.querySelectorAll("body *"), b = a.length, d = 0, e = (new Date).getTime(), f = 0; b > f; f++) a[f].getBoundingClientRect().bottom > d && (d = a[f].getBoundingClientRect().bottom);
          return e = (new Date).getTime() - e, c("Parsed " + b + " HTML elements"), c("LowestElement bottom position calculated in " + e + "ms"), d
      }
      function y() {
          return [t(), u(), v(), w()]
      }
      function z() {
          return Math.max.apply(null, y())
      }
      function A() {
          return Math.min.apply(null, y())
      }
      function B() {
          return Math.max(t(), x())
      }
      function C() {
          return Math.max(document.documentElement.scrollWidth, document.body.scrollWidth)
      }
      function D(a, b, d, e) {
          function f() {
              a in {
                  reset: 1,
                  resetPage: 1,
                  init: 1
              } || c("Trigger event: " + b)
          }
          function g() {
              S = n, ib = o, H(S, ib, a)
          }
          function h() {
              return gb && a in Q
          }
          function i() {
              function a(a, b) {
                  var c = Math.abs(a - b) <= fb;
                  return !c
              }
              return n = void 0 !== d ? d : jb[V](), o = void 0 !== e ? e : C(), a(S, n) || P && a(ib, o)
          }
          function j() {
              return !(a in {
                  init: 1,
                  interval: 1,
                  size: 1
              })
          }
          function k() {
              return V in cb
          }
          function l() {
              c("No change in size detected")
          }
          function m() {
              j() && k() ? G(b) : a in {
                  interval: 1
              } || (f(), l())
          }
          var n, o;
          h() ? c("Trigger event cancelled: " + a) : i() ? (f(), E(), g()) : m()
      }
      function E() {
          gb || (gb = !0, c("Trigger event lock on")), clearTimeout(hb), hb = setTimeout(function () {
              gb = !1, c("Trigger event lock off"), c("--")
          }, R)
      }
      function F(a) {
          S = jb[V](), ib = C(), H(S, ib, a)
      }
      function G(a) {
          var b = V;
          V = U, c("Reset trigger event: " + a), E(), F("reset"), V = b
      }
      function H(a, b, d, e, f) {
          function g() {
              void 0 === f ? f = db : c("Message targetOrigin: " + f)
          }
          function h() {
              var g = a + ":" + b,
                  h = ab + ":" + g + ":" + d + (void 0 !== e ? ":" + e : "");
              c("Sending message to host page (" + h + ")"), eb.postMessage($ + h, f)
          }
          g(), h()
      }
      function I(a) {
          function b() {
              return $ === ("" + a.data).substr(0, _)
          }
          function f() {
              X = a.data, eb = a.source, e(), T = !1, setTimeout(function () {
                  W = !1
              }, R)
          }
          function g() {
              W ? c("Page reset ignored by init") : (c("Page size reset by host page"), F("resetPage"))
          }
          function h() {
              return a.data.split("]")[1]
          }
          function i() {
              return "iFrameResize" in window
          }
          function j() {
              return a.data.split(":")[2] in {
                  "true": 1,
                  "false": 1
              }
          }
          b() && (T && j() ? f() : "reset" === h() ? g() : a.data === X || i() || d("Unexpected message (" + a.data + ")"))
      }
      var J = !0,
          K = 10,
          L = "",
          M = 0,
          N = "",
          O = "",
          P = !1,
          Q = {
              resize: 1,
              click: 1
          }, R = 128,
          S = 1,
          T = !0,
          U = "offset",
          V = U,
          W = !0,
          X = "",
          Y = 32,
          Z = !1,
          $ = "[iFrameSizer]",
          _ = $.length,
          ab = "",
          bb = !1,
          cb = {
              max: 1,
              scroll: 1,
              bodyScroll: 1,
              documentElementScroll: 1
          }, db = "*",
          eb = window.parent,
          fb = 0,
          gb = !1,
          hb = null,
          ib = 1,
          jb = {
              offset: t,
              bodyOffset: t,
              bodyScroll: u,
              documentElementOffset: v,
              scroll: w,
              documentElementScroll: w,
              max: z,
              min: A,
              grow: z,
              lowestElement: B
          };
      a(window, "message", I)
  }();
/*!---- responsive-----*/
/*!
 * jQuery lightweight responsive web adaptation plugin
 * Original author: @stildv
 * Copyright  2011: Devrim Vardar, @stildv -- http://stild.com/
 * Further changes, comments: @stildv -- http://stild.com/code/jquery-responsive-web/
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://stild.com/license/
 * Date: Thu Oct 20 01:27:32 2011 +0300
 * Version: 1.00 (20-OCT-2010)
 * PS. I am not a wonderful coder, I neither have the patience nor the repertoire so this is almost as good as I get. Cheers. :)
 */
;(function ($j, window, document, undefined) {

    $j.responsiveWeb = function (element, options) {

        var windowadaptTimeout;
        var tempCounter = 0;
        var winWidth;
        var winHeight;

        this.options = {};
        var that = this;
        element.data('responsiveWeb', this);

        this.init = function (element, options) {
            this.options = $j.extend({}, $j.responsiveWeb.defaultOptions, options);
            options = this.options;
            element.resize(checkResize);
            checkResize();
            if (options.manipulateDesign) {
                manipulateDesign();
            }
        };

        function delayedResize() {
            options = that.options;
            //window.status = ++tempCounter;
            var winNewWidth = $j(window).width();
            var winNewHeight = $j(window).height();
            if (winWidth != winNewWidth || winHeight != winNewHeight) {
                winWidth = winNewWidth;
                winHeight = winNewHeight;

                if (options.applyBodyClasses) {
                    applyBodyClasses();
                }
                if (options.rearrangeObjects) {
                    rearrangeObjects();
                }
            }
            //$j('body div.loadingDiv').remove();
        }

        function checkResize() {
            //window.scrollTo(0, 1);
            //$j('body').append('<div class="loadingDiv" style="width:100%;height:100%;position:absolute;left:0;top:0;zoom:1;filter:alpha(opacity=85);opacity:0.85;background:#AAA url(\'img/loading.gif\') no-repeat center center;">loading...</div>');
            window.clearTimeout(windowadaptTimeout);
            windowadaptTimeout = window.setTimeout(delayedResize, 250);
        }

        function applyBodyClasses() {
            options = that.options;
            clearBodyClasses();

            var currcC = '';
            var tmpWidth = decideResolution();
            var tmpArrWidth = tmpWidth.split(" ");
            tmpWidth = tmpArrWidth[0];
            if (options.applyPlatform) {
                currcC += decidePlatform();
            }
            if (options.applyBrowser) {
                currcC += decideBrowser();
            }
            if (options.applyResolution) {
                currcC += decideResolution();
            }
            $j('body').addClass(currcC);
            $j('body').attr("data-width", tmpWidth.substr(1));

            if (options.debug) {
                log(winWidth + 'x' + winHeight + ' || ' + $j('body').attr('class'));
            }
        }

        function log(str) {
            var debugDiv = '<div class="debugDiv" style="position:absolute;top:0;right:0;padding:2px;background:black;color:lime;font-size:9px;line-height:9px;"></div>';
            if ($j('.debugDiv ul').length) {
                $j('.debugDiv ul').append('<li>' + str + '</li>');
            } else {
                $j('body').append(debugDiv);
                $j('.debugDiv').append('<ul></ul>');
                $j('.debugDiv ul').append('<li>' + str + '</li>');
            }
        }

        function decidePlatform() {
            var cC = '';

            var platform = navigator.userAgent;
            if (platform.indexOf('Windows') > 0) {
                cC = 'windows' + ' ';
            } else if (platform.indexOf('Linux') > 0 && platform.indexOf('Android') < 0) {
                cC = 'linux' + ' ';
            } else if (platform.indexOf('Mac') > 0 && (platform.indexOf('iphone') < 0 || platform.indexOf('ipad') < 0)) {
                cC = 'mac' + ' ';
            } else if (platform.indexOf('iPhone') > 0) {
                cC = 'iphone' + ' ';
            } else if (platform.indexOf('iPad') > 0) {
                cC = 'ipad' + ' ';
            } else if (platform.indexOf('Android') > 0) {
                cC = 'android' + ' ';
            }

            return cC;
        }

        function decideBrowser() {
            var cC = '';
            options = that.options;

            var nVer = navigator.appVersion;
            var nAgt = navigator.userAgent;
            var browserName = navigator.appName;
            var fullVersion = '' + parseFloat(navigator.appVersion);
            var majorVersion = parseInt(navigator.appVersion, 10);
            var nameOffset, verOffset, ix;

            if ((verOffset = nAgt.indexOf("Opera")) != -1) {
                browserName = "opera";
                fullVersion = nAgt.substring(verOffset + 6);
                if ((verOffset = nAgt.indexOf("Version")) != -1)
                    fullVersion = nAgt.substring(verOffset + 8);
            } else if ((verOffset = nAgt.indexOf("MSIE")) != -1) {
                browserName = "msie";
                fullVersion = nAgt.substring(verOffset + 5);
            } else if ((verOffset = nAgt.indexOf("Chrome")) != -1) {
                browserName = "chrome";
                fullVersion = nAgt.substring(verOffset + 7);
            } else if ((verOffset = nAgt.indexOf("Safari")) != -1) {
                browserName = "safari";
                fullVersion = nAgt.substring(verOffset + 7);
                if ((verOffset = nAgt.indexOf("Version")) != -1)
                    fullVersion = nAgt.substring(verOffset + 8);
            } else if ((verOffset = nAgt.indexOf("Firefox")) != -1) {
                browserName = "firefox";
                fullVersion = nAgt.substring(verOffset + 8);
            } else if ((nameOffset = nAgt.lastIndexOf(' ') + 1) < (verOffset = nAgt.lastIndexOf('/'))) {
                browserName = nAgt.substring(nameOffset, verOffset);
                fullVersion = nAgt.substring(verOffset + 1);
                if (browserName.toLowerCase() == browserName.toUpperCase()) {
                    browserName = navigator.appName;
                }
            }
            if ((ix = fullVersion.indexOf(";")) != -1) fullVersion = fullVersion.substring(0, ix);
            if ((ix = fullVersion.indexOf(" ")) != -1) fullVersion = fullVersion.substring(0, ix);

            majorVersion = parseInt('' + fullVersion, 10);
            if (isNaN(majorVersion)) {
                fullVersion = '' + parseFloat(navigator.appVersion);
                majorVersion = parseInt(navigator.appVersion, 10);
            }

            if (options.applyBrowser) {
                cC += browserName + ' ';
            }
            if (options.applyBrowserVersion) {
                cC += browserName + majorVersion + ' ';
            }

            return cC;
        }

        function decideResolution() {
            var h = $j(window).height();
            var w = $j(window).width();
            var cC = '';

            if (w >= 1880) {
                cC = 'w1920' + ' ';
            } else if (w >= 1560) {
                cC = 'w1600' + ' ';
            } else if (w >= 1400) {
                cC = 'w1440' + ' ';
            } else if (w >= 1240) {
                cC = 'w1280' + ' ';
            } else if (w >= 984) {
                cC = 'w1024' + ' ';
            } else if (w >= 728) {
                cC = 'w768' + ' ';
            } else if (w >= 440) {
                cC = 'w480' + ' ';
            } else if (w >= 280) {
                cC = 'w320' + ' ';
            } else {
                cC = 'wtiny' + ' ';
            }

            if (h >= 864) {
                cC += 'h1024' + ' ';
            } else if (h >= 740) {
                cC += 'h900' + ' ';
            } else if (h >= 608) {
                cC += 'h768' + ' ';
            } else if (h >= 440) {
                cC += 'h600' + ' ';
            } else if (h >= 320) {
                cC += 'h480' + ' ';
            } else {
                cC += 'htiny' + ' ';
            }

            return cC;
        }

        function clearBodyClasses() {
            $j('body').removeClass('w1920 w1600 w1440 w1280 w1024 w768 w480 w320 wtiny h1024 h900 h768 h600 h480 htiny');
        }

        this.init(element, options);
    };

    $j.fn.responsiveWeb = function (options) {
        return this.each(function () {
            (new $j.responsiveWeb($j(this), options));
        });
    };


    $j.responsiveWeb.defaultOptions = {
        applyBodyClasses: true,
        applyResolution: true,
        applyPlatform: true,
        applyBrowser: true,
        applyBrowserVersion: true,
        manipulateDesign: true,
        rearrangeObjects: true,
        debug: false
    };

})($j, window, document);

function viewport() {
    var e = window, a = 'inner';
    if (!('innerWidth' in window )) {
        a = 'client';
        e = document.documentElement || document.body;
    }
    return { width : e[ a+'Width' ] , height : e[ a+'Height' ] };
}

function manipulateDesign() {}

function rearrangeObjects() {
    currWidth = viewport().width;currHeight = viewport().height;
	if(!snap_arranged){
        $j(".snapdown_image_card > a.btn-open-content").removeClass('hvr');
        SnapImage();
    }
    snap_arranged=false;

}
var isMobile;

/*!---- magnific-popup-----*/
/*! Magnific Popup - v0.9.9 - 2013-12-27
* http://dimsemenov.com/plugins/magnific-popup/
* Copyright (c) 2013 Dmitry Semenov; */
;(function($j) {

/*>>core*/
/**
 * 
 * Magnific Popup Core JS file
 * 
 */


/**
 * Private static constants
 */
var CLOSE_EVENT = 'Close',
	BEFORE_CLOSE_EVENT = 'BeforeClose',
	AFTER_CLOSE_EVENT = 'AfterClose',
	BEFORE_APPEND_EVENT = 'BeforeAppend',
	MARKUP_PARSE_EVENT = 'MarkupParse',
	OPEN_EVENT = 'Open',
	CHANGE_EVENT = 'Change',
	NS = 'mfp',
	EVENT_NS = '.' + NS,
	READY_CLASS = 'mfp-ready',
	REMOVING_CLASS = 'mfp-removing',
	PREVENT_CLOSE_CLASS = 'mfp-prevent-close';


/**
 * Private vars 
 */
var mfp, // As we have only one instance of MagnificPopup object, we define it locally to not to use 'this'
	MagnificPopup = function(){},
	_isJQ = !!(window.$j),
	_prevStatus,
	_window = $j(window),
	_body,
	_document,
	_prevContentType,
	_wrapClasses,
	_currPopupType;


/**
 * Private functions
 */
var _mfpOn = function(name, f) {
		mfp.ev.on(NS + name + EVENT_NS, f);
	},
	_getEl = function(className, appendTo, html, raw) {
		var el = document.createElement('div');
		el.className = 'mfp-'+className;
		if(html) {
			el.innerHTML = html;
		}
		if(!raw) {
			el = $j(el);
			if(appendTo) {
				el.appendTo(appendTo);
			}
		} else if(appendTo) {
			appendTo.appendChild(el);
		}
		return el;
	},
	_mfpTrigger = function(e, data) {
		mfp.ev.triggerHandler(NS + e, data);

		if(mfp.st.callbacks) {
			// converts "mfpEventName" to "eventName" callback and triggers it if it's present
			e = e.charAt(0).toLowerCase() + e.slice(1);
			if(mfp.st.callbacks[e]) {
				mfp.st.callbacks[e].apply(mfp, $j.isArray(data) ? data : [data]);
			}
		}
	},
	_getCloseBtn = function(type) {
		if(type !== _currPopupType || !mfp.currTemplate.closeBtn) {
			mfp.currTemplate.closeBtn = $j( mfp.st.closeMarkup.replace('%title%', mfp.st.tClose ) );
			_currPopupType = type;
		}
		return mfp.currTemplate.closeBtn;
	},
	// Initialize Magnific Popup only when called at least once
	_checkInstance = function() {
		if(!$j.magnificPopup.instance) {
			mfp = new MagnificPopup();
			mfp.init();
			$j.magnificPopup.instance = mfp;
		}
	},
	// CSS transition detection, http://stackoverflow.com/questions/7264899/detect-css-transitions-using-javascript-and-without-modernizr
	supportsTransitions = function() {
		var s = document.createElement('p').style, // 's' for style. better to create an element if body yet to exist
			v = ['ms','O','Moz','Webkit']; // 'v' for vendor

		if( s['transition'] !== undefined ) {
			return true; 
		}
			
		while( v.length ) {
			if( v.pop() + 'Transition' in s ) {
				return true;
			}
		}
				
		return false;
	};



/**
 * Public functions
 */
MagnificPopup.prototype = {

	constructor: MagnificPopup,

	/**
	 * Initializes Magnific Popup plugin. 
	 * This function is triggered only once when $j.fn.magnificPopup or $j.magnificPopup is executed
	 */
	init: function() {
		var appVersion = navigator.appVersion;
		mfp.isIE7 = appVersion.indexOf("MSIE 7.") !== -1; 
		mfp.isIE8 = appVersion.indexOf("MSIE 8.") !== -1;
		mfp.isLowIE = mfp.isIE7 || mfp.isIE8;
		mfp.isAndroid = (/android/gi).test(appVersion);
		mfp.isIOS = (/iphone|ipad|ipod/gi).test(appVersion);
		mfp.supportsTransition = supportsTransitions();

		// We disable fixed positioned lightbox on devices that don't handle it nicely.
		// If you know a better way of detecting this - let me know.
		mfp.probablyMobile = (mfp.isAndroid || mfp.isIOS || /(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent) );
		_document = $j(document);

		mfp.popupsCache = {};
	},

	/**
	 * Opens popup
	 * @param  data [description]
	 */
	open: function(data) {

		if(!_body) {
			_body = $j(document.body);
		}

		var i;

		if(data.isObj === false) { 
			// convert jQuery collection to array to avoid conflicts later
			mfp.items = data.items.toArray();

			mfp.index = 0;
			var items = data.items,
				item;
			for(i = 0; i < items.length; i++) {
				item = items[i];
				if(item.parsed) {
					item = item.el[0];
				}
				if(item === data.el[0]) {
					mfp.index = i;
					break;
				}
			}
		} else {
			mfp.items = $j.isArray(data.items) ? data.items : [data.items];
			mfp.index = data.index || 0;
		}

		// if popup is already opened - we just update the content
		if(mfp.isOpen) {
			mfp.updateItemHTML();
			return;
		}
		
		mfp.types = []; 
		_wrapClasses = '';
		if(data.mainEl && data.mainEl.length) {
			mfp.ev = data.mainEl.eq(0);
		} else {
			mfp.ev = _document;
		}

		if(data.key) {
			if(!mfp.popupsCache[data.key]) {
				mfp.popupsCache[data.key] = {};
			}
			mfp.currTemplate = mfp.popupsCache[data.key];
		} else {
			mfp.currTemplate = {};
		}



		mfp.st = $j.extend(true, {}, $j.magnificPopup.defaults, data ); 
		mfp.fixedContentPos = mfp.st.fixedContentPos === 'auto' ? !mfp.probablyMobile : mfp.st.fixedContentPos;

		if(mfp.st.modal) {
			mfp.st.closeOnContentClick = false;
			mfp.st.closeOnBgClick = false;
			mfp.st.showCloseBtn = false;
			mfp.st.enableEscapeKey = false;
		}
		

		// Building markup
		// main containers are created only once
		if(!mfp.bgOverlay) {

			// Dark overlay
			mfp.bgOverlay = _getEl('bg').on('click'+EVENT_NS, function() {
				mfp.close();
			});

			mfp.wrap = _getEl('wrap').attr('tabindex', -1).on('click'+EVENT_NS, function(e) {
				if(mfp._checkIfClose(e.target)) {
					mfp.close();
				}
			});

			mfp.container = _getEl('container', mfp.wrap);
		}

		mfp.contentContainer = _getEl('content');
		if(mfp.st.preloader) {
			mfp.preloader = _getEl('preloader', mfp.container, mfp.st.tLoading);
		}


		// Initializing modules
		var modules = $j.magnificPopup.modules;
		for(i = 0; i < modules.length; i++) {
			var n = modules[i];
			n = n.charAt(0).toUpperCase() + n.slice(1);
			mfp['init'+n].call(mfp);
		}
		_mfpTrigger('BeforeOpen');


		if(mfp.st.showCloseBtn) {
			// Close button
			if(!mfp.st.closeBtnInside) {
				mfp.wrap.append( _getCloseBtn() );
			} else {
				_mfpOn(MARKUP_PARSE_EVENT, function(e, template, values, item) {
					values.close_replaceWith = _getCloseBtn(item.type);
				});
				_wrapClasses += ' mfp-close-btn-in';
			}
		}

		if(mfp.st.alignTop) {
			_wrapClasses += ' mfp-align-top';
		}

	

		if(mfp.fixedContentPos) {
			mfp.wrap.css({
				overflow: mfp.st.overflowY,
				overflowX: 'hidden',
				overflowY: mfp.st.overflowY
			});
		} else {
			mfp.wrap.css({ 
				top: _window.scrollTop(),
				position: 'absolute'
			});
		}
		if( mfp.st.fixedBgPos === false || (mfp.st.fixedBgPos === 'auto' && !mfp.fixedContentPos) ) {
			mfp.bgOverlay.css({
				height: _document.height(),
				position: 'absolute'
			});
		}

		

		if(mfp.st.enableEscapeKey) {
			// Close on ESC key
			_document.on('keyup' + EVENT_NS, function(e) {
				if(e.keyCode === 27) {
					mfp.close();
				}
			});
		}

		_window.on('resize' + EVENT_NS, function() {
			mfp.updateSize();
		});


		if(!mfp.st.closeOnContentClick) {
			_wrapClasses += ' mfp-auto-cursor';
		}
		
		if(_wrapClasses)
			mfp.wrap.addClass(_wrapClasses);


		// this triggers recalculation of layout, so we get it once to not to trigger twice
		var windowHeight = mfp.wH = _window.height();

		
		var windowStyles = {};

		if( mfp.fixedContentPos ) {
            if(mfp._hasScrollBar(windowHeight)){
                var s = mfp._getScrollbarSize();
                if(s) {
                    windowStyles.marginRight = s;
                }
            }
        }

		if(mfp.fixedContentPos) {
			if(!mfp.isIE7) {
				windowStyles.overflow = 'hidden';
			} else {
				// ie7 double-scroll bug
				$j('body, html').css('overflow', 'hidden');
			}
		}

		
		
		var classesToadd = mfp.st.mainClass;
		if(mfp.isIE7) {
			classesToadd += ' mfp-ie7';
		}
		if(classesToadd) {
			mfp._addClassToMFP( classesToadd );
		}

		// add content
		mfp.updateItemHTML();

		_mfpTrigger('BuildControls');

		// remove scrollbar, add margin e.t.c
		$j('html').css(windowStyles);
		
		// add everything to DOM
		mfp.bgOverlay.add(mfp.wrap).prependTo( mfp.st.prependTo || _body );

		// Save last focused element
		mfp._lastFocusedEl = document.activeElement;
		
		// Wait for next cycle to allow CSS transition
		setTimeout(function() {
			
			if(mfp.content) {
				mfp._addClassToMFP(READY_CLASS);
				mfp._setFocus();
			} else {
				// if content is not defined (not loaded e.t.c) we add class only for BG
				mfp.bgOverlay.addClass(READY_CLASS);
			}
			
			// Trap the focus in popup
			_document.on('focusin' + EVENT_NS, mfp._onFocusIn);

		}, 16);

		mfp.isOpen = true;
		mfp.updateSize(windowHeight);
		_mfpTrigger(OPEN_EVENT);

		return data;
	},

	/**
	 * Closes the popup
	 */
	close: function() {
		if(!mfp.isOpen) return;
		_mfpTrigger(BEFORE_CLOSE_EVENT);

		mfp.isOpen = false;
		// for CSS3 animation
		if(mfp.st.removalDelay && !mfp.isLowIE && mfp.supportsTransition )  {
			mfp._addClassToMFP(REMOVING_CLASS);
			setTimeout(function() {
				mfp._close();
			}, mfp.st.removalDelay);
		} else {
			mfp._close();
		}
	},

	/**
	 * Helper for close() function
	 */
	_close: function() {
		_mfpTrigger(CLOSE_EVENT);

		var classesToRemove = REMOVING_CLASS + ' ' + READY_CLASS + ' ';

		mfp.bgOverlay.detach();
		mfp.wrap.detach();
		mfp.container.empty();

		if(mfp.st.mainClass) {
			classesToRemove += mfp.st.mainClass + ' ';
		}

		mfp._removeClassFromMFP(classesToRemove);

		if(mfp.fixedContentPos) {
			var windowStyles = {marginRight: ''};
			if(mfp.isIE7) {
				$j('body, html').css('overflow', '');
			} else {
				windowStyles.overflow = '';
			}
			$j('html').css(windowStyles);
		}
		
		_document.off('keyup' + EVENT_NS + ' focusin' + EVENT_NS);
		mfp.ev.off(EVENT_NS);

		// clean up DOM elements that aren't removed
		mfp.wrap.attr('class', 'mfp-wrap').removeAttr('style');
		mfp.bgOverlay.attr('class', 'mfp-bg');
		mfp.container.attr('class', 'mfp-container');

		// remove close button from target element
		if(mfp.st.showCloseBtn &&
		(!mfp.st.closeBtnInside || mfp.currTemplate[mfp.currItem.type] === true)) {
			if(mfp.currTemplate.closeBtn)
				mfp.currTemplate.closeBtn.detach();
		}


		if(mfp._lastFocusedEl) {
			$j(mfp._lastFocusedEl).focus(); // put tab focus back
		}
		mfp.currItem = null;	
		mfp.content = null;
		mfp.currTemplate = null;
		mfp.prevHeight = 0;

		_mfpTrigger(AFTER_CLOSE_EVENT);
	},
	
	updateSize: function(winHeight) {

		if(mfp.isIOS) {
			// fixes iOS nav bars https://github.com/dimsemenov/Magnific-Popup/issues/2
			var zoomLevel = document.documentElement.clientWidth / window.innerWidth;
			var height = window.innerHeight * zoomLevel;
			mfp.wrap.css('height', height);
			mfp.wH = height;
		} else {
			mfp.wH = winHeight || _window.height();
		}
		// Fixes #84: popup incorrectly positioned with position:relative on body
		if(!mfp.fixedContentPos) {
			mfp.wrap.css('height', mfp.wH);
		}

		_mfpTrigger('Resize');

	},

	/**
	 * Set content of popup based on current index
	 */
	updateItemHTML: function() {
		var item = mfp.items[mfp.index];

		// Detach and perform modifications
		mfp.contentContainer.detach();

		if(mfp.content)
			mfp.content.detach();

		if(!item.parsed) {
			item = mfp.parseEl( mfp.index );
		}

		var type = item.type;	

		_mfpTrigger('BeforeChange', [mfp.currItem ? mfp.currItem.type : '', type]);
		// BeforeChange event works like so:
		// _mfpOn('BeforeChange', function(e, prevType, newType) { });
		
		mfp.currItem = item;

		

		

		if(!mfp.currTemplate[type]) {
			var markup = mfp.st[type] ? mfp.st[type].markup : false;

			// allows to modify markup
			_mfpTrigger('FirstMarkupParse', markup);

			if(markup) {
				mfp.currTemplate[type] = $j(markup);
			} else {
				// if there is no markup found we just define that template is parsed
				mfp.currTemplate[type] = true;
			}
		}

		if(_prevContentType && _prevContentType !== item.type) {
			mfp.container.removeClass('mfp-'+_prevContentType+'-holder');
		}
		
		var newContent = mfp['get' + type.charAt(0).toUpperCase() + type.slice(1)](item, mfp.currTemplate[type]);
		mfp.appendContent(newContent, type);

		item.preloaded = true;

		_mfpTrigger(CHANGE_EVENT, item);
		_prevContentType = item.type;
		
		// Append container back after its content changed
		mfp.container.prepend(mfp.contentContainer);

		_mfpTrigger('AfterChange');
	},


	/**
	 * Set HTML content of popup
	 */
	appendContent: function(newContent, type) {
		mfp.content = newContent;
		
		if(newContent) {
			if(mfp.st.showCloseBtn && mfp.st.closeBtnInside &&
				mfp.currTemplate[type] === true) {
				// if there is no markup, we just append close button element inside
				if(!mfp.content.find('.mfp-close').length) {
					mfp.content.append(_getCloseBtn());
				}
			} else {
				mfp.content = newContent;
			}
		} else {
			mfp.content = '';
		}

		_mfpTrigger(BEFORE_APPEND_EVENT);
		mfp.container.addClass('mfp-'+type+'-holder');

		mfp.contentContainer.append(mfp.content);
	},



	
	/**
	 * Creates Magnific Popup data object based on given data
	 * @param  {int} index Index of item to parse
	 */
	parseEl: function(index) {
		var item = mfp.items[index],
			type;

		if(item.tagName) {
			item = { el: $j(item) };
		} else {
			type = item.type;
			item = { data: item, src: item.src };
		}

		if(item.el) {
			var types = mfp.types;

			// check for 'mfp-TYPE' class
			for(var i = 0; i < types.length; i++) {
				if( item.el.hasClass('mfp-'+types[i]) ) {
					type = types[i];
					break;
				}
			}

			item.src = item.el.attr('data-mfp-src');
			if(!item.src) {
				item.src = item.el.attr('href');
			}
		}

		item.type = type || mfp.st.type || 'inline';
		item.index = index;
		item.parsed = true;
		mfp.items[index] = item;
		_mfpTrigger('ElementParse', item);

		return mfp.items[index];
	},


	/**
	 * Initializes single popup or a group of popups
	 */
	addGroup: function(el, options) {
		var eHandler = function(e) {
			e.mfpEl = this;
			mfp._openClick(e, el, options);
		};

		if(!options) {
			options = {};
		} 

		var eName = 'click.magnificPopup';
		options.mainEl = el;
		
		if(options.items) {
			options.isObj = true;
			el.off(eName).on(eName, eHandler);
		} else {
			options.isObj = false;
			if(options.delegate) {
				el.off(eName).on(eName, options.delegate , eHandler);
			} else {
				options.items = el;
				el.off(eName).on(eName, eHandler);
			}
		}
	},
	_openClick: function(e, el, options) {
		var midClick = options.midClick !== undefined ? options.midClick : $j.magnificPopup.defaults.midClick;


		if(!midClick && ( e.which === 2 || e.ctrlKey || e.metaKey ) ) {
			return;
		}

		var disableOn = options.disableOn !== undefined ? options.disableOn : $j.magnificPopup.defaults.disableOn;

		if(disableOn) {
			if($j.isFunction(disableOn)) {
				if( !disableOn.call(mfp) ) {
					return true;
				}
			} else { // else it's number
				if( _window.width() < disableOn ) {
					return true;
				}
			}
		}
		
		if(e.type) {
			e.preventDefault();

			// This will prevent popup from closing if element is inside and popup is already opened
			if(mfp.isOpen) {
				e.stopPropagation();
			}
		}
			

		options.el = $j(e.mfpEl);
		if(options.delegate) {
			options.items = el.find(options.delegate);
		}
		mfp.open(options);
	},


	/**
	 * Updates text on preloader
	 */
	updateStatus: function(status, text) {

		if(mfp.preloader) {
			if(_prevStatus !== status) {
				mfp.container.removeClass('mfp-s-'+_prevStatus);
			}

			if(!text && status === 'loading') {
				text = mfp.st.tLoading;
			}

			var data = {
				status: status,
				text: text
			};
			// allows to modify status
			_mfpTrigger('UpdateStatus', data);

			status = data.status;
			text = data.text;

			mfp.preloader.html(text);

			mfp.preloader.find('a').on('click', function(e) {
				e.stopImmediatePropagation();
			});

			mfp.container.addClass('mfp-s-'+status);
			_prevStatus = status;
		}
	},


	/*
		"Private" helpers that aren't private at all
	 */
	// Check to close popup or not
	// "target" is an element that was clicked
	_checkIfClose: function(target) {

		if($j(target).hasClass(PREVENT_CLOSE_CLASS)) {
			return;
		}

		var closeOnContent = mfp.st.closeOnContentClick;
		var closeOnBg = mfp.st.closeOnBgClick;

		if(closeOnContent && closeOnBg) {
			return true;
		} else {

			// We close the popup if click is on close button or on preloader. Or if there is no content.
			if(!mfp.content || $j(target).hasClass('mfp-close') || (mfp.preloader && target === mfp.preloader[0]) ) {
				return true;
			}

			// if click is outside the content
			if(  (target !== mfp.content[0] && !$j.contains(mfp.content[0], target))  ) {
				if(closeOnBg) {
					// last check, if the clicked element is in DOM, (in case it's removed onclick)
					if( $j.contains(document, target) ) {
						return true;
					}
				}
			} else if(closeOnContent) {
				return true;
			}

		}
		return false;
	},
	_addClassToMFP: function(cName) {
		mfp.bgOverlay.addClass(cName);
		mfp.wrap.addClass(cName);
	},
	_removeClassFromMFP: function(cName) {
		this.bgOverlay.removeClass(cName);
		mfp.wrap.removeClass(cName);
	},
	_hasScrollBar: function(winHeight) {
		return (  (mfp.isIE7 ? _document.height() : document.body.scrollHeight) > (winHeight || _window.height()) );
	},
	_setFocus: function() {
		(mfp.st.focus ? mfp.content.find(mfp.st.focus).eq(0) : mfp.wrap).focus();
	},
	_onFocusIn: function(e) {
		if( e.target !== mfp.wrap[0] && !$j.contains(mfp.wrap[0], e.target) ) {
			mfp._setFocus();
			return false;
		}
	},
	_parseMarkup: function(template, values, item) {
		var arr;
		if(item.data) {
			values = $j.extend(item.data, values);
		}
		_mfpTrigger(MARKUP_PARSE_EVENT, [template, values, item] );

		$j.each(values, function(key, value) {
			if(value === undefined || value === false) {
				return true;
			}
			arr = key.split('_');
			if(arr.length > 1) {
				var el = template.find(EVENT_NS + '-'+arr[0]);

				if(el.length > 0) {
					var attr = arr[1];
					if(attr === 'replaceWith') {
						if(el[0] !== value[0]) {
							el.replaceWith(value);
						}
					} else if(attr === 'img') {
						if(el.is('img')) {
							el.attr('src', value);
						} else {
							el.replaceWith( '<img src="'+value+'" class="' + el.attr('class') + '" />' );
						}
					} else {
						el.attr(arr[1], value);
					}
				}

			} else {
				template.find(EVENT_NS + '-'+key).html(value);
			}
		});
	},

	_getScrollbarSize: function() {
		// thx David
		if(mfp.scrollbarSize === undefined) {
			var scrollDiv = document.createElement("div");
			scrollDiv.id = "mfp-sbm";
			scrollDiv.style.cssText = 'width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;';
			document.body.appendChild(scrollDiv);
			mfp.scrollbarSize = scrollDiv.offsetWidth - scrollDiv.clientWidth;
			document.body.removeChild(scrollDiv);
		}
		return mfp.scrollbarSize;
	}

}; /* MagnificPopup core prototype end */




/**
 * Public static functions
 */
$j.magnificPopup = {
	instance: null,
	proto: MagnificPopup.prototype,
	modules: [],

	open: function(options, index) {
		_checkInstance();	

		if(!options) {
			options = {};
		} else {
			options = $j.extend(true, {}, options);
		}
			

		options.isObj = true;
		options.index = index || 0;
		return this.instance.open(options);
	},

	close: function() {
		return $j.magnificPopup.instance && $j.magnificPopup.instance.close();
	},

	registerModule: function(name, module) {
		if(module.options) {
			$j.magnificPopup.defaults[name] = module.options;
		}
		$j.extend(this.proto, module.proto);			
		this.modules.push(name);
	},

	defaults: {   

		// Info about options is in docs:
		// http://dimsemenov.com/plugins/magnific-popup/documentation.html#options
		
		disableOn: 0,	

		key: null,

		midClick: false,

		mainClass: '',

		preloader: true,

		focus: '', // CSS selector of input to focus after popup is opened
		
		closeOnContentClick: false,

		closeOnBgClick: true,

		closeBtnInside: true, 

		showCloseBtn: true,

		enableEscapeKey: true,

		modal: false,

		alignTop: false,
	
		removalDelay: 0,

		prependTo: null,
		
		fixedContentPos: 'auto', 
	
		fixedBgPos: 'auto',

		overflowY: 'auto',

		closeMarkup: '<button title="%title%" type="button" class="mfp-close icon-close">&times;</button>',

		tClose: 'Close (Esc)',

		tLoading: 'Loading...'

	}
};



$j.fn.magnificPopup = function(options) {
	_checkInstance();

	var jqEl = $j(this);

	// We call some API method of first param is a string
	if (typeof options === "string" ) {

		if(options === 'open') {
			var items,
				itemOpts = _isJQ ? jqEl.data('magnificPopup') : jqEl[0].magnificPopup,
				index = parseInt(arguments[1], 10) || 0;

			if(itemOpts.items) {
				items = itemOpts.items[index];
			} else {
				items = jqEl;
				if(itemOpts.delegate) {
					items = items.find(itemOpts.delegate);
				}
				items = items.eq( index );
			}
			mfp._openClick({mfpEl:items}, jqEl, itemOpts);
		} else {
			if(mfp.isOpen)
				mfp[options].apply(mfp, Array.prototype.slice.call(arguments, 1));
		}

	} else {
		// clone options obj
		options = $j.extend(true, {}, options);
		
		/*
		 * As Zepto doesn't support .data() method for objects 
		 * and it works only in normal browsers
		 * we assign "options" object directly to the DOM element. FTW!
		 */
		if(_isJQ) {
			jqEl.data('magnificPopup', options);
		} else {
			jqEl[0].magnificPopup = options;
		}

		mfp.addGroup(jqEl, options);

	}
	return jqEl;
};


//Quick benchmark
/*
var start = performance.now(),
	i,
	rounds = 1000;

for(i = 0; i < rounds; i++) {

}
console.log('Test #1:', performance.now() - start);

start = performance.now();
for(i = 0; i < rounds; i++) {

}
console.log('Test #2:', performance.now() - start);
*/


/*>>core*/

/*>>inline*/

var INLINE_NS = 'inline',
	_hiddenClass,
	_inlinePlaceholder, 
	_lastInlineElement,
	_putInlineElementsBack = function() {
		if(_lastInlineElement) {
			_inlinePlaceholder.after( _lastInlineElement.addClass(_hiddenClass) ).detach();
			_lastInlineElement = null;
		}
	};

$j.magnificPopup.registerModule(INLINE_NS, {
	options: {
		hiddenClass: 'hide', // will be appended with `mfp-` prefix
		markup: '',
		tNotFound: 'Content not found'
	},
	proto: {

		initInline: function() {
			mfp.types.push(INLINE_NS);

			_mfpOn(CLOSE_EVENT+'.'+INLINE_NS, function() {
				_putInlineElementsBack();
			});
		},

		getInline: function(item, template) {

			_putInlineElementsBack();

			if(item.src) {
				var inlineSt = mfp.st.inline,
					el = $j(item.src);

				if(el.length) {

					// If target element has parent - we replace it with placeholder and put it back after popup is closed
					var parent = el[0].parentNode;
					if(parent && parent.tagName) {
						if(!_inlinePlaceholder) {
							_hiddenClass = inlineSt.hiddenClass;
							_inlinePlaceholder = _getEl(_hiddenClass);
							_hiddenClass = 'mfp-'+_hiddenClass;
						}
						// replace target inline element with placeholder
						_lastInlineElement = el.after(_inlinePlaceholder).detach().removeClass(_hiddenClass);
					}

					mfp.updateStatus('ready');
				} else {
					mfp.updateStatus('error', inlineSt.tNotFound);
					el = $j('<div>');
				}

				item.inlineElement = el;
				return el;
			}

			mfp.updateStatus('ready');
			mfp._parseMarkup(template, {}, item);
			return template;
		}
	}
});

/*>>inline*/

/*>>ajax*/
var AJAX_NS = 'ajax',
	_ajaxCur,
	_removeAjaxCursor = function() {
		if(_ajaxCur) {
			_body.removeClass(_ajaxCur);
		}
	},
	_destroyAjaxRequest = function() {
		_removeAjaxCursor();
		if(mfp.req) {
			mfp.req.abort();
		}
	};

$j.magnificPopup.registerModule(AJAX_NS, {

	options: {
		settings: null,
		cursor: 'mfp-ajax-cur',
		tError: '<a href="%url%">The content</a> could not be loaded.'
	},

	proto: {
		initAjax: function() {
			mfp.types.push(AJAX_NS);
			_ajaxCur = mfp.st.ajax.cursor;

			_mfpOn(CLOSE_EVENT+'.'+AJAX_NS, _destroyAjaxRequest);
			_mfpOn('BeforeChange.' + AJAX_NS, _destroyAjaxRequest);
		},
		getAjax: function(item) {

			if(_ajaxCur)
				_body.addClass(_ajaxCur);

			mfp.updateStatus('loading');

			var opts = $j.extend({
				url: item.src,
				success: function(data, textStatus, jqXHR) {
					var temp = {
						data:data,
						xhr:jqXHR
					};

					_mfpTrigger('ParseAjax', temp);

					mfp.appendContent( $j(temp.data), AJAX_NS );

					item.finished = true;

					_removeAjaxCursor();

					mfp._setFocus();

					setTimeout(function() {
						mfp.wrap.addClass(READY_CLASS);
					}, 16);

					mfp.updateStatus('ready');

					_mfpTrigger('AjaxContentAdded');
				},
				error: function() {
					_removeAjaxCursor();
					item.finished = item.loadError = true;
					mfp.updateStatus('error', mfp.st.ajax.tError.replace('%url%', item.src));
				}
			}, mfp.st.ajax.settings);

			mfp.req = $j.ajax(opts);

			return '';
		}
	}
});





	

/*>>ajax*/

/*>>image*/
var _imgInterval,
	_getTitle = function(item) {
		if(item.data && item.data.title !== undefined) 
			return item.data.title;

		var src = mfp.st.image.titleSrc;

		if(src) {
			if($j.isFunction(src)) {
				return src.call(mfp, item);
			} else if(item.el) {
				return item.el.attr(src) || '';
			}
		}
		return '';
	};

$j.magnificPopup.registerModule('image', {

	options: {
		markup: '<div class="mfp-figure">'+
					'<div class="mfp-close"></div>'+
					'<figure>'+
						'<div class="mfp-img"></div>'+
						'<figcaption>'+
							'<div class="mfp-bottom-bar">'+
								'<div class="mfp-title"></div>'+
								'<div class="mfp-counter"></div>'+
							'</div>'+
						'</figcaption>'+
					'</figure>'+
				'</div>',
		cursor: 'mfp-zoom-out-cur',
		titleSrc: 'title', 
		verticalFit: true,
		tError: '<a href="%url%">The image</a> could not be loaded.'
	},

	proto: {
		initImage: function() {
			var imgSt = mfp.st.image,
				ns = '.image';

			mfp.types.push('image');

			_mfpOn(OPEN_EVENT+ns, function() {
				if(mfp.currItem.type === 'image' && imgSt.cursor) {
					_body.addClass(imgSt.cursor);
				}
			});

			_mfpOn(CLOSE_EVENT+ns, function() {
				if(imgSt.cursor) {
					_body.removeClass(imgSt.cursor);
				}
				_window.off('resize' + EVENT_NS);
			});

			_mfpOn('Resize'+ns, mfp.resizeImage);
			if(mfp.isLowIE) {
				_mfpOn('AfterChange', mfp.resizeImage);
			}
		},
		resizeImage: function() {
			var item = mfp.currItem;
			if(!item || !item.img) return;

			if(mfp.st.image.verticalFit) {
				var decr = 0;
				// fix box-sizing in ie7/8
				if(mfp.isLowIE) {
					decr = parseInt(item.img.css('padding-top'), 10) + parseInt(item.img.css('padding-bottom'),10);
				}
				item.img.css('max-height', mfp.wH-decr);
			}
		},
		_onImageHasSize: function(item) {
			if(item.img) {
				
				item.hasSize = true;

				if(_imgInterval) {
					clearInterval(_imgInterval);
				}
				
				item.isCheckingImgSize = false;

				_mfpTrigger('ImageHasSize', item);

				if(item.imgHidden) {
					if(mfp.content)
						mfp.content.removeClass('mfp-loading');
					
					item.imgHidden = false;
				}

			}
		},

		/**
		 * Function that loops until the image has size to display elements that rely on it asap
		 */
		findImageSize: function(item) {

			var counter = 0,
				img = item.img[0],
				mfpSetInterval = function(delay) {

					if(_imgInterval) {
						clearInterval(_imgInterval);
					}
					// decelerating interval that checks for size of an image
					_imgInterval = setInterval(function() {
						if(img.naturalWidth > 0) {
							mfp._onImageHasSize(item);
							return;
						}

						if(counter > 200) {
							clearInterval(_imgInterval);
						}

						counter++;
						if(counter === 3) {
							mfpSetInterval(10);
						} else if(counter === 40) {
							mfpSetInterval(50);
						} else if(counter === 100) {
							mfpSetInterval(500);
						}
					}, delay);
				};

			mfpSetInterval(1);
		},

		getImage: function(item, template) {

			var guard = 0,

				// image load complete handler
				onLoadComplete = function() {
					if(item) {
						if (item.img[0].complete) {
							item.img.off('.mfploader');
							
							if(item === mfp.currItem){
								mfp._onImageHasSize(item);

								mfp.updateStatus('ready');
							}

							item.hasSize = true;
							item.loaded = true;

							_mfpTrigger('ImageLoadComplete');
							
						}
						else {
							// if image complete check fails 200 times (20 sec), we assume that there was an error.
							guard++;
							if(guard < 200) {
								setTimeout(onLoadComplete,100);
							} else {
								onLoadError();
							}
						}
					}
				},

				// image error handler
				onLoadError = function() {
					if(item) {
						item.img.off('.mfploader');
						if(item === mfp.currItem){
							mfp._onImageHasSize(item);
							mfp.updateStatus('error', imgSt.tError.replace('%url%', item.src) );
						}

						item.hasSize = true;
						item.loaded = true;
						item.loadError = true;
					}
				},
				imgSt = mfp.st.image;


			var el = template.find('.mfp-img');
			if(el.length) {
				var img = document.createElement('img');
				img.className = 'mfp-img';
				item.img = $j(img).on('load.mfploader', onLoadComplete).on('error.mfploader', onLoadError);
				img.src = item.src;

				// without clone() "error" event is not firing when IMG is replaced by new IMG
				// TODO: find a way to avoid such cloning
				if(el.is('img')) {
					item.img = item.img.clone();
				}

				img = item.img[0];
				if(img.naturalWidth > 0) {
					item.hasSize = true;
				} else if(!img.width) {										
					item.hasSize = false;
				}
			}

			mfp._parseMarkup(template, {
				title: _getTitle(item),
				img_replaceWith: item.img
			}, item);

			mfp.resizeImage();

			if(item.hasSize) {
				if(_imgInterval) clearInterval(_imgInterval);

				if(item.loadError) {
					template.addClass('mfp-loading');
					mfp.updateStatus('error', imgSt.tError.replace('%url%', item.src) );
				} else {
					template.removeClass('mfp-loading');
					mfp.updateStatus('ready');
				}
				return template;
			}

			mfp.updateStatus('loading');
			item.loading = true;

			if(!item.hasSize) {
				item.imgHidden = true;
				template.addClass('mfp-loading');
				mfp.findImageSize(item);
			} 

			return template;
		}
	}
});



/*>>image*/

/*>>zoom*/
var hasMozTransform,
	getHasMozTransform = function() {
		if(hasMozTransform === undefined) {
			hasMozTransform = document.createElement('p').style.MozTransform !== undefined;
		}
		return hasMozTransform;		
	};

$j.magnificPopup.registerModule('zoom', {

	options: {
		enabled: false,
		easing: 'ease-in-out',
		duration: 300,
		opener: function(element) {
			return element.is('img') ? element : element.find('img');
		}
	},

	proto: {

		initZoom: function() {
			var zoomSt = mfp.st.zoom,
				ns = '.zoom',
				image;
				
			if(!zoomSt.enabled || !mfp.supportsTransition) {
				return;
			}

			var duration = zoomSt.duration,
				getElToAnimate = function(image) {
					var newImg = image.clone().removeAttr('style').removeAttr('class').addClass('mfp-animated-image'),
						transition = 'all '+(zoomSt.duration/1000)+'s ' + zoomSt.easing,
						cssObj = {
							position: 'fixed',
							zIndex: 9999,
							left: 0,
							top: 0,
							'-webkit-backface-visibility': 'hidden'
						},
						t = 'transition';

					cssObj['-webkit-'+t] = cssObj['-moz-'+t] = cssObj['-o-'+t] = cssObj[t] = transition;

					newImg.css(cssObj);
					return newImg;
				},
				showMainContent = function() {
					mfp.content.css('visibility', 'visible');
				},
				openTimeout,
				animatedImg;

			_mfpOn('BuildControls'+ns, function() {
				if(mfp._allowZoom()) {

					clearTimeout(openTimeout);
					mfp.content.css('visibility', 'hidden');

					// Basically, all code below does is clones existing image, puts in on top of the current one and animated it
					
					image = mfp._getItemToZoom();

					if(!image) {
						showMainContent();
						return;
					}

					animatedImg = getElToAnimate(image); 
					
					animatedImg.css( mfp._getOffset() );

					mfp.wrap.append(animatedImg);

					openTimeout = setTimeout(function() {
						animatedImg.css( mfp._getOffset( true ) );
						openTimeout = setTimeout(function() {

							showMainContent();

							setTimeout(function() {
								animatedImg.remove();
								image = animatedImg = null;
								_mfpTrigger('ZoomAnimationEnded');
							}, 16); // avoid blink when switching images 

						}, duration); // this timeout equals animation duration

					}, 16); // by adding this timeout we avoid short glitch at the beginning of animation


					// Lots of timeouts...
				}
			});
			_mfpOn(BEFORE_CLOSE_EVENT+ns, function() {
				if(mfp._allowZoom()) {

					clearTimeout(openTimeout);

					mfp.st.removalDelay = duration;

					if(!image) {
						image = mfp._getItemToZoom();
						if(!image) {
							return;
						}
						animatedImg = getElToAnimate(image);
					}
					
					
					animatedImg.css( mfp._getOffset(true) );
					mfp.wrap.append(animatedImg);
					mfp.content.css('visibility', 'hidden');
					
					setTimeout(function() {
						animatedImg.css( mfp._getOffset() );
					}, 16);
				}

			});

			_mfpOn(CLOSE_EVENT+ns, function() {
				if(mfp._allowZoom()) {
					showMainContent();
					if(animatedImg) {
						animatedImg.remove();
					}
					image = null;
				}	
			});
		},

		_allowZoom: function() {
			return mfp.currItem.type === 'image';
		},

		_getItemToZoom: function() {
			if(mfp.currItem.hasSize) {
				return mfp.currItem.img;
			} else {
				return false;
			}
		},

		// Get element postion relative to viewport
		_getOffset: function(isLarge) {
			var el;
			if(isLarge) {
				el = mfp.currItem.img;
			} else {
				el = mfp.st.zoom.opener(mfp.currItem.el || mfp.currItem);
			}

			var offset = el.offset();
			var paddingTop = parseInt(el.css('padding-top'),10);
			var paddingBottom = parseInt(el.css('padding-bottom'),10);
			offset.top -= ( $j(window).scrollTop() - paddingTop );


			/*
			
			Animating left + top + width/height looks glitchy in Firefox, but perfect in Chrome. And vice-versa.

			 */
			var obj = {
				width: el.width(),
				// fix Zepto height+padding issue
				height: (_isJQ ? el.innerHeight() : el[0].offsetHeight) - paddingBottom - paddingTop
			};

			// I hate to do this, but there is no another option
			if( getHasMozTransform() ) {
				obj['-moz-transform'] = obj['transform'] = 'translate(' + offset.left + 'px,' + offset.top + 'px)';
			} else {
				obj.left = offset.left;
				obj.top = offset.top;
			}
			return obj;
		}

	}
});



/*>>zoom*/

/*>>iframe*/

var IFRAME_NS = 'iframe',
	_emptyPage = '//about:blank',
	
	_fixIframeBugs = function(isShowing) {
		if(mfp.currTemplate[IFRAME_NS]) {
			var el = mfp.currTemplate[IFRAME_NS].find('iframe');
			if(el.length) { 
				// reset src after the popup is closed to avoid "video keeps playing after popup is closed" bug
				if(!isShowing) {
					el[0].src = _emptyPage;
				}

				// IE8 black screen bug fix
				if(mfp.isIE8) {
					el.css('display', isShowing ? 'block' : 'none');
				}
			}
		}
	};

$j.magnificPopup.registerModule(IFRAME_NS, {

	options: {
		markup: '<div class="mfp-iframe-scaler">'+
					'<div class="mfp-close"></div>'+
					'<iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe>'+
				'</div>',

		srcAction: 'iframe_src',

		// we don't care and support only one default type of URL by default
		patterns: {
			youtube: {
				index: 'youtube.com', 
				id: 'v=', 
				src: '//www.youtube.com/embed/%id%?autoplay=1&rel=0'
			},
			vimeo: {
				index: 'vimeo.com/',
				id: '/',
				src: '//player.vimeo.com/video/%id%?autoplay=1'
			},
			gmaps: {
				index: '//maps.google.',
				src: '%id%&output=embed'
			}
		}
	},

	proto: {
		initIframe: function() {
			mfp.types.push(IFRAME_NS);

			_mfpOn('BeforeChange', function(e, prevType, newType) {
				if(prevType !== newType) {
					if(prevType === IFRAME_NS) {
						_fixIframeBugs(); // iframe if removed
					} else if(newType === IFRAME_NS) {
						_fixIframeBugs(true); // iframe is showing
					} 
				}// else {
					// iframe source is switched, don't do anything
				//}
			});

			_mfpOn(CLOSE_EVENT + '.' + IFRAME_NS, function() {
				_fixIframeBugs();
			});
		},

		getIframe: function(item, template) {
			var embedSrc = item.src;
			var iframeSt = mfp.st.iframe;
				
			$j.each(iframeSt.patterns, function() {
				if(embedSrc.indexOf( this.index ) > -1) {
					if(this.id) {
						if(typeof this.id === 'string') {
							embedSrc = embedSrc.substr(embedSrc.lastIndexOf(this.id)+this.id.length, embedSrc.length);
						} else {
							embedSrc = this.id.call( this, embedSrc );
						}
					}
					embedSrc = this.src.replace('%id%', embedSrc );
					return false; // break;
				}
			});
			
			var dataObj = {};
			if(iframeSt.srcAction) {
				dataObj[iframeSt.srcAction] = embedSrc;
			}
			mfp._parseMarkup(template, dataObj, item);

			mfp.updateStatus('ready');

			return template;
		}
	}
});



/*>>iframe*/

/*>>gallery*/
/**
 * Get looped index depending on number of slides
 */
var _getLoopedId = function(index) {
		var numSlides = mfp.items.length;
		if(index > numSlides - 1) {
			return index - numSlides;
		} else  if(index < 0) {
			return numSlides + index;
		}
		return index;
	},
	_replaceCurrTotal = function(text, curr, total) {
		return text.replace(/%curr%/gi, curr + 1).replace(/%total%/gi, total);
	};

$j.magnificPopup.registerModule('gallery', {

	options: {
		enabled: false,
		arrowMarkup: '<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',
		preload: [0,2],
		navigateByImgClick: true,
		arrows: true,

		tPrev: 'Previous (Left arrow key)',
		tNext: 'Next (Right arrow key)',
		tCounter: '%curr% of %total%'
	},

	proto: {
		initGallery: function() {

			var gSt = mfp.st.gallery,
				ns = '.mfp-gallery',
				supportsFastClick = Boolean($j.fn.mfpFastClick);

			mfp.direction = true; // true - next, false - prev
			
			if(!gSt || !gSt.enabled ) return false;

			_wrapClasses += ' mfp-gallery';

			_mfpOn(OPEN_EVENT+ns, function() {

				if(gSt.navigateByImgClick) {
					mfp.wrap.on('click'+ns, '.mfp-img', function() {
						if(mfp.items.length > 1) {
							mfp.next();
							return false;
						}
					});
				}

				_document.on('keydown'+ns, function(e) {
					if (e.keyCode === 37) {
						mfp.prev();
					} else if (e.keyCode === 39) {
						mfp.next();
					}
				});
			});

			_mfpOn('UpdateStatus'+ns, function(e, data) {
				if(data.text) {
					data.text = _replaceCurrTotal(data.text, mfp.currItem.index, mfp.items.length);
				}
			});

			_mfpOn(MARKUP_PARSE_EVENT+ns, function(e, element, values, item) {
				var l = mfp.items.length;
				values.counter = l > 1 ? _replaceCurrTotal(gSt.tCounter, item.index, l) : '';
			});

			_mfpOn('BuildControls' + ns, function() {
				if(mfp.items.length > 1 && gSt.arrows && !mfp.arrowLeft) {
					var markup = gSt.arrowMarkup,
						arrowLeft = mfp.arrowLeft = $j( markup.replace(/%title%/gi, gSt.tPrev).replace(/%dir%/gi, 'left') ).addClass(PREVENT_CLOSE_CLASS),			
						arrowRight = mfp.arrowRight = $j( markup.replace(/%title%/gi, gSt.tNext).replace(/%dir%/gi, 'right') ).addClass(PREVENT_CLOSE_CLASS);

					var eName = supportsFastClick ? 'mfpFastClick' : 'click';
					arrowLeft[eName](function() {
						mfp.prev();
					});			
					arrowRight[eName](function() {
						mfp.next();
					});	

					// Polyfill for :before and :after (adds elements with classes mfp-a and mfp-b)
					if(mfp.isIE7) {
						_getEl('b', arrowLeft[0], false, true);
						_getEl('a', arrowLeft[0], false, true);
						_getEl('b', arrowRight[0], false, true);
						_getEl('a', arrowRight[0], false, true);
					}

					mfp.container.append(arrowLeft.add(arrowRight));
				}
			});

			_mfpOn(CHANGE_EVENT+ns, function() {
				if(mfp._preloadTimeout) clearTimeout(mfp._preloadTimeout);

				mfp._preloadTimeout = setTimeout(function() {
					mfp.preloadNearbyImages();
					mfp._preloadTimeout = null;
				}, 16);		
			});


			_mfpOn(CLOSE_EVENT+ns, function() {
				_document.off(ns);
				mfp.wrap.off('click'+ns);
			
				if(mfp.arrowLeft && supportsFastClick) {
					mfp.arrowLeft.add(mfp.arrowRight).destroyMfpFastClick();
				}
				mfp.arrowRight = mfp.arrowLeft = null;
			});

		}, 
		next: function() {
			mfp.direction = true;
			mfp.index = _getLoopedId(mfp.index + 1);
			mfp.updateItemHTML();
		},
		prev: function() {
			mfp.direction = false;
			mfp.index = _getLoopedId(mfp.index - 1);
			mfp.updateItemHTML();
		},
		goTo: function(newIndex) {
			mfp.direction = (newIndex >= mfp.index);
			mfp.index = newIndex;
			mfp.updateItemHTML();
		},
		preloadNearbyImages: function() {
			var p = mfp.st.gallery.preload,
				preloadBefore = Math.min(p[0], mfp.items.length),
				preloadAfter = Math.min(p[1], mfp.items.length),
				i;

			for(i = 1; i <= (mfp.direction ? preloadAfter : preloadBefore); i++) {
				mfp._preloadItem(mfp.index+i);
			}
			for(i = 1; i <= (mfp.direction ? preloadBefore : preloadAfter); i++) {
				mfp._preloadItem(mfp.index-i);
			}
		},
		_preloadItem: function(index) {
			index = _getLoopedId(index);

			if(mfp.items[index].preloaded) {
				return;
			}

			var item = mfp.items[index];
			if(!item.parsed) {
				item = mfp.parseEl( index );
			}

			_mfpTrigger('LazyLoad', item);

			if(item.type === 'image') {
				item.img = $j('<img class="mfp-img" />').on('load.mfploader', function() {
					item.hasSize = true;
				}).on('error.mfploader', function() {
					item.hasSize = true;
					item.loadError = true;
					_mfpTrigger('LazyLoadError', item);
				}).attr('src', item.src);
			}


			item.preloaded = true;
		}
	}
});

/*
Touch Support that might be implemented some day

addSwipeGesture: function() {
	var startX,
		moved,
		multipleTouches;

		return;

	var namespace = '.mfp',
		addEventNames = function(pref, down, move, up, cancel) {
			mfp._tStart = pref + down + namespace;
			mfp._tMove = pref + move + namespace;
			mfp._tEnd = pref + up + namespace;
			mfp._tCancel = pref + cancel + namespace;
		};

	if(window.navigator.msPointerEnabled) {
		addEventNames('MSPointer', 'Down', 'Move', 'Up', 'Cancel');
	} else if('ontouchstart' in window) {
		addEventNames('touch', 'start', 'move', 'end', 'cancel');
	} else {
		return;
	}
	_window.on(mfp._tStart, function(e) {
		var oE = e.originalEvent;
		multipleTouches = moved = false;
		startX = oE.pageX || oE.changedTouches[0].pageX;
	}).on(mfp._tMove, function(e) {
		if(e.originalEvent.touches.length > 1) {
			multipleTouches = e.originalEvent.touches.length;
		} else {
			//e.preventDefault();
			moved = true;
		}
	}).on(mfp._tEnd + ' ' + mfp._tCancel, function(e) {
		if(moved && !multipleTouches) {
			var oE = e.originalEvent,
				diff = startX - (oE.pageX || oE.changedTouches[0].pageX);

			if(diff > 20) {
				mfp.next();
			} else if(diff < -20) {
				mfp.prev();
			}
		}
	});
},
*/


/*>>gallery*/

/*>>retina*/

var RETINA_NS = 'retina';

$j.magnificPopup.registerModule(RETINA_NS, {
	options: {
		replaceSrc: function(item) {
			return item.src.replace(/\.\w+$/, function(m) { return '@2x' + m; });
		},
		ratio: 1 // Function or number.  Set to 1 to disable.
	},
	proto: {
		initRetina: function() {
			if(window.devicePixelRatio > 1) {

				var st = mfp.st.retina,
					ratio = st.ratio;

				ratio = !isNaN(ratio) ? ratio : ratio();

				if(ratio > 1) {
					_mfpOn('ImageHasSize' + '.' + RETINA_NS, function(e, item) {
						item.img.css({
							'max-width': item.img[0].naturalWidth / ratio,
							'width': '100%'
						});
					});
					_mfpOn('ElementParse' + '.' + RETINA_NS, function(e, item) {
						item.src = st.replaceSrc(item, ratio);
					});
				}
			}

		}
	}
});

/*>>retina*/

/*>>fastclick*/
/**
 * FastClick event implementation. (removes 300ms delay on touch devices)
 * Based on https://developers.google.com/mobile/articles/fast_buttons
 *
 * You may use it outside the Magnific Popup by calling just:
 *
 * $j('.your-el').mfpFastClick(function() {
 *     console.log('Clicked!');
 * });
 *
 * To unbind:
 * $j('.your-el').destroyMfpFastClick();
 * 
 * 
 * Note that it's a very basic and simple implementation, it blocks ghost click on the same element where it was bound.
 * If you need something more advanced, use plugin by FT Labs https://github.com/ftlabs/fastclick
 * 
 */

(function() {
	var ghostClickDelay = 1000,
		supportsTouch = 'ontouchstart' in window,
		unbindTouchMove = function() {
			_window.off('touchmove'+ns+' touchend'+ns);
		},
		eName = 'mfpFastClick',
		ns = '.'+eName;


	// As Zepto.js doesn't have an easy way to add custom events (like jQuery), so we implement it in this way
	$j.fn.mfpFastClick = function(callback) {

		return $j(this).each(function() {

			var elem = $j(this),
				lock;

			if( supportsTouch ) {

				var timeout,
					startX,
					startY,
					pointerMoved,
					point,
					numPointers;

				elem.on('touchstart' + ns, function(e) {
					pointerMoved = false;
					numPointers = 1;

					point = e.originalEvent ? e.originalEvent.touches[0] : e.touches[0];
					startX = point.clientX;
					startY = point.clientY;

					_window.on('touchmove'+ns, function(e) {
						point = e.originalEvent ? e.originalEvent.touches : e.touches;
						numPointers = point.length;
						point = point[0];
						if (Math.abs(point.clientX - startX) > 10 ||
							Math.abs(point.clientY - startY) > 10) {
							pointerMoved = true;
							unbindTouchMove();
						}
					}).on('touchend'+ns, function(e) {
						unbindTouchMove();
						if(pointerMoved || numPointers > 1) {
							return;
						}
						lock = true;
						e.preventDefault();
						clearTimeout(timeout);
						timeout = setTimeout(function() {
							lock = false;
						}, ghostClickDelay);
						callback();
					});
				});

			}

			elem.on('click' + ns, function() {
				if(!lock) {
					callback();
				}
			});
		});
	};

	$j.fn.destroyMfpFastClick = function() {
		$j(this).off('touchstart' + ns + ' click' + ns);
		if(supportsTouch) _window.off('touchmove'+ns+' touchend'+ns);
	};
})();

/*>>fastclick*/
 _checkInstance(); })(window.$j || window.Zepto);
 
$j(document).ready(function() {
  $j('.video-popup').magnificPopup({
    type: 'iframe',
    mainClass: 'mfp-fade',
    removalDelay: 160,
    preloader: true,
    fixedContentPos: true
    /*iframe: {
        patterns: {
            youtube: {
                src: '//www.youtube.com/embed/%id%?autoplay=1&rel=0'
            }
        }
    }*/
    });
    $j('.content-popup').magnificPopup({
      type: 'inline',
      midClick: true,
      mainClass: 'mfp-fade',
      removalDelay: 160,
      preloader: true,
      fixedContentPos: true
    });
    
    
    setTimeout(function() {
      
      if ($j('.pup-wrapper').length) {
        $j.magnificPopup.open({
          showCloseBtn: false,
          closeOnBgClick: false,
          items: {
            src: '.pup-wrapper' 
          },
          type: 'inline'
        });
      }
    }, 0);
    
  });
/*!---- resonsive-table-----*/
;
(function($j, window, document, undefined) {
  
  $j.InvResponsiveTable = function(element, options) {
    // Extend default settings
    this.options = {};
    element.data('InvResponsiveTable', this);
    var that = this;
    this.init = function(element, options) {
      this.options = $j.extend({}, $j.fn.InvResponsiveTable.defaultOptions, options);
      options = this.options;
      var $table = element;
      if (!$table.hasClass(options.prefix + "-responsive-table-processed")) {
        var tableID = $table.attr("id");
        newID = "";
        if (tableID != "" && tableID !== undefined) {
          newID = "id=" + options.prefix + "-" + tableID;
        }
        
        var tHeadData = new Array();
        $table.wrap('<div class="' + options.prefix + '-responsive-table"></div>');
        $table.parent().append('<div class="' + options.prefix + '-responsive-table-wrapper"></div>');
        $resWrapper = $table.parent().find('.' + options.prefix + '-responsive-table-wrapper');
        $table.css("display", "none");
        $table.find(options.headerRowData).each(function(index) {
          tHeadData[index] = $j(this).html();
        });
        var tbl = '';
        //alert($table.find("tbody tr").length);
        if (options.showTableHeader) {
          $resWrapper.append("<" + options.tableHeaderHTMLTag + ">" + tHeadData[0] + "</" + options.tableHeaderHTMLTag + ">");
        }
        $table.find("tbody tr").each(function(index) {
          id = 'id="' + options.prefix + '-responsive-table-' + index + '" ';
          tbl = "";
          
          tbl = '<table ' + id + ' class="' + options.prefix + '-responsive-table inv-responsive-table" border="0" cellspacing="0" cellpadding="0">';
          tbl += '<tbody>';
          if ($j(this).hasClass(options.ingoreHeaderClass)) {
            SI = -1
          } else {
            SI = options.skipIndex;
            tbl += '<tr class="' + options.prefix + '-responsive-header-tr inv-responsive-header-tr"><td class="' + options.prefix + '-responsive-header-td inv-responsive-header-td" colspan="2" >' + $j(this).find("th:eq(0)").html() + '</td></tr>';
          }
          
          tmpCnt = 1;
          tmpLength = ($j(this).children().length - options.skipIndex);
          $j(this).children().each(function(index) {
            //alert(options.skipIndex);								
            if (index > SI) {
              cls = new Array();
              clscnt = 0;
              if (tmpCnt == 1) {
                cls[clscnt] = options.prefix + '-responsive-data-tr-first inv-responsive-data-tr-first';
                clscnt++
              }
              if (tmpCnt == (tmpLength - 1)) {
                cls[clscnt] = options.prefix + '-responsive-data-tr-last inv-responsive-data-tr-last';
                clscnt++
              }
              if (tmpCnt % 2 == 0) {
                cls[clscnt] = options.prefix + '-responsive-data-tr-even inv-responsive-data-tr-even';
                clscnt++
              } else {
                cls[clscnt] = options.prefix + '-responsive-data-tr-odd';
                clscnt++
              }
              clsName = cls.join(" ");
              //alert(clsName);
              tbl += '<tr class="' + options.prefix + '-responsive-data-tr ' + clsName + '"><td class="' + options.prefix + '-responsive-data-td ' + options.prefix + '-responsive-data-header inv-responsive-data-header">' + tHeadData[index] + '</td><td class="' + options.prefix + '-responsive-data-td ' + options.prefix + '-responsive-data-content inv-responsive-data-content">' + $j(this).html() + '</td></tr>';
              tmpCnt++;
            }
          });
          tbl += '</tbody>';
          tbl += '</table>';
          tbl += '';
          // alert(tbl);
          $resWrapper.append(tbl);
          
          
        });
        $resWrapper.find(".inv-responsive-data-header br").remove();
        $table.addClass(options.prefix + "-responsive-table-processed");
        runPlugin($table);
        $j(window).resize(function() {
          runPlugin($table);
          
          
        });
      }
    };
    
    function runPlugin($table) {
      options = that.options;
      if ($j(window).width() <= options.switchWidth) {
        $j('.' + options.prefix + '-responsive-table-wrapper').css("display", "block");
        $table.css("display", "none");
      } else {
        $j('.' + options.prefix + '-responsive-table-wrapper').css("display", "none");
        $table.css("display", "table");
      }
    }
    
    
    this.init(element, options);
  }
  
  $j.fn.InvResponsiveTable = function(options) {
    return this.each(function() {
      (new $j.InvResponsiveTable($j(this), options));
    });
  };
  
  // set default option values
  $j.fn.InvResponsiveTable.defaultOptions = {
    prefix: 'inv',
    headerRowData: 'thead tr:eq(0) th',
    switchWidth: 640,
    ingoreHeaderClass: 'ignore-header',
    showTableHeader: false,
    tableHeaderHTMLTag: 'h3',
    skipIndex: 0
    
  };
  
})($j, window, document);


$j(document).ready(function() {
  
  $j('.rad-responsive').each(function(count) {
    
    $j(this).find("tr").addClass("ignore-header");
    $j(this).InvResponsiveTable({
      prefix: 'inv',
      showTableHeader: false
    });
  });
  $j(".inv-responsive-data-td:empty").parent().hide();
  
  // For Hiding Headings in Devices which have no content
  $j('.inv-responsive-data-content').each(function(e) {
    
    if ($j(this).html().trim() == '') {
      $j(this).parent('tr').hide();
    }
    
  });  
  
  $j('.inv-responsive-data-header').each(function(e) {
    if ($j(this).html().trim() == "Title") {
      $j(this).next('td').css('font-weight','bold');
    }
  });
  $j('.inv-responsive-data-header').each(function(e) {
    if ($j(this).html().trim() == "Event") {
      $j(this).next('td').css('font-weight','bold');
    }
  });
  
});
/*!---- back-to-top-----*/
/**
 * Copyright (c) 2007-2012 Ariel Flesler - aflesler(at)gmail(dot)com | http://flesler.blogspot.com
 * Dual licensed under MIT and GPL.
 * @author Ariel Flesler
 * @version 1.4.3.1
 */
;(function($j){var h=$j.scrollTo=function(a,b,c){$j(window).scrollTo(a,b,c)};h.defaults={axis:'xy',duration:parseFloat($j.fn.jquery)>=1.3?0:1,limit:true};h.window=function(a){return $j(window)._scrollable()};$j.fn._scrollable=function(){return this.map(function(){var a=this,isWin=!a.nodeName||$j.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!isWin)return a;var b=(a.contentWindow||a).document||a.ownerDocument||a;return/webkit/i.test(navigator.userAgent)||b.compatMode=='BackCompat'?b.body:b.documentElement})};$j.fn.scrollTo=function(e,f,g){if(typeof f=='object'){g=f;f=0}if(typeof g=='function')g={onAfter:g};if(e=='max')e=9e9;g=$j.extend({},h.defaults,g);f=f||g.duration;g.queue=g.queue&&g.axis.length>1;if(g.queue)f/=2;g.offset=both(g.offset);g.over=both(g.over);return this._scrollable().each(function(){if(e==null)return;var d=this,$elem=$j(d),targ=e,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}targ=$j(targ,this);if(!targ.length)return;case'object':if(targ.is||targ.style)toff=(targ=$j(targ)).offset()}$j.each(g.axis.split(''),function(i,a){var b=a=='x'?'Left':'Top',pos=b.toLowerCase(),key='scroll'+b,old=d[key],max=h.max(d,a);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(g.margin){attr[key]-=parseInt(targ.css('margin'+b))||0;attr[key]-=parseInt(targ.css('border'+b+'Width'))||0}attr[key]+=g.offset[pos]||0;if(g.over[pos])attr[key]+=targ[a=='x'?'width':'height']()*g.over[pos]}else{var c=targ[pos];attr[key]=c.slice&&c.slice(-1)=='%'?parseFloat(c)/100*max:c}if(g.limit&&/^\d+$/.test(attr[key]))attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&g.queue){if(old!=attr[key])animate(g.onAfterFirst);delete attr[key]}});animate(g.onAfter);function animate(a){$elem.animate(attr,f,g.easing,a&&function(){a.call(this,e,g)})}}).end()};h.max=function(a,b){var c=b=='x'?'Width':'Height',scroll='scroll'+c;if(!$j(a).is('html,body'))return a[scroll]-$j(a)[c.toLowerCase()]();var d='client'+c,html=a.ownerDocument.documentElement,body=a.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[d],body[d])};function both(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);

$j.fn.topLink = function (settings) {
    settings = jQuery.extend({
        min: 1,
        fadeSpeed: 200,
        ieOffset: 50
    }, settings);
    return this.each(function () {
        //listen for scroll
        var el = $j(this);
        el.css('display', 'none'); //in case the user forgot
        $j(window).scroll(function () {
            if (!jQuery.support.hrefNormalized) {
                el.css({
                    //'position': 'absolute',
                    //'top': $j(window).scrollTop() + $j(window).height() - settings.ieOffset
                });
            }
            if ($j(window).scrollTop() >= settings.min) {
                el.fadeIn(settings.fadeSpeed);
            } else {
                el.fadeOut(settings.fadeSpeed);
            }
        });
    });
};

$j(document).ready(function () {
    $j(".footer-links-container").append('<style type="text/css">#auto-top-link{ background-color: #00316c;bottom: 99px;color: #b9ac94;float: left;font-size: 3.4rem;font-weight: normal;height: 62px;padding: 13px 0; position: fixed;right: 17px;text-align: center;text-decoration: none; vertical-align: middle; width: 62px;"}</style>');
    $j(".footer-links-container").append('<a href="#MainForm" id="auto-top-link"><span class="icon-top-of-page"></span></a>');
    $j('#auto-top-link').topLink({
        min: 400,
        fadeSpeed: 500
    });

    //smoothscroll
    $j('#auto-top-link').click(function(e) {
        e.preventDefault();
        $j('html,body').animate({
            scrollTop: 0
        }, 500);
    });
   
});
/*!---- autocomplete-----*/
$j(document).ready(function () {
	//main search textbox
	if($j("#searchTextbox").length > 0)
	{
		$j("#searchTextbox").autocomplete({
        appendTo:"#searchbox",
			source: function (request, response) {

				$j.ajax({
					url: "/Investis/AdvancedSearch/PredictiveSearch.aspx",
					data: {
						ps_lang: 'en',
						PS_HOSTNAME: autoCompleteDomain,
						PS_SEARCHTERM: encodeURIComponent(request.term),
						PS_MAXSUGGESTIONCOUNT: 7
					},
					async: true,
					success: function (data) {


						response(data);
					},
					error: function (result) {
						//alert("Error loading the data" + result.responseText);
					}
				});
			},
			minLength: 1,
			select: function (event, ui) {
				$j("#searchTextbox").val(ui.item.value);
				$j("#searchButton").trigger("click");
			}
		}).data("ui-autocomplete")._renderItem = function (ul, item) {
			return $j("<li class='ui-corner-all'>")
				.append("<a> <span style='float:left;'>" + item.label + "</span><span style='float:right;'>(" + item.count + ")</span></a>").appendTo(ul);
		};
		
		
	}
	
		//mobi search textbox
	if($j("#searchTextbox2").length > 0)
	{
		$j("#searchTextbox2").autocomplete({
        appendTo:"#searchbox",
			source: function (request, response) {

				$j.ajax({
					url: "/Investis/AdvancedSearch/PredictiveSearch.aspx",
					data: {
						ps_lang: 'en',
						PS_HOSTNAME: autoCompleteDomain,
						PS_SEARCHTERM: encodeURIComponent(request.term),
						PS_MAXSUGGESTIONCOUNT: 7
					},
					async: true,
					success: function (data) {


						response(data);
					},
					error: function (result) {
						//alert("Error loading the data" + result.responseText);
					}
				});
			},
			minLength: 1,
			select: function (event, ui) {
				$j("#searchTextbox2").val(ui.item.value);
				$j("#searchButton2").trigger("click");
			}
		}).data("ui-autocomplete")._renderItem = function (ul, item) {
			return $j("<li class='ui-corner-all'>")
				.append("<a> <span style='float:left;'>" + item.label + "</span><span style='float:right;'>(" + item.count + ")</span></a>").appendTo(ul);
		};
		
		
	}
	
	
	
	// Search result page textbox
	if($j("#SearchTextboxRP").length > 0)
		{
			 $j("#SearchTextboxRP").autocomplete({
               appendTo: "#searchTextBoxContainerRP",
				source: function (request, response) {
					$j.ajax({
						url: "/Investis/AdvancedSearch/PredictiveSearch.aspx",
						data: {
							ps_lang: 'en',
							PS_HOSTNAME: autoCompleteDomain,
							PS_SEARCHTERM: encodeURIComponent(request.term),
							PS_MAXSUGGESTIONCOUNT: 7
						},
						async: true,
						success: function (data) {
							response(data);
						},
						error: function (result) {
							//alert("Error loading the data" + result.responseText);
						}
					});
				},
				minLength: 1,
				select: function (event, ui) {
					$j("#SearchTextboxRP").val(ui.item.value);
					$j("#SearchbuttonRP").trigger("click");
				}
			}).data("ui-autocomplete")._renderItem = function (ul, item) {
				return $j("<li class='ui-corner-all'>")
					.append("<a> <span style='float:left;'>" + item.label + "</span><span style='float:right;'>(" + item.count + ")</span></a>").appendTo(ul);
			};
		}
});
/*!---- email-alerts-----*/
/*---------------------------- Email Alert Signup -----------------------*/

    function validateEmail(sEmail) {
        var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
        if (filter.test(sEmail)) {
            return true;
        } else {
            return false;
        }
    }
    $j(document).ready(function() {
        $j(".sign-up-btn1").click(function(e) {
            e.preventDefault();
            var text = $j('.sign-up').val();
            if (validateEmail(text)) {
                var url = "/investors/investor-resources/email-alerts?alertEmail=" + text;
                document.location.href = url;
            } else {
                alert("Invalid email address");
            }
            return false;
        });
        $j('.sign-up').bind('keypress', function(e) {
            if (e.keyCode == 13) {
                $j('.sign-up-btn1').trigger("click");
                return false;
            }
        });
        if ($j("body").attr("id") == "ip3-email-alerts") {
            var urlParams = {};
            (function() {
                var e,
                    a = /\+/g, // Regex for replacing addition symbol with a space
                    r = /([^&=]+)=?([^&]*)/g,
                    d = function(s) {
                        return decodeURIComponent(s.replace(a, " "));
                    },
                    q = window.location.search.substring(1);
                while (e = r.exec(q))
                    urlParams[d(e[1])] = d(e[2]);
            })()
            if (urlParams['alertEmail'] !== undefined) {
                //alert(urlParams['alertEmail']+"gfdsds"+$j("#iframe-wrapper iframe").attr("src"));
                $j("#page-iframe-container iframe").attr("src", $j("#page-iframe-container iframe").attr("src") + "&alertEmail=" + urlParams['alertEmail']);
            }
        }
    });

/*------------------------ Email Alert Signup ends ---------------------*/
/*!---- equal-height-plugin-----*/
/*!--------------------------------------------------------------------------*
 *  
 *  jquery.heightLine.js 1.0.0
 *  
 *  MIT-style license. 
 *  
 *  2013 Kazuma Nishihata 
 *  http://www.to-r.net
 *  
 *--------------------------------------------------------------------------*/
(function (factory) {
  if(typeof module === "object" && typeof module.exports === "object") {
    factory(require("jquery"), window, document);
  } else {
    factory(jQuery, window, document);
  }
}(function($, window, document, undefined) {
  $.fn.heightLine = function(){
    var target = this,fontSizeChangeTimer,windowResizeId= Math.random();
    var heightLineObj = {
      op : {
        "maxWidth" : 10000,
        "minWidth" : 0,
        "fontSizeCheck" : false
      },
      setOption : function(op){
        this.op = $.extend(this.op,op);
      },
      destroy : function(){
        target.css("height","");
      },
      create : function(op){
        var self = this,
            maxHeight = 0,
            windowWidth = $(window).width();
        self.setOption(op);
        if( windowWidth<=self.op.maxWidth && windowWidth>=self.op.minWidth ){
          target.each(function(){
            if($(this).outerHeight()>maxHeight){
              maxHeight = $(this).outerHeight();
            }
          }).each(function(){
            var height = maxHeight
            - parseInt($(this).css("padding-top"))
            - parseInt($(this).css("padding-bottom"));
            $(this).height(height);
          });
        }
      },
      refresh : function(op){
        this.destroy();
        this.create(op);
      },
      removeEvent :function(){
        $(window).off("resize."+windowResizeId);
        target.off("destroy refresh");
        clearInterval(fontSizeChangeTimer);
      }
    }
    if(typeof arguments[0] === "string" && arguments[0] === "destroy"){
      target.trigger("destroy");
    }else if(typeof arguments[0] === "string" && arguments[0] === "refresh"){
      target.trigger("refresh");
    }else{
      heightLineObj["create"](arguments[0]);
      
      $(window).on("resize."+windowResizeId,function(){
        heightLineObj["refresh"]();
      });
      
      target.on("destroy",function(){
        heightLineObj["removeEvent"]();
        heightLineObj["destroy"]();
      }).on("refresh",function(){
        heightLineObj["refresh"]();
      });
      
      if(heightLineObj.op.fontSizeCheck){
        
        if($("#fontSizeChange").length<=0){
          var fontSizeChange = $("<span id='fontSizeChange'></span>").css({
            width:0,
            height:"1em",
            position:"absolute",
            left:0,
            top:0
          }).appendTo("body");
        }
        var defaultFontSize = $("#fontSizeChange").height();
        fontSizeChangeTimer = setInterval(function(){
          if(defaultFontSize != $("#fontSizeChange").height()){
            heightLineObj["refresh"]();
          }
        },100);
      }
    }
    return target;
  }
}));
$j(document).ready(function(event) {
  $j('.states-col > .split-column-module-item > .description .descriptio-top').heightLine();
  $j('.states-col > .split-column-module-item').heightLine();
  $j('.states-col > .split-column-module-item > .title').heightLine();
  $j('.states-col > .split-column-module-item > .description').heightLine();
  
  
  
  $j('.key-stats-wrapper:not(.noEqualHeight) .key-stats-item').heightLine();
  $j('.key-stats-wrapper:not(.noEqualHeight) .key-stats-item > .heading').heightLine();
  $j('.key-stats-wrapper:not(.noEqualHeight) .key-stats-item > .title').heightLine();
  $j('.key-stats-wrapper:not(.noEqualHeight) .key-stats-item > .text').heightLine();
});
$j(window).resize(function(event) {
  $j('.states-col > .split-column-module-item > .description .descriptio-top').heightLine();
  $j('.states-col > .split-column-module-item').heightLine("refresh");
  $j('.states-col > .split-column-module-item > .title').heightLine("refresh");
  $j('.states-col > .split-column-module-item > .description').heightLine("refresh");
  
  
  $j('.key-stats-wrapper:not(.noEqualHeight) .key-stats-item').heightLine("refresh");
  $j('.key-stats-wrapper:not(.noEqualHeight) .key-stats-item > .heading').heightLine("refresh");
  $j('.key-stats-wrapper:not(.noEqualHeight) .key-stats-item > .title').heightLine("refresh");
  $j('.key-stats-wrapper:not(.noEqualHeight) .key-stats-item > .text').heightLine("refresh");
});
/*!---- ada-----*/
$j(document).ready(function(){
  // Navigation Accessibility Function Starts
  
  $j(".nav_list_level_1.level1:not(.search_switcher)").each(function(){
    $j(this).find("> a").each(function(){
      $j(this).keydown(function(e){
        if(e.keyCode == 40) {
          e.preventDefault();
          $j(".nav_container").removeClass("makeItOpen");
          $j(this).next().addClass("makeItOpen");
          $j("#MainWrapper").addClass("mainOverlay");
        }
      });
      $j(this).next().find("a:not(.nav_close)").last().keydown(function(e){
        if(e.keyCode == 9) {
          $j(this).parents(".nav_container").removeClass("makeItOpen");
          $j("#MainWrapper").removeClass("mainOverlay");
        }
      });
      $j(this).next().find(".nav_list_level_2 > a").each(function(){
        $j(this).keydown(function(e){
          if(e.keyCode == 39) {
            e.preventDefault();
            if($j(this).parent().hasClass("has_children")){
              $j(this).addClass("onIt");
              $j(".nav_level_3").removeClass("makeItOpen");
              $j(this).next().addClass("makeItOpen");
            }
          }
        });
        $j(this).next().find("a").last().keydown(function(e){
          if(e.keyCode == 9) {
            $j(this).parents(".nav_level_3").prev().removeClass("onIt");
            $j(this).parents(".nav_level_3").removeClass("makeItOpen");
          }
        });
      });
    });
    $j(this).find("a:not(.nav_close)").each(function(){
      $j(this).keydown(function(e){
        if(e.keyCode == 27) {
          $j(".nav_container").removeClass("makeItOpen");
          $j("#MainWrapper").removeClass("mainOverlay");
        }
      });
    });
  });
  
  $j(".nav_list_level_1.level1:not(.search_switcher)").hover(function(){
    $j(this).find(".nav_container").addClass("hasToShow");
  },function() {
    $j(this).find(".nav_container").removeClass("hasToShow");
  });
  
  $j(".navigation_wrapper > .nav_level_1 .nav_list_level_1 a.nav_close").click(function(){
    $j(".nav_container").removeClass("hasToShow");
  });
  
  $j(".navigation_wrapper > .nav_level_1 .nav_list_level_1 a.nav_close").keydown(function(e){
    if(e.keyCode == 13) {
      $j(".nav_container").removeClass("makeItOpen");
      $j(".nav_container").removeClass("hasToShow");
       $j("#MainWrapper").removeClass("mainOverlay");
    }
  });
  
  // Navigation Accessibility Function Ends
  
  
  $j(".slick-slide").each(function () {
      var $slide = $j(this);
      if ($slide.attr("aria-describedby") !== undefined) {
          $j(this).attr("id", $slide.attr("aria-describedby"));
      }
  });
});
/*!---- main-3-----*/

$j(document).ready(function() {
	
	$j('.left-content-right-video-wrapper').each(function(){		
			var $jcurrItem = $j(this).find(".tab-video-content-slider");
			var $jcurrSliderNav = $j(this).find(".tab-video-slider-nav");
			var $jcurrSliderCount = $j(this).find(".slide-count-wrap");
			var slidesToShow = 0;
			if($jcurrItem.find(".tab-video-content-slider-item").length >= 4)
			{
				slidesToShow = 3;
				$jcurrItem.removeClass("singleImageSlider");
			}
			else
			{
				slidesToShow = 1;
				$jcurrItem.addClass("singleImageSlider");
			}
		$jcurrItem.on('init reInit afterChange', function (event, slick, currentSlide, nextSlide) {
			var i = (currentSlide ? currentSlide : 0) + 1;
			$jcurrSliderCount.text(i + ' / ' + slick.slideCount);
			$jcurrSliderNav.find("li").removeClass("active");
			$jcurrSliderNav.find("li.slideNav"+(currentSlide+1)).addClass("active");  
		});

		$jcurrItem.slick({
			slidesToShow: slidesToShow,
			centerMode: true,
			centerPadding: "0px",
			speed: 250,
			centerPadding: "40px",
			accessibility: true,
			prevArrow: "<button type='button' data-role='none' class='slick-prev slick-arrow video-new-sldier' aria-label='Previous' role='button' style=''>Previous</button>",
			nextArrow: "<button type='button' data-role='none' class='slick-next slick-arrow video-new-sldier' aria-label='Next' role='button' style=''>Next</button>",
			swipe: true,
			swipeToSlide: true,
			touchThreshold: 10,
			responsive: [

			{
				breakpoint: 767,
				settings: {
				slidesToShow: 1,
				slidesToScroll: 1,
				centerPadding: "10px",
				}
			}

			]
		});
		
		$jcurrSliderNav.find("a.slideVideoNav").on("click",function(e) {		
			e.preventDefault();
			var slideno = $j(this).attr('data-slideVideoNo'); 
			$jcurrSliderNav.find("li").removeClass("active");
			$j(this).parent().addClass("active");
			if($j(window).width() <= 767 )
			{
				$j('html, body').animate({scrollTop : $jcurrItem.offset().top},300);
			}
			$jcurrItem.slick('slickGoTo', slideno - 1 );
		});
		$jcurrSliderNav.find("li:first").addClass("active");
	});
});


 
 $j(window).resize(function(){
	$j('.tab-video-content-slider').slick('resize');
 });

